var BankRobberRecorder=function(){this.isRecording=!1,this.startTimeTick=0,this.initializeData={},this.totalPauseGameTime=0,this.isPausing=!1,this.pauseAtTick=-1,this.gameEvents=[],this.optimizeVector=function(i){return[Math.floor(i.x),Math.floor(i.y),Math.floor(i.z)]},this.optimizeVectors=function(i){for(var t=[],s=0;s<i.length;s++)t.push(this.optimizeVector(i[s]));return t},this.optimizeObstacleData=function(i){return[i.width,i.height,this.optimizeVector(i.position)]},this.optimizeObstaclesData=function(i){for(var t=[],s=0;s<i.length;s++)t.push(this.optimizeObstacleData(i[s]));return t},this.optimizePoliceData=function(i){const t=!1===i.isChansing?0:1;return[i.speed,t,this.optimizeVector(i.position)]},this.optimizePolicesData=function(i){for(var t=[],s=0;s<i.length;s++)t.push(this.optimizePoliceData(i[s]));return t},this.optimizePlayerData=function(i){return[i.speed,this.optimizeVector(i.position)]},this.optimizeGameEvent=function(i,t){var s=[];if(0==i){const i=t.initData;s.push(i.startTime),s.push(this.optimizePlayerData(i.player)),s.push(this.optimizePolicesData(i.polices)),s.push(this.optimizeObstaclesData(i.obstacles)),s.push(this.optimizeVector(i.vanPoint)),s.push(this.optimizeVectors(i.grabMoneyPoints))}else 1==i||2==i?(s.push(t.carryMoney),s.push(this.optimizeVector(t.position)),s.push(this.optimizePolicesData(t.polices)),s.push(t.gateNumber)):3==i?(s.push(this.optimizeVector(t.position)),s.push(t.addedMoney),s.push(t.totalMoney)):4==i?(s.push(this.optimizeVector(t.position)),s.push(t.lostMoney)):5==i?s.push(this.optimizeVector(t.position)):6==i||7==i?(s.push(this.optimizePoliceData(t.boss)),s.push(t.wantedLevel)):8==i||10==i||11==i||(100==i?s.push[t.invalidAction.eventCode]:s.push(t));return s},this.optimizeData=function(i){for(var t=[],s=0;s<i.length;s++){var e=i[s],n=this.optimizeGameEvent(e.eventCode,e.eventData);t.push([e.elapsedTime,e.eventCode,n])}return t},this.getResult=function(i,t){return{result:i,info:t}},this.returnSef=function(i){return i},this.getElapsedTime=function(i){return i-this.startTimeTick-this.totalPauseGameTime},this.pushGameEvent=function(i,t,s){this.gameEvents.push({elapsedTime:this.getElapsedTime(i),eventCode:t,eventData:s})},this.pushInvalidActionAndReturn=function(i,t,s){return this.pushGameEvent(i,100,{invalidAction:t}),this.getResult(!1,s)},this.startRecord=function(i,t,s,e,n,o,a){return 1==this.isRecording?this.getResult(!1,"startRecord: the recording is started."):(this.initializeData=Object.assign({},{startTime:i,player:{speed:s,position:t},polices:e,obstacles:n,vanPoint:o,grabMoneyPoints:a}),this.pushGameEvent(i,0,{initData:Object.assign({},this.initializeData)}),this.startTimeTick=i,this.isRecording=!0,this.getResult(!0,"OK"))},this.pauseGame=function(i){return 0==this.isRecording||1==this.isPausing?this.pushInvalidActionAndReturn(i,10,"pauseGame: no record started or game is in pause >>> isRecording: "+this.isRecording+", pause: "+this.isPausing):(this.pauseAtTick=i,this.isPausing=!0,this.pushGameEvent(i,10,{}),this.getResult(!0,"OK"))},this.unPauseGame=function(i){return 0==this.isRecording||0==this.isPausing?this.pushInvalidActionAndReturn(i,11,"unPauseGame: no record started or game is not in pause >>> isRecording: "+this.isRecording+", pause: "+this.isPausing):(this.isPausing=!1,this.totalPauseGameTime+=i-this.pauseAtTick,this.pauseAtTick=-1,this.pushGameEvent(i,11,{totalPauseGameTime:this.totalPauseGameTime}),this.getResult(!0,"OK"))},this.startGrabMoney=function(i,t,s,e,n){return 0==this.isRecording||1==this.isPausing?this.pushInvalidActionAndReturn(i,1,"startGrabMoney: no record started or game is in pause >>> isRecording: "+this.isRecording+", pause: "+this.isPausing):(this.pushGameEvent(i,1,{carryMoney:e,position:t,polices:Object.assign([],n),gateNumber:s}),this.getResult(!0,"OK"))},this.endGrabMoney=function(i,t,s,e,n){return 0==this.isRecording||1==this.isPausing?this.pushInvalidActionAndReturn(i,2,"endGrabMoney: no record started or game is in pause >>> isRecording: "+this.isRecording+", pause: "+this.isPausing):(this.pushGameEvent(i,2,{carryMoney:e,position:t,gateNumber:s,polices:Object.assign([],n)}),this.getResult(!0,"OK"))},this.moneyBackToVan=function(i,t,s,e){return 0==this.isRecording||1==this.isPausing?this.pushInvalidActionAndReturn(i,3,"moneyBackToVan: no record started or game is in pause >>> isRecording: "+this.isRecording+", pause: "+this.isPausing):(this.pushGameEvent(i,3,{position:t,addedMoney:s,totalMoney:e}),this.getResult(!0,"OK"))},this.beBusted=function(i,t,s){return 0==this.isRecording||1==this.isPausing?this.pushInvalidActionAndReturn(i,4,"beBusted: no record started or game is in pause >>> isRecording: "+this.isRecording+", pause: "+this.isPausing):(this.pushGameEvent(i,4,{position:t,lostMoney:s}),this.getResult(!0,"OK"))},this.reSpawn=function(i,t){return 0==this.isRecording||1==this.isPausing?this.pushInvalidActionAndReturn(i,5,"reSpawn: no record started or game is in pause >>> isRecording: "+this.isRecording+", pause: "+this.isPausing):(this.pushGameEvent(i,5,{position:t}),this.getResult(!0,"OK"))},this.spawnPolice=function(i,t,s){return 0==this.isRecording||1==this.isPausing?this.pushInvalidActionAndReturn(i,6,"spawnPolice: no record started or game is in pause >>> isRecording: "+this.isRecording+", pause: "+this.isPausing):(this.pushGameEvent(i,6,{boss:t,wantedLevel:s}),this.getResult(!0,"OK"))},this.unSpawnPolice=function(i,t,s){return 0==this.isRecording||1==this.isPausing?this.pushInvalidActionAndReturn(i,7,"unSpawnPolice: no record started or game is in pause >>> isRecording: "+this.isRecording+", pause: "+this.isPausing):(this.pushGameEvent(i,7,{boss:t,wantedLevel:s}),this.getResult(!0,"OK"))},this.stopRecord=function(i){return 0==this.isRecording||1==this.isPausing?this.pushInvalidActionAndReturn(i,8,"stopRecord: no record started or game is in pause >>> isRecording: "+this.isRecording+", pause: "+this.isPausing):(this.pushGameEvent(i,8,{}),this.optimizeData(this.gameEvents))}},bankRobberRecorder=new BankRobberRecorder;