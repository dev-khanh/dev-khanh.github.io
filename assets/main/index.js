window.__require=function e(t,o,n){function r(a,s){if(!o[a]){if(!t[a]){var c=a.split("/");if(c=c[c.length-1],!t[c]){var l="function"==typeof __require&&__require;if(!s&&l)return l(c,!0);if(i)return i(c,!0);throw new Error("Cannot find module '"+a+"'")}a=c}var p=o[a]={exports:{}};t[a][0].call(p.exports,function(e){return r(t[a][1][e]||e)},p,p.exports,e,t,o,n)}return o[a].exports}for(var i="function"==typeof __require&&__require,a=0;a<n.length;a++)r(n[a]);return r}({AbstractSDK:[function(e,t,o){"use strict";cc._RF.push(t,"4c3d3rDfXFO/KcrR+ZRfTO/","AbstractSDK"),Object.defineProperty(o,"__esModule",{value:!0});var n=function(){function e(e,t,o){void 0===e&&(e=!1),void 0===t&&(t=3),void 0===o&&(o=500),this.UPDATE_SCORE=2,this.MP_PLAYER_CONNECT=80,this.MP_START=81,this.MP_ASSIGN_NETWORKED_NODES=82,this.MP_ACKNOWLEDGE_HOST=83,this.MP_UPDATE_NODE=84,this.MP_INITIALIZE_NODE=85,this.MP_DESTROY_NODE=86,this.MP_REASSIGN_NODE_OWNER=87,this.PING=99,this.sdkApp=null,this.finalScoreSent=!1,this.opponents={},this.isGameOver=!1,this.sdkHandler=null,this.myPlayerData=null,this.prefabNameKey="_prefabName",this.playerReadyTimeKey="_playerReadyTime",this.timestampKey="_timestamp",this.senderKey="_senderID",this.hostIDKey="_hostID",this.matchIDKey="_matchID",this.newOwnerIDKey="_newOwnerID",this.networkedNodesKey="_networkedNodes",this.initializedNodesKey="_initializedNodes",this.eventNameKey="_eventName",this.pingRequesterKey="_pingRequestedBy",this.pingRecipientKey="_pingRecipient",this.gameEndTimeKey="_gameEndTime",this.isPongKey="_isPong",this.hostID="",this.matchID="",this.networkedNodes=new Map,this.playerReadyTime={},this.remainingPlayerCountToAcknowledgeHost=0,this.isRealtimeMultiplayer=!1,this.lastPingTimeStamp=0,this.gameEndTime=0,this.pingLimit=3,this.pingInterval=500,this.playerPings=new Map,this.pingRequestedTimeStamps=new Map,this.sdkApp=gpSDK,this.opponents=this.sdkApp.opponents,this.isRealtimeMultiplayer=e&&this.opponentCount()>0,this.pingLimit=t,this.pingInterval=o;var n=this;this.sdkApp.sdkOnEvent=function(e,t,o){switch(e){case n.MP_PLAYER_CONNECT:n.MP_onPlayerConnected(t);break;case n.MP_ASSIGN_NETWORKED_NODES:n.hostID&&""!=n.hostID||(n.hostID=t[n.hostIDKey],n.matchID=t[n.matchIDKey],n.playerReadyTime=t[n.playerReadyTimeKey],n.sdkHandler.MP_Client_AssignNetworkNodes(t[n.networkedNodesKey]),n.MP_Ping(n.hostID),n.sendMessage({},n.MP_ACKNOWLEDGE_HOST));break;case n.MP_ACKNOWLEDGE_HOST:if(n.isHost())if(n.remainingPlayerCountToAcknowledgeHost--,t.hasOwnProperty(n.senderKey)&&n.MP_Ping(t[n.senderKey]),0==n.remainingPlayerCountToAcknowledgeHost)n.sdkHandler.MP_Host_OnGameStart(),(i={})[n.gameEndTimeKey]=n.gameEndTime,n.sendMessage(i,n.MP_START);break;case n.MP_START:n.isHost()||(t.hasOwnProperty(n.gameEndTimeKey)&&(n.gameEndTime=t[n.gameEndTimeKey]),n.sdkHandler.MP_Client_OnGameStart());break;case n.MP_UPDATE_NODE:n.matchSessionValid(t)&&t.hasOwnProperty(n.senderKey)&&t.hasOwnProperty("networkedNodeID")&&n.networkedNodes.has(t.networkedNodeID)&&n.networkedNodes.get(t.networkedNodeID).ownerID==t[n.senderKey]&&n.networkedNodes.get(t.networkedNodeID).updateFromData(t);break;case n.MP_INITIALIZE_NODE:if(n.matchSessionValid(t))if(t.hasOwnProperty(n.senderKey)&&t.hasOwnProperty(n.initializedNodesKey))t[n.initializedNodesKey].forEach(function(e){if(e.hasOwnProperty(n.prefabNameKey)&&!n.networkedNodes.has(e.networkedNodeID)){var t=n.sdkHandler.MP_OnInitializeNetworkedNode(e[n.prefabNameKey]);t&&(t.assignOwnerID(e.ownerID),t.setNetworkID(e.networkedNodeID),t.updateFromData(e))}});break;case n.MP_DESTROY_NODE:n.matchSessionValid(t)&&t.hasOwnProperty(n.senderKey)&&n.networkedNodes.has(t.networkedNodeID)&&n.networkedNodes.get(t.networkedNodeID).ownerID==t[n.senderKey]&&(n.networkedNodes.get(t.networkedNodeID).node.destroy(),n.networkedNodes.delete(t.networkedNodeID));break;case n.MP_REASSIGN_NODE_OWNER:n.matchSessionValid(t)&&t.hasOwnProperty(n.senderKey)&&n.networkedNodes.has(t.networkedNodeID)&&(!t.hasOwnProperty(n.newOwnerIDKey)||t[n.senderKey]!=n.networkedNodes.get(t.networkedNodeID).ownerID&&t[n.senderKey]!=n.hostID||n.networkedNodes.get(t.networkedNodeID).updateFromData(t),n.networkedNodes.get(t.networkedNodeID).ownerID=t[n.newOwnerIDKey]);break;case n.PING:if(t.hasOwnProperty(n.pingRequesterKey)&&t.hasOwnProperty(n.pingRecipientKey)&&t[n.pingRecipientKey]==n.getMyPlayerID())if(t.hasOwnProperty(n.isPongKey)){var r=t[n.pingRecipientKey];n.playerPings.has(r)||n.playerPings.set(r,[]),n.playerPings[r].push((new Date).getTime()-n.pingRequestedTimeStamps[r]),n.playerPings[r].length>n.pingLimit&&n.playerPings[r].shift(),n.isGameOver||setTimeout(function(){n.MP_Ping(r)},n.pingInterval)}else{var i;(i={})[n.pingRequesterKey]=t[n.pingRequesterKey],i[n.pingRecipientKey]=n.getMyPlayerID(),i[n.isPongKey]=!0,n.sendMessage(i,n.PING)}break;default:n.onEvent(e,t,o)}},this.sdkApp.updateOpponentScore=function(e,t,o){n.updateOpponentScore(e,o)},this.sdkApp.onOpponentsReady=function(){n.sdkHandler.OnOpponentsReady()}}return e.prototype.matchSessionValid=function(e){return e&&e.hasOwnProperty(this.matchIDKey)&&e[this.matchIDKey]==this.matchID},e.prototype.MP_Ping=function(e){if(e){var t={};t[this.pingRequesterKey]=this.getMyPlayerID(),t[this.pingRecipientKey]=e,this.sendMessage(t,this.PING),this.pingRequestedTimeStamps.set(e,t[this.timestampKey])}},e.prototype.removeNetworkedNode=function(e){this.networkedNodes.has(e)&&this.networkedNodes.delete(e)},e.prototype.MP_onPlayerConnected=function(e){if(!this.playerReadyTime.hasOwnProperty(e[this.senderKey])&&(this.playerReadyTime[e[this.senderKey]]=e[this.timestampKey],Object.keys(this.playerReadyTime).length==this.opponentCount()+1&&this.getMyPlayerID()==this.getFastestConnectedUser())){this.hostID=this.getMyPlayerID(),this.matchID=this.generateUUID(),this.remainingPlayerCountToAcknowledgeHost=this.opponentCount();var t=this.sdkHandler.MP_Host_AssignNetworkedNodes(),o={};o[this.hostIDKey]=this.hostID,o[this.matchIDKey]=this.matchID;for(var n=[],r=0,i=t;r<i.length;r++){var a=i[r];n.push(a.convertToData())}o[this.networkedNodesKey]=n,o[this.playerReadyTimeKey]=this.playerReadyTime,this.sdkApp.goPlaySDK.sendEvent(this.MP_ASSIGN_NETWORKED_NODES,o)}},e.prototype.generateUUID=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=16*Math.random()|0;return("x"==e?t:3&t|8).toString(16)})},e.prototype.readyToStart=function(){var e=this;setTimeout(function(){e.sdkApp.readyToStart()},1500)},e.prototype.getPlayerAveragePing=function(e){var t=0;return this.playerPings.has(e)&&this.playerPings[e].length>0&&(this.playerPings[e].forEach(function(e){t+=e}),t/=this.playerPings[e].length),t},e.prototype.getFastestConnectedUser=function(){for(var e,t=0,o=Object.keys(this.playerReadyTime);t<o.length;t++){var n=o[t];e?this.playerReadyTime[n]<this.playerReadyTime[e]&&(e=n):e=n}return e},e.prototype.isHost=function(){return!!this.hostID&&this.hostID==this.getMyPlayerID()},e.prototype.isSinglePlayer=function(){return this.sdkApp.isSinglePlayer()},e.prototype.opponentCount=function(){return this.opponents?Object.keys(this.opponents).length:0},e.prototype.getMyPlayerID=function(){return this.myPlayerData&&this.myPlayerData.id?this.myPlayerData.id:""},e.prototype.setSDKHandler=function(e){this.sdkHandler=e,this.updateMyPlayerInfo();var t=Object.keys(this.opponents);t.length>0&&this.updateOpponent(this.opponents[t[0]]),this.isRealtimeMultiplayer&&this.sendMessage({},this.MP_PLAYER_CONNECT)},e.prototype.updateMyPlayerInfo=function(){var e=null;this.sdkApp.goPlaySDK.getCurrentPlayer(function(t){e=t}),e&&this.sdkHandler.OnSelfPlayerDataUpdated(e),this.myPlayerData=e},e.prototype.updateOpponent=function(e){e&&this.sdkHandler&&this.sdkHandler.OnOpponentUpdated(e)},e.prototype.updateOpponentScore=function(e,t){this.sdkHandler&&this.sdkHandler.OnOpponentScoreUpdated(e,t)},e.prototype.sendCurrentScore=function(e){this.sdkApp.setScore(e)},e.prototype.abortGame=function(){this.sdkApp.goPlaySDK.abortGame(function(){},function(){})},e.prototype.triggerGameOver=function(){this.sdkApp.updateFinalScore()},e.prototype.initializeNodes=function(){for(var e=this,t=[],o=0;o<arguments.length;o++)t[o]=arguments[o];if(this.isRealtimeMultiplayer){var n={};n[this.initializedNodesKey]=[];var r=(new Date).getTime();t.forEach(function(t){t.generateNetworkID();var o=t.convertToData();o[e.timestampKey]=r,n[e.initializedNodesKey].push(o)}),this.sendMessage(n,this.MP_INITIALIZE_NODE)}},e.prototype.callRPCMethod=function(e,t,o){t[this.eventNameKey]=e,this.sendMessage(t,o)},e.prototype.sendMessage=function(e,t){var o=this;if(e[this.senderKey]=this.getMyPlayerID(),e[this.timestampKey]=(new Date).getTime(),this.matchID&&(e[this.matchIDKey]=this.matchID),t==this.MP_PLAYER_CONNECT){this.MP_onPlayerConnected(e);var n=Object.assign({},e),r=window.setInterval(function(){o.isMPHasHost()?window.clearInterval(r):o.sdkApp.goPlaySDK.sendEvent(t,n)},2e3)}this.sdkApp.goPlaySDK.sendEvent(t,e)},e.prototype.isMPHasHost=function(){return!!this.hostID&&this.hostID.length>0},e.prototype.getTimeRemainingInSeconds=function(){return(this.gameEndTime-(new Date).getTime())/1e3},e.prototype.networkDestroy=function(e){this.isRealtimeMultiplayer?e&&(this.sendMessage(e.convertToData(),this.MP_DESTROY_NODE),e.isSelfOwnNode()&&e.node.destroy()):e.node.destroy()},e.instance=null,e}();o.default=n,cc._RF.pop()},{}],AnimationController:[function(e,t,o){"use strict";cc._RF.push(t,"3e55cApLgBDBJ2ZP8tPPqoV","AnimationController");var n=this&&this.__extends||function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(t,o)};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),r=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var i=cc._decorator,a=i.ccclass,s=i.property,c=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.label_Wave=null,t}return n(t,e),t.prototype.updateWave=function(e){this.label_Wave.node.active=!0,this.label_Wave.string="Wave "+e,cc.tween(this.label_Wave.node).to(.25,{scale:1.3}).to(.25,{scale:1}).start()},r([s(cc.Label)],t.prototype,"label_Wave",void 0),t=r([a],t)}(cc.Component);o.default=c,cc._RF.pop()},{}],Arrow:[function(e,t,o){"use strict";cc._RF.push(t,"055b920yWBHNbP1A5k78OP7","Arrow");var n=this&&this.__extends||function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(t,o)};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),r=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var i=e("./Enemy"),a=e("./_Common/Poolable"),s=e("./_Config/Config"),c=cc._decorator,l=c.ccclass,p=c.property,d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.script_GameSceneController=null,t.targetNode=null,t.animation_ArrowHit=null,t}return n(t,e),t.prototype.onCollisionEnter=function(e,t){var o=this;"Enemy"==e.node.name&&(e.node.getComponent(i.default).gotHit(),cc.Tween.stopAllByTarget(this.node),cc.tween(t.node).call(function(){o.animation_ArrowHit.play("ArrowHit")}).delay(.25).call(function(){t.node.destroy()}).start())},t.prototype.init=function(e,t,o){var n=this;this.script_GameSceneController=o,this.targetNode=e,this.target=t,this.target.mulSelf(1e4);var r=this.node.getPosition().sub(this.target).mag()/(s.default.getInstance().arrowSpeed+s.default.getInstance().arrowSpeedincrement*(this.script_GameSceneController.level_AttackSpeed-1));cc.tween(this.node).to(r,{position:cc.v3(-this.target.x,-this.target.y)}).call(function(){n.node.destroy()}).start()},r([p(cc.Animation)],t.prototype,"animation_ArrowHit",void 0),t=r([l],t)}(a.default);o.default=d,cc._RF.pop()},{"./Enemy":"Enemy","./_Common/Poolable":"Poolable","./_Config/Config":"Config"}],AudioController:[function(e,t,o){"use strict";cc._RF.push(t,"4827cXlJVpF9rwsfmrn3P9D","AudioController");var n=this&&this.__extends||function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(t,o)};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),r=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var i=e("./_Config/Config"),a=cc._decorator,s=a.ccclass,c=a.property,l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.audio_BGM=null,t.audio_ShootArrow=null,t.audio_ArrowHit=null,t.audio_PlayerHit=null,t.audio_PlayerHitShield=null,t.audio_BlackDragonDie=null,t.audio_GreenDragonDie=null,t.audio_SpiderDie=null,t.audio_ChoosePowerup=null,t.audio_RockBreak=null,t.audio_Chest=null,t.musicVolume=1,t}return n(t,e),t.prototype.start=function(){this.musicVolume=i.default.getInstance().audio_BGMVolume,cc.audioEngine.playMusic(this.audio_BGM,!0),cc.audioEngine.setMusicVolume(this.musicVolume)},t.prototype.playPlayerHit=function(e){1==e?cc.audioEngine.playEffect(this.audio_PlayerHitShield,!1):cc.audioEngine.playEffect(this.audio_PlayerHit,!1)},t.prototype.playShootArrow=function(){cc.audioEngine.playEffect(this.audio_ShootArrow,!1)},t.prototype.playerArrowHit=function(){cc.audioEngine.playEffect(this.audio_ArrowHit,!1)},t.prototype.playMonsterDie=function(e){switch(e){case 0:cc.audioEngine.playEffect(this.audio_BlackDragonDie,!1);break;case 1:cc.audioEngine.playEffect(this.audio_GreenDragonDie,!1);break;case 2:cc.audioEngine.playEffect(this.audio_SpiderDie,!1)}},t.prototype.playPowerUp=function(){cc.audioEngine.playEffect(this.audio_ChoosePowerup,!1)},t.prototype.playRockBreak=function(){cc.audioEngine.playEffect(this.audio_RockBreak,!1)},t.prototype.playOpenChest=function(){cc.audioEngine.playEffect(this.audio_Chest,!1)},r([c({type:cc.AudioClip})],t.prototype,"audio_BGM",void 0),r([c({type:cc.AudioClip})],t.prototype,"audio_ShootArrow",void 0),r([c({type:cc.AudioClip})],t.prototype,"audio_ArrowHit",void 0),r([c({type:cc.AudioClip})],t.prototype,"audio_PlayerHit",void 0),r([c({type:cc.AudioClip})],t.prototype,"audio_PlayerHitShield",void 0),r([c({type:cc.AudioClip})],t.prototype,"audio_BlackDragonDie",void 0),r([c({type:cc.AudioClip})],t.prototype,"audio_GreenDragonDie",void 0),r([c({type:cc.AudioClip})],t.prototype,"audio_SpiderDie",void 0),r([c({type:cc.AudioClip})],t.prototype,"audio_ChoosePowerup",void 0),r([c({type:cc.AudioClip})],t.prototype,"audio_RockBreak",void 0),r([c({type:cc.AudioClip})],t.prototype,"audio_Chest",void 0),t=r([s],t)}(cc.Component);o.default=l,cc._RF.pop()},{"./_Config/Config":"Config"}],CameraFollow:[function(e,t,o){"use strict";cc._RF.push(t,"c1006nEfaNB+5Fmx7/3rYBW","CameraFollow");var n=this&&this.__extends||function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(t,o)};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),r=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var i=cc._decorator,a=i.ccclass,s=i.property,c=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.followTarget=null,t.offset=cc.Vec2.ZERO,t.shouldFollowTarget=!1,t.distanceTravelledSinceLastPlatform=0,t}return n(t,e),t.prototype.start=function(){this.beginFollowTarget()},t.prototype.beginFollowTarget=function(){this.followTarget&&(this.shouldFollowTarget=!0)},t.prototype.focusOnTarget=function(){var e=this.followTarget.position.y+this.offset.y;this.node.setPosition(this.followTarget.position.x,e)},t.prototype.lateUpdate=function(e){this.shouldFollowTarget&&this.focusOnTarget()},r([s(cc.Node)],t.prototype,"followTarget",void 0),r([s(cc.Vec2)],t.prototype,"offset",void 0),t=r([a],t)}(cc.Component);o.default=c,cc._RF.pop()},{}],Chest:[function(e,t,o){"use strict";cc._RF.push(t,"1d78dP5hl9DTpS2Q2ZqvgGf","Chest");var n=this&&this.__extends||function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(t,o)};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),r=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var i=e("./Player"),a=cc._decorator,s=a.ccclass,c=(a.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.prototype.onCollisionEnter=function(e,t){"Player"==e.node.name&&(t.node.getComponent(cc.BoxCollider).enabled=!1,e.node.getComponent(i.default).getChest(),cc.tween(t.node).to(.5,{opacity:0}).start())},t=r([s],t)}(cc.Component));o.default=c,cc._RF.pop()},{"./Player":"Player"}],ConfigItem:[function(e,t,o){"use strict";cc._RF.push(t,"31636KG7cVDe6cx5SKN7Bhy","ConfigItem");var n=this&&this.__extends||function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(t,o)};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),r=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var i=e("./Config"),a=cc._decorator,s=a.ccclass,c=a.property,l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.configTitle=null,t.configEditBox=null,t.backgroundNode=null,t.isValidDataType=!0,t}return n(t,e),t.prototype.updateValidity=function(){switch(this.isValidDataType=!1,(typeof i.default.getInstance()[this.configTitle.string]).toString()){case"number":""!=this.configEditBox.string.trim()&&(this.isValidDataType=!isNaN(this.configEditBox.string.trim()));break;case"boolean":"true"!=this.configEditBox.string.toLowerCase().trim()&&"false"!=this.configEditBox.string.toLowerCase().trim()||(this.configEditBox.string=this.configEditBox.string.toLowerCase().trim(),this.isValidDataType=Boolean(this.configEditBox.string));break;default:this.isValidDataType=!0}this.backgroundNode.color=this.isValidDataType?cc.Color.WHITE:cc.Color.RED},r([c(cc.Label)],t.prototype,"configTitle",void 0),r([c(cc.EditBox)],t.prototype,"configEditBox",void 0),r([c(cc.Node)],t.prototype,"backgroundNode",void 0),t=r([s],t)}(cc.Component);o.default=l,cc._RF.pop()},{"./Config":"Config"}],ConfigManager:[function(e,t,o){"use strict";cc._RF.push(t,"da287XdREBGt7dRyc5lJf4o","ConfigManager");var n=this&&this.__extends||function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(t,o)};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),r=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var i=e("./Config"),a=e("./ConfigItem"),s=cc._decorator,c=s.ccclass,l=s.property,p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.configItemPrefab=null,t.scrollContentNode=null,t}return n(t,e),t.prototype.start=function(){for(var e=0,t=Object.keys(i.default.getInstance());e<t.length;e++){var o=t[e];if(Array.isArray(i.default.getInstance()[o])||"object"!=(typeof i.default.getInstance()[o]).toString()){var n=cc.instantiate(this.configItemPrefab);n.setParent(this.scrollContentNode),n.setPosition(0,-(this.scrollContentNode.childrenCount-1)*n.height);var r=n.getComponent(a.default);r.configTitle.string=o,r.configEditBox.string=i.default.getInstance()[o],r.configEditBox.placeholder=r.configEditBox.string}}this.scrollContentNode.height=this.scrollContentNode.childrenCount*this.configItemPrefab.data.height},t.prototype.saveConfig=function(){for(var e=0,t=this.scrollContentNode.children;e<t.length;e++){var o=t[e].getComponent(a.default);o&&o.isValidDataType&&(Array.isArray(i.default.getInstance()[o.configTitle.string])?"number"==(typeof i.default.getInstance()[o.configTitle.string][0]).toString()?i.default.getInstance()[o.configTitle.string]=o.configEditBox.string.split(",").map(Number):i.default.getInstance()[o.configTitle.string]=o.configEditBox.string.split(","):"number"==(typeof i.default.getInstance()[o.configTitle.string]).toString()?i.default.getInstance()[o.configTitle.string]=Number(o.configEditBox.string):i.default.getInstance()[o.configTitle.string]=o.configEditBox.string.length>0?o.configEditBox.string:o.configEditBox.placeholder)}console.log("Config has been updated!"),this.printConfigData()},t.prototype.printConfigData=function(){for(var e=0,t=Object.keys(i.default.getInstance());e<t.length;e++){var o=t[e];console.log(o+" : "+i.default.getInstance()[o])}},t.prototype.closeConfigManager=function(){this.node.active=!1},t.prototype.onEnable=function(){this.printConfigData()},r([l(cc.Prefab)],t.prototype,"configItemPrefab",void 0),r([l(cc.Node)],t.prototype,"scrollContentNode",void 0),t=r([c],t)}(cc.Component);o.default=p,cc._RF.pop()},{"./Config":"Config","./ConfigItem":"ConfigItem"}],Config:[function(e,t,o){"use strict";cc._RF.push(t,"9148cH/ZhJN6oqZ7SsBw82s","Config");var n=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var r=cc._decorator,i=r.ccclass,a=(r.property,function(){function e(){this.gameDuration=150,this.titleShowTime=3,this.endingShowTime=4,this.minRow=3,this.maxRow=6,this.minColumn=1,this.maxColumn=4,this.gemCheckpoint=5,this.playerSpeed=400,this.playerSpeedIncrement=50,this.arrowSpeed=1e3,this.arrowSpeedincrement=500,this.fireRate=.5,this.fireRatedecrement=.02,this.playerInvincibleTime=2,this.distantBetweenPlayerAndEnemy=700,this.attackRangeIncrement=30,this.enemyHealth=2,this.enemySpeed=100,this.enemySpiderSpeed=150,this.enemySpeedMultiplier=20,this.enemyFireballSpeed=300,this.enemyFireballSpeedMultiplier=50,this.enemyMeleeDistant=20,this.enemyRangeDistant=300,this.numberOfMeleeOnWave=[2,1,2,1,2,1],this.numberOfRangeOnWave=[0,1,1,2,2,3],this.numberOfEnemyafterWave6=5,this.rateOfMeleeAfterWave6=5,this.asset_MountainSpawnRate=10,this.asset_RaySpawnRate=6,this.asset_WebSpawnRate=6,this.audio_BGMVolume=.7}var t;return t=e,e.getInstance=function(){return t.instance||(t.instance=new t),t.instance},e.instance=null,e=t=n([i],e)}());o.default=a,cc._RF.pop()},{}],EnemyArrow:[function(e,t,o){"use strict";cc._RF.push(t,"47e417SwJVLUbDP2tazD05H","EnemyArrow");var n=this&&this.__extends||function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(t,o)};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),r=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var i=e("./_Common/Poolable"),a=e("./_Config/Config"),s=cc._decorator,c=s.ccclass,l=(s.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.targetNode=null,t}return n(t,e),t.prototype.onCollisionEnter=function(e,t){"Player"==e.node.name&&t.node.destroy()},t.prototype.init=function(e,t,o){var n=this;this.targetNode=e,this.target=t,this.target.mulSelf(1e4);var r=this.node.getPosition().sub(this.target).mag()/(a.default.getInstance().enemyFireballSpeed+a.default.getInstance().enemyFireballSpeedMultiplier*(.5*o.wave));cc.tween(this.node).to(r,{position:cc.v3(-this.target.x,-this.target.y)}).call(function(){n.node.destroy()}).start()},t=r([c],t)}(i.default));o.default=l,cc._RF.pop()},{"./_Common/Poolable":"Poolable","./_Config/Config":"Config"}],EnemyController:[function(e,t,o){"use strict";cc._RF.push(t,"2c9be9prNxJ/JJ0cexwTU1X","EnemyController");var n=this&&this.__extends||function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(t,o)};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),r=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var i=e("./AnimationController"),a=e("./AudioController"),s=e("./Enemy"),c=e("./GameManager"),l=e("./PlatformController"),p=e("./ScoreController"),d=e("./_Common/NodeHelper"),u=e("./_Common/PoolHelper"),h=e("./_Common/Utils"),f=e("./_Config/Config"),y=cc._decorator,_=y.ccclass,m=y.property,g=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.script_GameManager=null,t.script_AudioController=null,t.script_AnimationController=null,t.script_PlatformController=null,t.script_ScoreController=null,t.script_EnemyPool=null,t.node_Spawner=[],t.node_SpecialSpawner=[],t.node_EnemyPlaceholder=null,t.node_BulletPlaceholder=null,t.node_EnemiesPresent=[],t.sortedEnemy=[],t.node_Player=null,t.wave=0,t}return n(t,e),t.prototype.spawnEnemy=function(){if(0==this.script_GameManager.timeup){h.default.clearArray(this.node_EnemiesPresent),this.wave++,this.script_AnimationController.updateWave(this.wave);if(this.wave<=6)this.spawnMelee(f.default.getInstance().numberOfMeleeOnWave[this.wave-1]),this.spawnRange(f.default.getInstance().numberOfRangeOnWave[this.wave-1]);else for(var e=0;e<f.default.getInstance().numberOfEnemyafterWave6;e++)h.default.random(1,10)<=f.default.getInstance().rateOfMeleeAfterWave6?this.spawnMelee(1):this.spawnRange(1);this.sortEnemyDistant()}},t.prototype.spawnMelee=function(e){var t=0,o=null;if(!(e<=0))for(var n=0;n<e;n++)switch(h.default.random(0,1)){case 0:t=h.default.random(0,this.node_Spawner.length-1),(o=this.script_EnemyPool.getObject(this.node_Spawner[t])).setPosition(cc.Vec2.ZERO),d.default.setParentWorldPosStays(o,this.node_EnemyPlaceholder),this.node_EnemiesPresent.push(o),o.getComponent(s.default).init(0,this.node_Player,this,this.node_BulletPlaceholder,this.script_GameManager,this.script_AudioController);break;case 1:t=h.default.random(0,this.node_SpecialSpawner.length-1),(o=this.script_EnemyPool.getObject(this.node_SpecialSpawner[t])).setPosition(cc.Vec2.ZERO),d.default.setParentWorldPosStays(o,this.node_EnemyPlaceholder),this.node_EnemiesPresent.push(o),o.getComponent(s.default).init(2,this.node_Player,this,this.node_BulletPlaceholder,this.script_GameManager,this.script_AudioController)}},t.prototype.spawnRange=function(e){var t=0,o=null;if(!(e<=0))for(var n=0;n<e;n++)t=h.default.random(0,this.node_Spawner.length-1),(o=this.script_EnemyPool.getObject(this.node_Spawner[t])).setPosition(cc.Vec2.ZERO),d.default.setParentWorldPosStays(o,this.node_EnemyPlaceholder),this.node_EnemiesPresent.push(o),o.getComponent(s.default).init(1,this.node_Player,this,this.node_BulletPlaceholder,this.script_GameManager,this.script_AudioController)},t.prototype.sortEnemyDistant=function(){var e=this;cc.tween(this.node).call(function(){if(e.node_EnemiesPresent.length>=2){e.sortedEnemy=e.node_EnemiesPresent.sort(function(e,t){return e.getComponent(s.default).distantFromPlayer>t.getComponent(s.default).distantFromPlayer?-1:e.getComponent(s.default).distantFromPlayer<t.getComponent(s.default).distantFromPlayer?1:0});for(var t=0;t<e.sortedEnemy.length;t++)e.sortedEnemy[t].getComponent(cc.BoxCollider).enabled=t==e.sortedEnemy.length-1}else e.node_EnemiesPresent.length>0&&(e.node_EnemiesPresent[0].getComponent(cc.BoxCollider).enabled=!0)}).delay(.1).call(function(){e.sortEnemyDistant()}).start()},t.prototype.enemyDead=function(e){h.default.removeFromArray(this.node_EnemiesPresent,e),0==this.node_EnemiesPresent.length&&this.script_PlatformController.removeObstacle(this.wave),this.script_ScoreController.addScore(1)},r([m(c.default)],t.prototype,"script_GameManager",void 0),r([m(a.default)],t.prototype,"script_AudioController",void 0),r([m(i.default)],t.prototype,"script_AnimationController",void 0),r([m(l.default)],t.prototype,"script_PlatformController",void 0),r([m(p.default)],t.prototype,"script_ScoreController",void 0),r([m(u.default)],t.prototype,"script_EnemyPool",void 0),r([m([cc.Node])],t.prototype,"node_Spawner",void 0),r([m([cc.Node])],t.prototype,"node_SpecialSpawner",void 0),r([m(cc.Node)],t.prototype,"node_EnemyPlaceholder",void 0),r([m(cc.Node)],t.prototype,"node_BulletPlaceholder",void 0),r([m(cc.Node)],t.prototype,"node_Player",void 0),t=r([_],t)}(cc.Component);o.default=g,cc._RF.pop()},{"./AnimationController":"AnimationController","./AudioController":"AudioController","./Enemy":"Enemy","./GameManager":"GameManager","./PlatformController":"PlatformController","./ScoreController":"ScoreController","./_Common/NodeHelper":"NodeHelper","./_Common/PoolHelper":"PoolHelper","./_Common/Utils":"Utils","./_Config/Config":"Config"}],Enemy:[function(e,t,o){"use strict";cc._RF.push(t,"394c5BkMAxLuJ3+8Ht1gU6D","Enemy");var n=this&&this.__extends||function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(t,o)};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),r=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var i=e("./EnemyArrow"),a=e("./Player"),s=e("./_Common/NodeHelper"),c=e("./_Common/Poolable"),l=e("./_Common/Utils"),p=e("./_Config/Config"),d=cc._decorator,u=d.ccclass,h=d.property,f=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.script_GameManager=null,t.script_EnemyController=null,t.script_AudioController=null,t.sprite_Enemy=null,t.spriteFrame_BlackDragonAttack=null,t.spriteFrame_GreenDragonAttack=null,t.spriteFrame_SpiderAttack=null,t.sprite_Range=[],t.sprite_Melee=[],t.sprite_SpecialMelee=[],t.animation_Enemy=null,t.node_SpiderString=null,t.melee=!0,t.player=null,t.enemyType=0,t.distantFromPlayer=0,t.health=0,t.die=!1,t.code=0,t.prefab_Bullet=null,t.bulletPlaceholder=null,t}return n(t,e),t.prototype.init=function(e,t,o,n,r,i){this.node.opacity=255,this.script_GameManager=r,this.script_EnemyController=o,this.script_AudioController=i,this.bulletPlaceholder=n,this.player=t,this.health=p.default.getInstance().enemyHealth,this.node.getComponent(cc.BoxCollider).enabled=!0,this.die=!1;var a=0;switch(this.code=e,e){case 0:this.melee=!0,a=l.default.random(0,this.sprite_Melee.length-1),this.sprite_Enemy.spriteFrame=this.sprite_Melee[a],this.animation_Enemy.play("BlackDragonAnimation");break;case 1:this.melee=!1,a=l.default.random(0,this.sprite_Range.length-1),this.sprite_Enemy.spriteFrame=this.sprite_Range[a],this.animation_Enemy.play("GreenDragonAnimation"),this.shootPlayer();break;case 2:this.melee=!0,a=l.default.random(0,this.sprite_SpecialMelee.length-1),this.sprite_Enemy.spriteFrame=this.sprite_SpecialMelee[a],this.animation_Enemy.play("SpiderAnimation"),0==a&&(this.node_SpiderString.active=!0)}},t.prototype.shootPlayer=function(){var e=this;if(0==this.script_GameManager.timeup&&0==this.die&&0==this.melee){var t=this.node.position,o=this.player.position,n=t.x-o.x,r=t.y-o.y,a=cc.v2(n,r);cc.tween(this.node).call(function(){var t=cc.instantiate(e.prefab_Bullet);t.parent=e.node,t.position=cc.Vec3.ZERO,s.default.setParentWorldPosStays(t,e.bulletPlaceholder),t.getComponent(i.default).init(e.player,a,e.script_EnemyController)}).delay(1).call(function(){e.shootPlayer()}).start()}},t.prototype.gotHit=function(){var e=this;this.health--,this.gotHitAnim(),this.script_AudioController.playerArrowHit(),this.health<=0?(this.script_AudioController.playMonsterDie(this.code),cc.tween(this.node).call(function(){e.die=!0,e.node.getComponent(cc.BoxCollider).enabled=!1,e.script_EnemyController.enemyDead(e.node)}).to(.5,{opacity:0}).call(function(){e.node.destroy()}).start()):cc.tween(this.sprite_Enemy.node).to(0,{color:cc.Color.RED}).delay(.1).to(0,{color:cc.Color.WHITE}).start()},t.prototype.gotHitAnim=function(){var e=this;0==this.code?cc.tween(this.node).call(function(){e.animation_Enemy.stop(),e.sprite_Enemy.spriteFrame=e.spriteFrame_BlackDragonAttack}).delay(.2).call(function(){0==e.die&&e.animation_Enemy.play("BlackDragonAnimation")}).start():1==this.code?cc.tween(this.node).call(function(){e.animation_Enemy.stop(),e.sprite_Enemy.spriteFrame=e.spriteFrame_GreenDragonAttack}).delay(.2).call(function(){0==e.die&&e.animation_Enemy.play("GreenDragonAnimation")}).start():2==this.code&&cc.tween(this.node).call(function(){e.animation_Enemy.stop(),e.sprite_Enemy.spriteFrame=e.spriteFrame_SpiderAttack}).delay(.2).call(function(){0==e.die&&e.animation_Enemy.play("SpiderAnimation")}).start()},t.prototype.update=function(e){if(0==this.script_GameManager.timeup&&null!=this.player){var t=this.player.position;this.distantFromPlayer=this.node.position.sub(t).mag();var o=0;o=2==this.code?e*(p.default.getInstance().enemySpiderSpeed+p.default.getInstance().enemySpeedMultiplier*(.5*this.script_EnemyController.wave)):e*(p.default.getInstance().enemySpeed+p.default.getInstance().enemySpeedMultiplier*(.5*this.script_EnemyController.wave)),0==this.die&&0==this.player.getComponent(a.default).playerDead&&(1==this.melee?(this.node.x>=t.x+p.default.getInstance().enemyMeleeDistant&&(this.node.scaleX=-1,this.node.x-=o),this.node.x<=t.x-p.default.getInstance().enemyMeleeDistant&&(this.node.scaleX=1,this.node.x+=o),this.node.y>=t.y+p.default.getInstance().enemyMeleeDistant&&(this.node.y-=o),this.node.y<=t.y-p.default.getInstance().enemyMeleeDistant&&(this.node.y+=o)):(this.node.x>=t.x+p.default.getInstance().enemyRangeDistant&&(this.node.scaleX=-1,this.node.x-=o),this.node.x<=t.x-p.default.getInstance().enemyRangeDistant&&(this.node.scaleX=1,this.node.x+=o),this.node.y>=t.y+p.default.getInstance().enemyRangeDistant&&(this.node.y-=o),this.node.y<=t.y-p.default.getInstance().enemyRangeDistant&&(this.node.y+=o)))}},r([h(cc.Sprite)],t.prototype,"sprite_Enemy",void 0),r([h(cc.SpriteFrame)],t.prototype,"spriteFrame_BlackDragonAttack",void 0),r([h(cc.SpriteFrame)],t.prototype,"spriteFrame_GreenDragonAttack",void 0),r([h(cc.SpriteFrame)],t.prototype,"spriteFrame_SpiderAttack",void 0),r([h([cc.SpriteFrame])],t.prototype,"sprite_Range",void 0),r([h([cc.SpriteFrame])],t.prototype,"sprite_Melee",void 0),r([h([cc.SpriteFrame])],t.prototype,"sprite_SpecialMelee",void 0),r([h(cc.Animation)],t.prototype,"animation_Enemy",void 0),r([h(cc.Node)],t.prototype,"node_SpiderString",void 0),r([h(cc.Prefab)],t.prototype,"prefab_Bullet",void 0),t=r([u],t)}(c.default);o.default=f,cc._RF.pop()},{"./EnemyArrow":"EnemyArrow","./Player":"Player","./_Common/NodeHelper":"NodeHelper","./_Common/Poolable":"Poolable","./_Common/Utils":"Utils","./_Config/Config":"Config"}],GameManager:[function(e,t,o){"use strict";cc._RF.push(t,"7f7e3Vg6h9Go6lDxmWL88Lz","GameManager");var n=this&&this.__extends||function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(t,o)};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),r=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var i=e("../SDK/ISDKHandler"),a=e("./_Common/Utils"),s=e("../SDK/SDKFunction"),c=e("./_Config/Config"),l=cc._decorator,p=l.ccclass,d=l.property,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.selfNameLabel=null,t.selfScoreLabel=null,t.selfAvatar=null,t.opponentDetails=null,t.opponentNameLabel=null,t.opponentScoreLabel=null,t.opponentAvatar=null,t.waitingForOpponentNode=null,t.gameOverNode=null,t.gameOverNodeLabel=null,t.timeRemainingLabel=null,t.timeRemaining=90,t.timeup=!1,t.gameStart=!1,t.delay=0,t.node_Ending=null,t.node_EndingImage=null,t}return n(t,e),t.prototype.onLoad=function(){e.prototype.onLoad.call(this),this.timeRemaining=c.default.getInstance().gameDuration},t.prototype.start=function(){s.default.getInstance().isSinglePlayer()?this.startGame():(this.waitingForOpponentNode.active=!0,s.default.getInstance().readyToStart())},t.prototype.startGame=function(){this.waitingForOpponentNode.active=!1,s.default.getInstance().sdkApp.goPlaySDK.startGame()},t.prototype.gameOver=function(){var e=this;this.delay=c.default.getInstance().endingShowTime,this.timeup=!0,this.node_Ending.active=!0,cc.tween(this.node_EndingImage).to(.5,{position:cc.v3(0,0)}).delay(this.delay).call(function(){e.gameOverNode.active=!0,s.default.getInstance().triggerGameOver()}).start()},t.prototype.update=function(e){1==this.gameStart&&this.timeRemaining>0&&(this.timeRemaining-=e,this.timeRemaining<0&&(this.timeRemaining=0,this.gameOver()),this.timeRemainingLabel.string=a.default.formatTime(this.timeRemaining))},t.prototype.OnOpponentsReady=function(){this.startGame()},t.prototype.OnSelfPlayerDataUpdated=function(e){this.selfNameLabel.string=e.firstName,e.avatar&&e.avatar.link&&a.default.loadImageFromURL(this.selfAvatar,e.avatar.link,this.selfAvatar.node.parent)},t.prototype.OnOpponentUpdated=function(e){e&&(this.opponentDetails.active=!0,this.opponentNameLabel.string=e.firstName,e.avatar&&e.avatar.link&&a.default.loadImageFromURL(this.opponentAvatar,e.avatar.link,this.opponentAvatar.node.parent),this.opponentAvatar.node.on(cc.Node.EventType.TOUCH_START,function(){s.default.getInstance().sdkApp.showOpponentProfile(e.id)},this))},t.prototype.OnOpponentScoreUpdated=function(e,t){this.opponentScoreLabel.string=t.toString()},t.prototype.OnFinalScoreUpdated=function(){this.gameOverNodeLabel.string="Tap to view results",this.gameOverNode.on(cc.Node.EventType.TOUCH_START,function(){s.default.getInstance().abortGame()},this)},r([d(cc.Label)],t.prototype,"selfNameLabel",void 0),r([d(cc.Label)],t.prototype,"selfScoreLabel",void 0),r([d(cc.Sprite)],t.prototype,"selfAvatar",void 0),r([d(cc.Node)],t.prototype,"opponentDetails",void 0),r([d(cc.Label)],t.prototype,"opponentNameLabel",void 0),r([d(cc.Label)],t.prototype,"opponentScoreLabel",void 0),r([d(cc.Sprite)],t.prototype,"opponentAvatar",void 0),r([d(cc.Node)],t.prototype,"waitingForOpponentNode",void 0),r([d(cc.Node)],t.prototype,"gameOverNode",void 0),r([d(cc.Label)],t.prototype,"gameOverNodeLabel",void 0),r([d(cc.Label)],t.prototype,"timeRemainingLabel",void 0),r([d(cc.Node)],t.prototype,"node_Ending",void 0),r([d(cc.Node)],t.prototype,"node_EndingImage",void 0),t=r([p],t)}(i.default);o.default=u,cc._RF.pop()},{"../SDK/ISDKHandler":"ISDKHandler","../SDK/SDKFunction":"SDKFunction","./_Common/Utils":"Utils","./_Config/Config":"Config"}],GameSceneController:[function(e,t,o){"use strict";cc._RF.push(t,"327a7N/AANPtao8xlagyNjh","GameSceneController");var n=this&&this.__extends||function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(t,o)};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),r=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var i=e("./GameManager"),a=e("./PlatformController"),s=e("./Player"),c=e("./Powerups"),l=e("./PrefabAsset_Main"),p=e("./_Common/PoolHelper"),d=e("./_Config/Config"),u=cc._decorator,h=u.ccclass,f=u.property,y=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.script_GameManager=null,t.script_PlatformController=null,t.script_Player=null,t.node_Config=null,t.node_Camera=null,t.initialPosition=0,t.mountainAndWebThreshold=4e3,t.rayThreshold=5e3,t.pool_Mountain=null,t.pool_Web=null,t.pool_Ray=null,t.parent_Mountain=null,t.parent_Web=null,t.parent_Ray=null,t.node_Mountains=[],t.node_Web=[],t.node_Ray=[],t.node_PowerupBG=null,t.node_PowerupText=null,t.node_PowerupIcon=null,t.sprite_PowerUp=null,t.frame_Powerups=[],t.node_Powerups=null,t.scripts_Powerups=[],t.level_AttackSpeed=1,t.level_AttackRange=1,t.level_MovementSpeed=1,t.amount_Shield=0,t.firstSkill=10,t.batch=0,t.node_TitleScreen=null,t.node_TitleImage=null,t.node_TitleText=null,t.hastitle=!0,t.delay=0,t}return n(t,e),t.prototype.onLoad=function(){cc.director.getPhysicsManager().enabled=!0,cc.director.getCollisionManager().enabled=!0},t.prototype.start=function(){var e=this;this.delay=d.default.getInstance().titleShowTime,this.spawnBGAsset(5),cc.tween(this.node).delay(this.delay).call(function(){e.script_GameManager.gameStart=!0}).start()},t.prototype.spawnBGAsset=function(e){for(var t=0;t<e;t++){var o=this.pool_Mountain.getObject(this.parent_Mountain);this.node_Mountains.push(o),o.setPosition(cc.v2(0+300*this.batch,1920*this.batch)),o.getComponent(l.default).init();var n=this.pool_Ray.getObject(this.parent_Ray);this.node_Ray.push(n),n.setPosition(cc.v2(0+300*this.batch,2300*this.batch)),n.getComponent(l.default).init();var r=this.pool_Web.getObject(this.parent_Web);this.node_Web.push(r),r.setPosition(cc.v2(0+300*this.batch,1920*this.batch)),r.getComponent(l.default).init(),this.batch++}},t.prototype.openConfig=function(){this.node_Config.active=!0},t.prototype.reloadScene=function(){cc.director.loadScene("GameScene")},t.prototype.openPowerupsScreen=function(){var e=this;this.node_Powerups.active=!0,cc.tween(this.node_PowerupBG).to(.1,{position:cc.v3(0,-250)}).call(function(){cc.tween(e.node_PowerupText).to(.2,{position:cc.v3(0,50)}).call(function(){for(var t=0;t<e.scripts_Powerups.length;t++)e.scripts_Powerups[t].rollForSkill();if(e.scripts_Powerups[0].code_PowerupType==e.scripts_Powerups[1].code_PowerupType)e.openPowerupsScreen();else for(t=0;t<e.scripts_Powerups.length;t++)e.scripts_Powerups[t].displayPowerups()}).start()}).start()},t.prototype.closePowerupsScreen=function(e){var t=this;switch(e){case 0:this.level_AttackSpeed++;break;case 1:this.level_AttackRange++;break;case 2:this.level_MovementSpeed++;break;case 3:this.amount_Shield++,this.script_Player.getComponent(s.default).shielded=!0,this.script_Player.getComponent(s.default).node_Shield.opacity=255,this.script_Player.getComponent(s.default).label_ShieldAmount.string=this.amount_Shield.toString()}this.sprite_PowerUp.spriteFrame=this.frame_Powerups[e],cc.tween(this.node).call(function(){for(var e=function(e){cc.tween(t.node_PowerupBG).to(.1,{position:cc.v3(0,2500)}).start(),cc.tween(t.node_PowerupText).to(.1,{position:cc.v3(0,2500)}).start(),cc.tween(t.scripts_Powerups[e].node).call(function(){t.scripts_Powerups[e].button_Confirm.interactable=!1}).to(.1,{position:cc.v3(t.scripts_Powerups[e].bool_Left?-800:800,-320)}).start()},o=0;o<t.scripts_Powerups.length;o++)e(o)}).delay(.2).call(function(){t.node_Powerups.active=!1,t.obtainPowerup(),t.script_Player.getComponent(s.default).nextWave()}).start()},t.prototype.obtainPowerup=function(){cc.tween(this.node_PowerupIcon).to(0,{opacity:255}).parallel(cc.tween().by(1,{position:cc.v2(0,50)}),cc.tween().to(1,{opacity:0})).by(0,{position:cc.v3(0,-50,0)}).start()},t.prototype.update=function(e){var t=this;(1==this.script_GameManager.gameStart&&1==this.script_Player.getComponent(s.default).isMoving&&1==this.hastitle&&(cc.tween(this.node).call(function(){cc.tween(t.node_TitleImage).by(.5,{position:cc.v3(0,1400)}).start(),cc.tween(t.node_TitleText).by(.5,{position:cc.v3(0,-1400)}).start()}).delay(.5).call(function(){t.node_TitleScreen.active=!1,t.script_PlatformController.removeObstacle(0)}).start(),this.hastitle=!1),this.node_Camera.position.y-this.initialPosition>this.mountainAndWebThreshold)&&(this.node_Mountains.shift().destroy(),this.node_Web.shift().destroy(),this.mountainAndWebThreshold=this.mountainAndWebThreshold+2e3);this.node_Camera.position.y-this.initialPosition>this.rayThreshold&&(this.node_Ray.shift().destroy(),this.rayThreshold=this.rayThreshold+2500)},r([f(i.default)],t.prototype,"script_GameManager",void 0),r([f(a.default)],t.prototype,"script_PlatformController",void 0),r([f(cc.Node)],t.prototype,"script_Player",void 0),r([f(cc.Node)],t.prototype,"node_Config",void 0),r([f(cc.Node)],t.prototype,"node_Camera",void 0),r([f(p.default)],t.prototype,"pool_Mountain",void 0),r([f(p.default)],t.prototype,"pool_Web",void 0),r([f(p.default)],t.prototype,"pool_Ray",void 0),r([f(cc.Node)],t.prototype,"parent_Mountain",void 0),r([f(cc.Node)],t.prototype,"parent_Web",void 0),r([f(cc.Node)],t.prototype,"parent_Ray",void 0),r([f(cc.Node)],t.prototype,"node_PowerupBG",void 0),r([f(cc.Node)],t.prototype,"node_PowerupText",void 0),r([f(cc.Node)],t.prototype,"node_PowerupIcon",void 0),r([f(cc.Sprite)],t.prototype,"sprite_PowerUp",void 0),r([f([cc.SpriteFrame])],t.prototype,"frame_Powerups",void 0),r([f(cc.Node)],t.prototype,"node_Powerups",void 0),r([f([c.default])],t.prototype,"scripts_Powerups",void 0),r([f(cc.Node)],t.prototype,"node_TitleScreen",void 0),r([f(cc.Node)],t.prototype,"node_TitleImage",void 0),r([f(cc.Node)],t.prototype,"node_TitleText",void 0),t=r([h],t)}(cc.Component);o.default=y,cc._RF.pop()},{"./GameManager":"GameManager","./PlatformController":"PlatformController","./Player":"Player","./Powerups":"Powerups","./PrefabAsset_Main":"PrefabAsset_Main","./_Common/PoolHelper":"PoolHelper","./_Config/Config":"Config"}],ISDKHandler:[function(e,t,o){"use strict";cc._RF.push(t,"cb03eL/2e1FtruTzSnsVhj8","ISDKHandler");var n=this&&this.__extends||function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(t,o)};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}();Object.defineProperty(o,"__esModule",{value:!0});var r=e("./SDKFunction"),i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.prototype.onLoad=function(){r.default.getInstance().setSDKHandler(this)},t.prototype.OnOpponentsReady=function(){console.log("OnOpponentsReady() not overridden")},t.prototype.OnSelfPlayerDataUpdated=function(e){console.log("OnSelfPlayerDataUpdated(playerData) not overridden")},t.prototype.OnOpponentUpdated=function(e){console.log("OnOpponentUpdated(opponent) not overridden")},t.prototype.OnOpponentScoreUpdated=function(e,t){console.log("OnOpponentScoreUpdated(opponentID, opponentScore:number) not overridden")},t.prototype.OnFinalScoreUpdated=function(){console.log("OnSelfPlayerDataUpdated() not overridden")},t.prototype.MP_Host_AssignNetworkedNodes=function(){return console.log("MP_Host_AssignNetworkedNode() not overridden"),[]},t.prototype.MP_Client_AssignNetworkNodes=function(e){console.log("MP_Client_AssignNetworkNodes() not overridden")},t.prototype.MP_Host_OnGameStart=function(){console.log("MP_Host_OnGameStart() not overridden")},t.prototype.MP_Client_OnGameStart=function(){console.log("MP_Client_OnGameStart() not overridden")},t.prototype.MP_OnInitializeNetworkedNode=function(e){return console.log("MP_OnInitializeNetworkedNode(prefabName:string) not overridden"),null},t}(cc.Component);o.default=i,cc._RF.pop()},{"./SDKFunction":"SDKFunction"}],IsometricMode:[function(e,t,o){"use strict";cc._RF.push(t,"6d84a6UJVREzYySI4kSqoge","IsometricMode");var n=this&&this.__extends||function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(t,o)};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),r=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var i=cc._decorator,a=i.ccclass,s=(i.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.prototype.cartesianToIsometric=function(e){return cc.v2(e.x-e.y,(e.x+e.y)/2)},t.prototype.isometricToCartesian=function(e){return cc.v2((2*e.y+e.x)/2,(2*e.y-e.x)/2)},t.prototype.getTileCoordinatesByNodePosition=function(e){return this.getTileCoordinates(this.isometricToCartesian(e))},t.prototype.getTileCoordinatesByNode=function(e){return this.getTileCoordinatesByNodePosition(e.position)},t.prototype.getTileCoordinates=function(e,t,o){return void 0===t&&(t=198),void 0===o&&(o=98),cc.v2(Math.floor(e.y/o),Math.floor(e.x/t*2))},t.prototype.getCoord=function(e,t,o){void 0===t&&(t=198),void 0===o&&(o=98);var n=this.cartesianToIsometric(e);return cc.v2(n.x,n.y)},t.prototype.getPositionByCoordinates=function(e,t,o,n){return this.cartesianToIsometric(cc.v2(n*e/2,o*t))},t.prototype.setTileAtCoordinates=function(e,t,o){e.setPosition(this.getPositionByCoordinates(e.width,e.height,t,o))},t=r([a],t)}(cc.Component));o.default=s,cc._RF.pop()},{}],Joystick:[function(e,t,o){"use strict";cc._RF.push(t,"a2da8H6z4pObqgU6tamKz2j","Joystick");var n=this&&this.__extends||function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(t,o)};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),r=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var i=cc._decorator,a=i.ccclass,s=i.property,c=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.playerMovement=null,t.joystickNode=null,t.joystickControlNode=null,t.gameControlArea=null,t.currentX=0,t.currentY=0,t}return n(t,e),t.prototype.assignInput=function(e){var t=this;this.playerMovement=e,this.gameControlArea.on(cc.Node.EventType.TOUCH_START,function(e){t.joystickNode.active=!0;var o=cc.v2(t.gameControlArea.convertToNodeSpaceAR(cc.Camera.main.getScreenToWorldPoint(e.getLocation())));t.joystickNode.setPosition(o)},this),this.gameControlArea.on(cc.Node.EventType.TOUCH_MOVE,function(e,o){t.playerMovement.isMoving=!0,0==t.playerMovement.isWalkingAnim&&(t.playerMovement.animation_Player.play("PlayerWalk"),t.playerMovement.isWalkingAnim=!0);var n=cc.v2(t.joystickNode.convertToNodeSpaceAR(cc.Camera.main.getScreenToWorldPoint(e.getLocation())));n.len()>t.joystickNode.width/2?t.joystickControlNode.setPosition(n.normalize().multiply(cc.v2(t.joystickNode.width/2,t.joystickNode.width/2))):t.joystickControlNode.setPosition(n),t.playerMovement.move(t.joystickControlNode.x/(t.joystickNode.width/2),t.joystickControlNode.y/(t.joystickNode.height/2))},this),this.gameControlArea.on(cc.Node.EventType.TOUCH_END,function(){t.stopMovement()},this),this.gameControlArea.on(cc.Node.EventType.TOUCH_CANCEL,function(){t.stopMovement()},this),cc.systemEvent.on(cc.SystemEvent.EventType.KEY_DOWN,this.onKeyDown,this),cc.systemEvent.on(cc.SystemEvent.EventType.KEY_UP,this.onKeyUp,this),this.enabled=!0},t.prototype.onKeyDown=function(e){switch(this.playerMovement.isMoving=!0,0==this.playerMovement.isWalkingAnim&&(this.playerMovement.animation_Player.play("PlayerWalk"),this.playerMovement.isWalkingAnim=!0),e.keyCode){case cc.macro.KEY.up:this.currentY=1;break;case cc.macro.KEY.down:this.currentY=-1;break;case cc.macro.KEY.left:this.currentX=-1;break;case cc.macro.KEY.right:this.currentX=1;break;case cc.macro.KEY.w:this.currentY=1;break;case cc.macro.KEY.a:this.currentX=-1;break;case cc.macro.KEY.s:this.currentY=-1;break;case cc.macro.KEY.d:this.currentX=1}this.playerMovement.move(this.currentX,this.currentY)},t.prototype.onKeyUp=function(e){switch(e.keyCode){case cc.macro.KEY.up:case cc.macro.KEY.down:this.currentY=0;break;case cc.macro.KEY.left:case cc.macro.KEY.right:this.currentX=0;break;case cc.macro.KEY.w:this.currentY=0;break;case cc.macro.KEY.a:this.currentX=0;break;case cc.macro.KEY.s:this.currentY=0;break;case cc.macro.KEY.d:this.currentX=0}this.playerMovement.move(this.currentX,this.currentY),0==this.currentX&&0==this.currentY&&(this.playerMovement.isWalkingAnim=!1,this.playerMovement.move(0,0),this.playerMovement.animation_Player.play("PlayerIdle"),1==this.playerMovement.isMoving&&(this.playerMovement.isMoving=!1))},t.prototype.stopMovement=function(){this.joystickNode.active&&(this.joystickNode.active=!1,this.joystickControlNode.setPosition(cc.Vec2.ZERO),this.playerMovement.isWalkingAnim=!1,this.playerMovement.move(0,0),this.playerMovement.animation_Player.play("PlayerIdle"),1==this.playerMovement.isMoving&&(this.playerMovement.isMoving=!1))},r([s(cc.Node)],t.prototype,"joystickNode",void 0),r([s(cc.Node)],t.prototype,"joystickControlNode",void 0),r([s(cc.Node)],t.prototype,"gameControlArea",void 0),t=r([a],t)}(cc.Component);o.default=c,cc._RF.pop()},{}],NetworkedNode:[function(e,t,o){"use strict";cc._RF.push(t,"4aaf5JQsdlOoLmgk0G+GAB8","NetworkedNode");var n=this&&this.__extends||function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(t,o)};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}();Object.defineProperty(o,"__esModule",{value:!0});var r=e("./SDKFunction"),i=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._minUpdateInterval=-1,t._timeSinceLastFrame=t._minUpdateInterval,t.syncedVariables=["networkedNodeID","ownerID"],t.previousWatchedVariableValues=new Map,t._lastUpdatedTimestamp=0,t._changeDetected=!1,t}return n(t,e),t.prototype.generateNetworkID=function(){this.networkedNodeID||(this.setNetworkID(this.generateUUID()),this.assignOwnerID(r.default.getInstance().getMyPlayerID()))},t.prototype.assignOwnerID=function(e){this.ownerID=e},t.prototype.setNetworkID=function(e){this.networkedNodeID=e,this.networkedNodeID&&this.networkedNodeID.trim().length>0&&r.default.getInstance().networkedNodes.set(this.networkedNodeID,this)},t.prototype.addSyncedVariables=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var o=0,n=e;o<n.length;o++){var r=n[o];this.syncedVariables.push(r)}},t.prototype.convertToData=function(){var e={};e[r.default.getInstance().prefabNameKey]=this.node.name;for(var t=0,o=this.syncedVariables;t<o.length;t++){var n=o[t];e[n]=this.getNodeValue(n),this.previousWatchedVariableValues.has(n)&&this.previousWatchedVariableValues.get(n)==e[n]||(this.previousWatchedVariableValues.set(n,e[n]),this._changeDetected=!0)}return e},t.prototype.updateData=function(){var e=this.convertToData();this._changeDetected&&(this._changeDetected=!1,r.default.getInstance().sendMessage(e,r.default.getInstance().MP_UPDATE_NODE))},t.prototype.reassignNodeOwner=function(e){if(this.ownerID!=e&&r.default.getInstance().getMyPlayerID()==this.ownerID||r.default.getInstance().isHost()){this.ownerID=e;var t=this.convertToData();t[r.default.getInstance().newOwnerIDKey]=e,r.default.getInstance().sendMessage(t,r.default.getInstance().MP_REASSIGN_NODE_OWNER)}},t.prototype.updateFromData=function(e){var t=e[r.default.getInstance().timestampKey];this._lastUpdatedTimestamp<t&&(this._lastUpdatedTimestamp=t,this.onDataReceivedImpl(e))},t.prototype.getNodeValue=function(e,t){return void 0===t&&(t=this),e.includes(".")?this.getNodeValue(e.substr(e.indexOf(".")+1),t[e.substr(0,e.indexOf("."))]):t[e]},t.prototype.generateUUID=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=16*Math.random()|0;return("x"==e?t:3&t|8).toString(16)})},t.prototype.isSelfOwnNode=function(){return!!this.ownerID&&this.ownerID==r.default.getInstance().getMyPlayerID()},t.prototype.update=function(e){this._minUpdateInterval>=0&&this.isSelfOwnNode()&&(this._timeSinceLastFrame-=e,this._timeSinceLastFrame<0&&(this._timeSinceLastFrame=this._minUpdateInterval,this.updateData()))},t.prototype.onDestroy=function(){r.default.getInstance().removeNetworkedNode(this.networkedNodeID),this.setNetworkID(null),this.assignOwnerID(null)},t}(cc.Component);o.default=i,cc._RF.pop()},{"./SDKFunction":"SDKFunction"}],NodeHelper:[function(e,t,o){"use strict";cc._RF.push(t,"59b8cCF1GRF4bT+PCqyT84M","NodeHelper"),Object.defineProperty(o,"__esModule",{value:!0});var n=function(){function e(){}return e.copyWorldPosition=function(t,o,n,r,i){var a=t.parent,s=o.parent.convertToWorldSpaceAR(o.position),c=a.convertToNodeSpaceAR(s);if(t.setPosition(c),n){var l=e.getGlobalScale(a),p=e.getGlobalScale(o);t.scale=p/l}if(r){var d=e.getGlobalRotation(a),u=e.getGlobalRotation(o);t.angle=u-d}i&&t.setAnchorPoint(o.getAnchorPoint())},e.setParentWorldPosStays=function(t,o,n,r){var i=t.parent,a=i.convertToWorldSpaceAR(t.position);if(t.parent=o,t.position=o.convertToNodeSpaceAR(a),n){var s=e.getGlobalScale(i),c=e.getGlobalScale(o);Math.abs(s-c)>Number.EPSILON&&(t.scale=t.scale*s/c)}if(r){var l=e.getGlobalRotation(i),p=e.getGlobalRotation(o);Math.abs(l-p)>Number.EPSILON&&(t.angle=t.angle+l-p)}},e.getGlobalScale=function(e){for(var t=1,o=e;o;)t*=o.scale,o=o.parent;return t},e.getGlobalRotation=function(e){for(var t=e.angle,o=e.parent;o;)t+=o.angle,o=o.parent;return t},e}();o.default=n,cc._RF.pop()},{}],PlatformController:[function(e,t,o){"use strict";cc._RF.push(t,"b177dcBYjBEiIZKh3ObG4Cf","PlatformController");var n=this&&this.__extends||function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(t,o)};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),r=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var i=e("./AudioController"),a=e("./Tile"),s=e("./_Common/IsometricMode"),c=e("./_Common/PoolHelper"),l=e("./_Common/Utils"),p=e("./_Config/Config"),d=cc._decorator,u=d.ccclass,h=d.property,f=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.script_IsometricMode=null,t.script_TilePool=null,t.script_AudioController=null,t.batch=0,t.obstacleTile=[],t.tileList=[],t.node_TileParent=null,t.tileSizeX=182,t.tileSizeY=140,t.startX=0,t.startY=0,t.currentX=0,t.currentY=0,t.previousX=-1,t.lastTileCoorX=0,t.lastTileCoorY=0,t.begin=!0,t.currentDirectionUpLeft=!0,t.currentCheckpoint=0,t}return n(t,e),t.prototype.start=function(){this.spawnTopDownPlatform(10)},t.prototype.spawnTopDownPlatform=function(e){for(var t=0;t<e;t++){var o=l.default.random(p.default.getInstance().minRow,p.default.getInstance().maxRow),n=l.default.random(p.default.getInstance().minColumn,p.default.getInstance().maxColumn),r=0;r=this.previousX>1?l.default.random(0,this.previousX):0,this.startX=this.lastTileCoorX-r,this.startY=this.lastTileCoorY,0==this.begin&&this.startY++,this.currentX=this.startX,this.currentY=this.startY;for(var i=0;i<o;i++){this.currentCheckpoint>=5?(this.batch++,this.currentCheckpoint=0):this.currentCheckpoint++;for(var s=l.default.random(0,n-1),c=0;c<n;c++){var d=this.script_TilePool.getObject(this.node_TileParent);this.currentCheckpoint>=5?(c==s?d.getComponent(a.default).init(!0,this,this.batch,!0,this.script_AudioController):d.getComponent(a.default).init(!0,this,this.batch,!1,this.script_AudioController),this.obstacleTile.push(d)):d.getComponent(a.default).init(!1,this,this.batch,!1,this.script_AudioController),d.setSiblingIndex(0),d.setPosition(cc.v2(this.currentX*this.tileSizeX,this.currentY*this.tileSizeY)),this.lastTileCoorX=this.currentX,this.lastTileCoorY=this.currentY,this.tileList[this.currentY]||(this.tileList[this.currentY]=[]),this.tileList[this.currentY][this.currentX]=d,this.currentX++}this.currentY++,this.currentX=this.startX}this.previousX=n-1,1==this.begin&&(this.begin=!1)}},t.prototype.tileWithName=function(e,t){var o=Math.round(e/this.tileSizeX),n=Math.round(t/this.tileSizeY);return this.tileList[n]&&this.tileList[n][o]&&"Tile"==this.tileList[n][o].name},t.prototype.validTile=function(e,t){var o=Math.round(e/this.tileSizeX),n=Math.round(t/this.tileSizeY);return this.tileList[n][o].getComponent(a.default).node_StandPoint},t.prototype.removeRowTile=function(e){var t=Math.round(e/this.tileSizeY)-10;null!=this.tileList[t]&&(this.tileList[t].forEach(function(e){e.destroy()}),this.tileList[t]=null)},t.prototype.removeObstacle=function(e){this.script_AudioController.playRockBreak();for(var t=0;t<this.obstacleTile.length;t++)this.obstacleTile[t].getComponent(a.default).batch==e&&this.obstacleTile[t].getComponent(a.default).removeObstacle()},r([h(s.default)],t.prototype,"script_IsometricMode",void 0),r([h(c.default)],t.prototype,"script_TilePool",void 0),r([h(i.default)],t.prototype,"script_AudioController",void 0),r([h(cc.Node)],t.prototype,"node_TileParent",void 0),t=r([u],t)}(cc.Component);o.default=f,cc._RF.pop()},{"./AudioController":"AudioController","./Tile":"Tile","./_Common/IsometricMode":"IsometricMode","./_Common/PoolHelper":"PoolHelper","./_Common/Utils":"Utils","./_Config/Config":"Config"}],Player:[function(e,t,o){"use strict";cc._RF.push(t,"3931bJrCQtHB4egNwXC4oeM","Player");var n=this&&this.__extends||function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(t,o)};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),r=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var i=e("./Arrow"),a=e("./AudioController"),s=e("./CameraFollow"),c=e("./EnemyController"),l=e("./GameManager"),p=e("./GameSceneController"),d=e("./Joystick"),u=e("./PlatformController"),h=e("./ScoreController"),f=e("./_Common/NodeHelper"),y=e("./_Common/PoolHelper"),_=e("./_Config/Config"),m=cc._decorator,g=m.ccclass,v=m.property,P=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.script_GameManager=null,t.script_Camera=null,t.script_BulletPool=null,t.script_PlatformController=null,t.script_EnemyController=null,t.script_Joystick=null,t.script_ScoreController=null,t.script_AudioController=null,t.script_GameSceneController=null,t.node_ArrowSpawner=null,t.node_ArrowPlaceholder=null,t.node_PlayerSprite=null,t.animation_Player=null,t.node_Shield=null,t.label_ShieldAmount=null,t.shielded=!1,t.isMoving=!1,t.isWalkingAnim=!1,t.target=null,t.playerDead=!1,t.playerInvincible=!1,t.fireRate=0,t.lastValidTile=null,t.time=0,t.currentX=0,t.shooting=!1,t.topEmpty=!1,t.bottomEmpty=!1,t.leftEmpty=!1,t.rightEmpty=!1,t.atBorder=!1,t.moveX=0,t.moveY=0,t}return n(t,e),t.prototype.start=function(){this.script_Joystick.assignInput(this),this.shootEnemy()},t.prototype.onCollisionEnter=function(e,t){0==this.script_GameManager.timeup&&"Enemy"==e.node.group&&0==this.playerInvincible&&this.gotHit()},t.prototype.move=function(e,t){var o=_.default.getInstance().playerSpeed+_.default.getInstance().playerSpeedIncrement*(this.script_GameSceneController.getComponent(p.default).level_MovementSpeed-1);this.currentX=e,this.moveX=e,this.moveY=t,0==this.script_GameManager.timeup?0==this.playerDead?1==this.isMoving&&(1==this.atBorder&&(1==this.leftEmpty&&e<0&&(this.moveX=0),1==this.rightEmpty&&e>0&&(this.moveX=0),1==this.topEmpty&&t>0&&(this.moveY=0),1==this.bottomEmpty&&t<0&&(this.moveY=0)),this.node.getComponent(cc.RigidBody).linearVelocity=cc.v2(this.moveX*o,this.moveY*o)):this.node.getComponent(cc.RigidBody).linearVelocity=cc.v2(0,0):(this.node.getComponent(cc.RigidBody).linearVelocity=cc.v2(0,0),this.animation_Player.play("PlayerIdle"))},t.prototype.gotHit=function(){this.script_AudioController.playPlayerHit(this.shielded),0==this.shielded?(this.script_ScoreController.addScore(-1),this.invincible()):(this.script_GameSceneController.getComponent(p.default).amount_Shield--,this.script_GameSceneController.getComponent(p.default).amount_Shield<=0?(this.shielded=!1,this.invincible(),cc.tween(this.node_Shield).parallel(cc.tween().by(.05,{position:cc.v3(-10,0)}).by(.05,{position:cc.v3(20,0)}).by(.05,{position:cc.v3(-20,0)}).by(.05,{position:cc.v3(20,0)}).by(.05,{position:cc.v3(-20,0)}).by(.05,{position:cc.v3(20,0)}).by(.05,{position:cc.v3(-10,0)}),cc.tween().to(.35,{opacity:0})).start()):(this.label_ShieldAmount.string=this.script_GameSceneController.getComponent(p.default).amount_Shield.toString(),cc.tween(this.node_Shield).by(.05,{position:cc.v3(-10,0)}).by(.05,{position:cc.v3(20,0)}).by(.05,{position:cc.v3(-20,0)}).by(.05,{position:cc.v3(20,0)}).by(.05,{position:cc.v3(-20,0)}).by(.05,{position:cc.v3(20,0)}).by(.05,{position:cc.v3(-10,0)}).start()))},t.prototype.die=function(){var e=this;this.animation_Player.stop(),this.move(0,0),this.playerDead=!0,this.script_Camera.shouldFollowTarget=!1,this.script_ScoreController.addScore(-1),cc.tween(this.node_PlayerSprite).parallel(cc.tween().to(.5,{scale:0}),cc.tween().by(.5,{position:cc.v2(0,-100)})).call(function(){e.respawn()}).start()},t.prototype.respawn=function(){var e=this;cc.tween(this.node_PlayerSprite).delay(.5).parallel(cc.tween().to(0,{scale:1}),cc.tween().to(0,{position:cc.v2(0,0)})).call(function(){f.default.copyWorldPosition(e.node,e.lastValidTile),e.playerDead=!1,e.script_Camera.shouldFollowTarget=!0,e.animation_Player.play("PlayerIdle"),e.invincible()}).start()},t.prototype.invincible=function(){var e=this;this.time=_.default.getInstance().playerInvincibleTime/12,this.playerInvincible=!0,cc.tween(this.node_PlayerSprite).to(this.time,{opacity:100}).to(this.time,{opacity:255}).to(this.time,{opacity:100}).to(this.time,{opacity:255}).to(this.time,{opacity:100}).to(this.time,{opacity:255}).to(this.time,{opacity:100}).to(this.time,{opacity:255}).to(this.time,{opacity:100}).to(this.time,{opacity:255}).to(this.time,{opacity:100}).to(this.time,{opacity:255}).call(function(){e.playerInvincible=!1}).start()},t.prototype.shootEnemy=function(){var e=this;this.fireRate=_.default.getInstance().fireRate-_.default.getInstance().fireRatedecrement*(this.script_GameSceneController.getComponent(p.default).level_AttackSpeed-1),0==this.script_GameManager.timeup?cc.tween(this.node).call(function(){if(0==e.playerDead&&0==e.isMoving&&0!=e.script_EnemyController.node_EnemiesPresent.length){e.target=e.script_EnemyController.node_EnemiesPresent[e.script_EnemyController.node_EnemiesPresent.length-1];var t=e.node.getPosition(),o=e.target.getPosition(),n=t.x-o.x,r=t.y-o.y,a=cc.v2(n,r),s=a.mag(),c=a.signAngle(cc.v2(1,0)),l=Math.floor(cc.misc.radiansToDegrees(c));if(s<=_.default.getInstance().distantBetweenPlayerAndEnemy+_.default.getInstance().attackRangeIncrement*(e.script_GameSceneController.getComponent(p.default).level_AttackRange-1)){e.shooting=!0,e.node_ArrowSpawner.angle=180-l;var d=e.script_BulletPool.getObject(e.node_ArrowSpawner);f.default.setParentWorldPosStays(d,e.node_ArrowPlaceholder,!0,!0),d.getComponent(i.default).init(e.target,a,e.script_GameSceneController.getComponent(p.default)),e.animation_Player.play("PlayerAttack"),e.script_AudioController.playShootArrow()}else e.shooting=!1,e.animation_Player.play("PlayerIdle")}}).delay(this.fireRate).call(function(){e.shootEnemy()}).start():this.animation_Player.play("PlayerIdle")},t.prototype.getChest=function(){this.script_GameSceneController.getComponent(p.default).openPowerupsScreen()},t.prototype.nextWave=function(){this.script_EnemyController.spawnEnemy(),this.script_PlatformController.spawnTopDownPlatform(2),this.script_GameSceneController.getComponent(p.default).spawnBGAsset(1)},t.prototype.update=function(e){var t=this.node.getPosition();if(0==this.isMoving&&1==this.shooting?this.node_ArrowSpawner.angle>90&&this.node_ArrowSpawner.angle<270?this.node_PlayerSprite.scaleX=-1:this.node_PlayerSprite.scaleX=1:this.currentX>0?this.node_PlayerSprite.scaleX=1:this.currentX<0&&(this.node_PlayerSprite.scaleX=-1),this.script_PlatformController.removeRowTile(t.y),null==this.script_PlatformController.tileWithName(t.x-50,t.y-140)?this.leftEmpty=!0:this.leftEmpty=!1,null==this.script_PlatformController.tileWithName(t.x+50,t.y-140)?this.rightEmpty=!0:this.rightEmpty=!1,null==this.script_PlatformController.tileWithName(t.x,t.y-140+50)?this.topEmpty=!0:this.topEmpty=!1,null==this.script_PlatformController.tileWithName(t.x,t.y-140-50)?this.bottomEmpty=!0:this.bottomEmpty=!1,null==this.script_PlatformController.tileWithName(t.x,t.y-140-10)||null==this.script_PlatformController.tileWithName(t.x,t.y-140+10)||null==this.script_PlatformController.tileWithName(t.x-10,t.y-140-50)||null==this.script_PlatformController.tileWithName(t.x+10,t.y-140-50)){if(0==this.playerDead&&(this.atBorder=!0,1==this.atBorder)){1==this.leftEmpty&&this.moveX<0&&(this.moveX=0),1==this.rightEmpty&&this.moveX>0&&(this.moveX=0),1==this.topEmpty&&this.moveY>0&&(this.moveY=0),1==this.bottomEmpty&&this.moveY<0&&(this.moveY=0);var o=_.default.getInstance().playerSpeed+_.default.getInstance().playerSpeedIncrement*(this.script_GameSceneController.getComponent(p.default).level_MovementSpeed-1);this.node.getComponent(cc.RigidBody).linearVelocity=cc.v2(this.moveX*o,this.moveY*o)}}else this.atBorder=!1,this.lastValidTile=this.script_PlatformController.validTile(t.x,t.y-140)},r([v(l.default)],t.prototype,"script_GameManager",void 0),r([v(s.default)],t.prototype,"script_Camera",void 0),r([v(y.default)],t.prototype,"script_BulletPool",void 0),r([v(u.default)],t.prototype,"script_PlatformController",void 0),r([v(c.default)],t.prototype,"script_EnemyController",void 0),r([v(d.default)],t.prototype,"script_Joystick",void 0),r([v(h.default)],t.prototype,"script_ScoreController",void 0),r([v(a.default)],t.prototype,"script_AudioController",void 0),r([v(cc.Node)],t.prototype,"script_GameSceneController",void 0),r([v(cc.Node)],t.prototype,"node_ArrowSpawner",void 0),r([v(cc.Node)],t.prototype,"node_ArrowPlaceholder",void 0),r([v(cc.Node)],t.prototype,"node_PlayerSprite",void 0),r([v(cc.Animation)],t.prototype,"animation_Player",void 0),r([v(cc.Node)],t.prototype,"node_Shield",void 0),r([v(cc.Label)],t.prototype,"label_ShieldAmount",void 0),t=r([g],t)}(cc.Component);o.default=P,cc._RF.pop()},{"./Arrow":"Arrow","./AudioController":"AudioController","./CameraFollow":"CameraFollow","./EnemyController":"EnemyController","./GameManager":"GameManager","./GameSceneController":"GameSceneController","./Joystick":"Joystick","./PlatformController":"PlatformController","./ScoreController":"ScoreController","./_Common/NodeHelper":"NodeHelper","./_Common/PoolHelper":"PoolHelper","./_Config/Config":"Config"}],PoolHelper:[function(e,t,o){"use strict";cc._RF.push(t,"9e940X4xHdKfI9nqXfmbMox","PoolHelper");var n=this&&this.__extends||function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(t,o)};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),r=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var i=e("./Poolable"),a=cc._decorator,s=a.ccclass,c=a.property,l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.pool=new cc.NodePool,t.initialCount=0,t.pooledPrefab=null,t}return n(t,e),t.prototype.start=function(){if(this.pooledPrefab)for(var e=0;e<this.initialCount;e++){var t=this.generateObject();this.pool.put(t)}},t.prototype.generateObject=function(){var e=cc.instantiate(this.pooledPrefab),t=e.getComponent(i.default);return t&&t.setPool(this),e},t.prototype.getObject=function(e){void 0===e&&(e=null);var t=null;return t=this.pool.size()>0?this.pool.get():this.generateObject(),e&&(t.parent=e),t},t.prototype.returnObject=function(e){this.pool.put(e)},r([c(cc.Integer)],t.prototype,"initialCount",void 0),r([c(cc.Prefab)],t.prototype,"pooledPrefab",void 0),t=r([s],t)}(cc.Component);o.default=l,cc._RF.pop()},{"./Poolable":"Poolable"}],Poolable:[function(e,t,o){"use strict";cc._RF.push(t,"1187b1d+wNEKpX1HpqrTOc0","Poolable");var n=this&&this.__extends||function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(t,o)};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),r=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var i=cc._decorator,a=i.ccclass,s=(i.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.pool=null,t}return n(t,e),t.prototype.onLoad=function(){var e=this;this.node.destroy=function(){return e.pool?e.returnToPool():e.node.active=!1,!0}},t.prototype.setPool=function(e){this.pool=e},t.prototype.returnToPool=function(){this.pool&&this.pool.returnObject(this.node)},t=r([a],t)}(cc.Component));o.default=s,cc._RF.pop()},{}],Powerups:[function(e,t,o){"use strict";cc._RF.push(t,"ff989SmoTZIuqiolPP74Puo","Powerups");var n=this&&this.__extends||function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(t,o)};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),r=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var i=e("./AudioController"),a=e("./GameSceneController"),s=e("./_Common/Utils"),c=cc._decorator,l=c.ccclass,p=c.property,d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.script_GameSceneController=null,t.script_AudioController=null,t.node_Light=null,t.bool_Left=!1,t.node_box=null,t.button_Confirm=null,t.sprite_SkillImage=null,t.sprite_SkillText=null,t.label_InitialLevel=null,t.label_ImprovedLevel=null,t.frame_SkillImage=[],t.frame_SkillText=[],t.code_PowerupType=0,t}return n(t,e),t.prototype.onLoad=function(){var e=this;this.button_Confirm.node.on(cc.Node.EventType.TOUCH_START,function(){cc.tween(e.sprite_SkillImage.node).to(.1,{scale:1.2}).start()},this),this.button_Confirm.node.on(cc.Node.EventType.TOUCH_END,function(){cc.tween(e.sprite_SkillImage.node).to(.1,{scale:1}).start()},this),this.button_Confirm.node.on(cc.Node.EventType.TOUCH_CANCEL,function(){cc.tween(e.sprite_SkillImage.node).to(.1,{scale:1}).start()},this)},t.prototype.rollForSkill=function(){this.code_PowerupType=s.default.random(0,3)},t.prototype.displayPowerups=function(){var e=this;switch(this.node_Light.active=!1,this.sprite_SkillImage.spriteFrame=this.frame_SkillImage[this.code_PowerupType],this.sprite_SkillText.spriteFrame=this.frame_SkillText[this.code_PowerupType],this.code_PowerupType){case 0:this.label_InitialLevel.string=this.script_GameSceneController.getComponent(a.default).level_AttackSpeed.toString(),this.label_ImprovedLevel.string=(this.script_GameSceneController.getComponent(a.default).level_AttackSpeed+1).toString();break;case 1:this.label_InitialLevel.string=this.script_GameSceneController.getComponent(a.default).level_AttackRange.toString(),this.label_ImprovedLevel.string=(this.script_GameSceneController.getComponent(a.default).level_AttackRange+1).toString();break;case 2:this.label_InitialLevel.string=this.script_GameSceneController.getComponent(a.default).level_MovementSpeed.toString(),this.label_ImprovedLevel.string=(this.script_GameSceneController.getComponent(a.default).level_MovementSpeed+1).toString();break;case 3:this.label_InitialLevel.string=this.script_GameSceneController.getComponent(a.default).amount_Shield.toString(),this.label_ImprovedLevel.string=(this.script_GameSceneController.getComponent(a.default).amount_Shield+1).toString()}cc.tween(this.node).to(.1,{position:cc.v3(this.bool_Left?-260:260,-320)}).call(function(){e.button_Confirm.interactable=!0}).start()},t.prototype.selectPowerup=function(){cc.sys.os!=cc.sys.OS_ANDROID&&cc.sys.os!=cc.sys.OS_IOS||(this.node_Light.active=!0),this.script_AudioController.playPowerUp(),this.script_GameSceneController.getComponent(a.default).closePowerupsScreen(this.code_PowerupType)},r([p(cc.Node)],t.prototype,"script_GameSceneController",void 0),r([p(i.default)],t.prototype,"script_AudioController",void 0),r([p(cc.Node)],t.prototype,"node_Light",void 0),r([p(cc.Boolean)],t.prototype,"bool_Left",void 0),r([p(cc.Node)],t.prototype,"node_box",void 0),r([p(cc.Button)],t.prototype,"button_Confirm",void 0),r([p(cc.Sprite)],t.prototype,"sprite_SkillImage",void 0),r([p(cc.Sprite)],t.prototype,"sprite_SkillText",void 0),r([p(cc.Label)],t.prototype,"label_InitialLevel",void 0),r([p(cc.Label)],t.prototype,"label_ImprovedLevel",void 0),r([p([cc.SpriteFrame])],t.prototype,"frame_SkillImage",void 0),r([p([cc.SpriteFrame])],t.prototype,"frame_SkillText",void 0),t=r([l],t)}(cc.Component);o.default=d,cc._RF.pop()},{"./AudioController":"AudioController","./GameSceneController":"GameSceneController","./_Common/Utils":"Utils"}],PrefabAsset_Main:[function(e,t,o){"use strict";cc._RF.push(t,"a372bVZvktBEKzsefuFgQZc","PrefabAsset_Main");var n=this&&this.__extends||function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(t,o)};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),r=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var i=e("./PrefabAssets"),a=e("./_Common/Poolable"),s=cc._decorator,c=s.ccclass,l=s.property,p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.node_ChildrenAsset=[],t}return n(t,e),t.prototype.init=function(){for(var e=0;e<this.node_ChildrenAsset.length;e++)this.node_ChildrenAsset[e].getComponent(i.default).init()},r([l([cc.Node])],t.prototype,"node_ChildrenAsset",void 0),t=r([c],t)}(a.default);o.default=p,cc._RF.pop()},{"./PrefabAssets":"PrefabAssets","./_Common/Poolable":"Poolable"}],PrefabAssets:[function(e,t,o){"use strict";cc._RF.push(t,"da4a6hQNJJIOLV0MXxtD154","PrefabAssets");var n=this&&this.__extends||function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(t,o)};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),r=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0}),o.AssetType=void 0;var i,a=e("./_Common/Utils"),s=e("./_Config/Config"),c=cc._decorator,l=c.ccclass,p=c.property;(function(e){e[e.Mountain=0]="Mountain",e[e.Ray=1]="Ray",e[e.Web=2]="Web"})(i=o.AssetType||(o.AssetType={}));var d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type_Asset=i.Mountain,t.node_ListOfAssets=[],t.node_AlternativePlacement_1=[],t.node_AlternativePlacement_2=[],t.spawnRate=0,t}return n(t,e),t.prototype.init=function(){var e=0,t=0;switch(this.type_Asset){case i.Mountain:this.spawnRate=s.default.getInstance().asset_MountainSpawnRate;for(var o=0;o<this.node_ListOfAssets.length;o++)if(e=a.default.random(1,10),t=a.default.random(1,2),this.node_ListOfAssets[o].active=e<=this.spawnRate,1==this.node_ListOfAssets[o].active)switch(t){case 1:this.node_ListOfAssets[o].position=this.node_AlternativePlacement_1[o].position;break;case 2:this.node_ListOfAssets[o].position=this.node_AlternativePlacement_2[o].position}break;case i.Ray:this.spawnRate=s.default.getInstance().asset_RaySpawnRate,e=a.default.random(1,10),this.node.active=e<=this.spawnRate;break;case i.Web:this.spawnRate=s.default.getInstance().asset_WebSpawnRate,e=a.default.random(1,10),this.node.active=e<=this.spawnRate}},r([p({type:cc.Enum(i)})],t.prototype,"type_Asset",void 0),r([p([cc.Node])],t.prototype,"node_ListOfAssets",void 0),r([p([cc.Node])],t.prototype,"node_AlternativePlacement_1",void 0),r([p([cc.Node])],t.prototype,"node_AlternativePlacement_2",void 0),t=r([l],t)}(cc.Component);o.default=d,cc._RF.pop()},{"./_Common/Utils":"Utils","./_Config/Config":"Config"}],SDKFunction:[function(e,t,o){"use strict";cc._RF.push(t,"a6cf5SoihFJ84m1Yd8hXptr","SDKFunction");var n=this&&this.__extends||function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(t,o)};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}();Object.defineProperty(o,"__esModule",{value:!0});var r=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.getInstance=function(){return null==this.instance&&(this.instance=new t(!1)),this.instance},t.prototype.onEvent=function(e,t,o){console.log("Unknown event",e,t)},t}(e("./AbstractSDK").default);o.default=r,cc._RF.pop()},{"./AbstractSDK":"AbstractSDK"}],ScoreController:[function(e,t,o){"use strict";cc._RF.push(t,"f8ebbfoZpJOd6jJTOeQJbnm","ScoreController");var n=this&&this.__extends||function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(t,o)};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),r=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var i=e("../SDK/SDKFunction"),a=e("./GameManager"),s=cc._decorator,c=s.ccclass,l=s.property,p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.script_GameManager=null,t.label_Score=null,t.label_Combo=null,t.number_Combo=0,t.number_Score=0,t.showingCombo=!1,t.animation_Combo=null,t}return n(t,e),t.prototype.addScore=function(e){var t=this;0==this.script_GameManager.getComponent(a.default).timeup&&(e>0?(this.number_Combo++,this.label_Combo.string=this.number_Combo.toString(),this.number_Score=this.number_Score+this.number_Combo,this.script_GameManager.getComponent(a.default).selfScoreLabel.string=this.number_Score.toString(),i.default.getInstance().sendCurrentScore(this.number_Score),this.showCombo(),cc.tween(this.label_Score.node).call(function(){t.label_Score.node.color=cc.Color.GREEN,t.label_Score.string="+"+t.number_Combo}).to(0,{position:cc.v3(85,90,0)}).to(0,{opacity:255}).parallel(cc.tween().to(.5,{position:cc.v2(85,140)}),cc.tween().to(.5,{opacity:0})).to(0,{position:cc.v3(85,90,0)}).start()):(this.number_Combo=0,this.number_Score=this.number_Score-1,this.number_Score<=0&&(this.number_Score=0),this.script_GameManager.getComponent(a.default).selfScoreLabel.string=this.number_Score.toString(),i.default.getInstance().sendCurrentScore(this.number_Score),cc.tween(this.label_Score.node).call(function(){t.label_Score.node.color=cc.Color.RED,t.label_Score.string="-1"}).to(0,{opacity:255}).parallel(cc.tween().by(.5,{position:cc.v2(0,50)}),cc.tween().to(.5,{opacity:0})).by(0,{position:cc.v3(0,-50,0)}).start(),this.keepCombo()))},t.prototype.showCombo=function(){this.animation_Combo.play("ShowCombo"),this.showingCombo=!0,cc.tween(this.label_Combo.node).to(.29,{scale:1}).start()},t.prototype.keepCombo=function(){1==this.showingCombo&&(this.animation_Combo.play("KeepCombo"),cc.tween(this.label_Combo.node).to(.29,{scale:0}).start())},r([l(cc.Node)],t.prototype,"script_GameManager",void 0),r([l(cc.Label)],t.prototype,"label_Score",void 0),r([l(cc.Label)],t.prototype,"label_Combo",void 0),r([l(cc.Animation)],t.prototype,"animation_Combo",void 0),t=r([c],t)}(cc.Component);o.default=p,cc._RF.pop()},{"../SDK/SDKFunction":"SDKFunction","./GameManager":"GameManager"}],Tile:[function(e,t,o){"use strict";cc._RF.push(t,"fa64f+cOBdJV4/qGBGO3A1X","Tile");var n=this&&this.__extends||function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(t,o)};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),r=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var i=e("./_Common/Poolable"),a=e("./_Common/Utils"),s=cc._decorator,c=s.ccclass,l=s.property,p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.script_PlatformController=null,t.script_AudioController=null,t.sprite_Tile=null,t.sprite_TileType=[],t.node_Obstacle=null,t.animation_Rock=null,t.node_Chest=null,t.node_ChestLid=null,t.node_StandPoint=null,t.batch=0,t}return n(t,e),t.prototype.init=function(e,t,o,n,r){this.node_Obstacle.active=this.node_Chest.active=!1,this.script_PlatformController=t,this.script_AudioController=r,this.batch=o;var i=a.default.random(1,10);this.sprite_Tile.spriteFrame=1==i?this.sprite_TileType[0]:i>1&&i<=4?this.sprite_TileType[1]:this.sprite_TileType[2],1==e&&(1==n?(this.node_Chest.active=!0,this.node_Chest.getComponent(cc.BoxCollider).enabled=!1,this.node_ChestLid.y=10,this.node_Chest.opacity=255):(this.animation_Rock.stop("BoulderDestroy"),this.node_Obstacle.active=!0,this.node_Obstacle.opacity=255),this.getComponent(cc.PhysicsBoxCollider).enabled=!0)},t.prototype.removeObstacle=function(){var e=this;this.animation_Rock.play("BoulderDestroy"),cc.tween(this.node_Obstacle).to(.5,{opacity:0}).call(function(){e.getComponent(cc.PhysicsBoxCollider).enabled=!1}).start(),1==this.node_Chest.active&&(this.script_AudioController.playOpenChest(),cc.tween(this.node_ChestLid).to(.5,{position:cc.v3(0,50)}).call(function(){e.getComponent(cc.PhysicsBoxCollider).enabled=!1,e.node_Chest.getComponent(cc.BoxCollider).enabled=!0}).start())},r([l(cc.Sprite)],t.prototype,"sprite_Tile",void 0),r([l([cc.SpriteFrame])],t.prototype,"sprite_TileType",void 0),r([l(cc.Node)],t.prototype,"node_Obstacle",void 0),r([l(cc.Animation)],t.prototype,"animation_Rock",void 0),r([l(cc.Node)],t.prototype,"node_Chest",void 0),r([l(cc.Node)],t.prototype,"node_ChestLid",void 0),r([l(cc.Node)],t.prototype,"node_StandPoint",void 0),t=r([c],t)}(i.default);o.default=p,cc._RF.pop()},{"./_Common/Poolable":"Poolable","./_Common/Utils":"Utils"}],Utils:[function(e,t,o){"use strict";cc._RF.push(t,"7fd38UhdttFBpAC8fnD44Pf","Utils");var n=this&&this.__extends||function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(t,o)};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),r=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var i=cc._decorator,a=i.ccclass,s=(i.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.getWorldPosition=function(e,t,o){if(void 0===t&&(t=this.LEFT),void 0===o&&(o=this.BOTTOM),e){var n=cc.mat4(),r=new cc.Vec3;e.getWorldMatrix(n).getTranslation(r);var i=r.x-e.width*e.anchorX,a=r.y-e.height*e.anchorY;return t==this.RIGHT?i+=e.width:t==this.CENTER&&(i+=e.width/2),o==this.TOP?a+=e.height:t==this.CENTER&&(a+=e.height/2),cc.v2(i,a)}},t.getPosition=function(e,t,o){void 0===t&&(t=this.LEFT),void 0===o&&(o=this.BOTTOM);var n=e.x-e.width*e.anchorX,r=e.y-e.height*e.anchorY;return t==this.RIGHT?n+=e.width:t==this.CENTER&&(n+=e.width/2),o==this.TOP?r+=e.height:t==this.CENTER&&(r+=e.height/2),cc.v2(n,r)},t.removeFromArray=function(e,t){var o=e.indexOf(t);o>-1&&e.splice(o,1)},t.clearArray=function(e){e.length=0},t.random=function(e,t){return Math.floor(Math.random()*(t-e+1)+e)},t.randomSign=function(){return this.random(0,10)>5?1:-1},t.shuffle=function(e){for(var t,o=e.length-1;o>0;o--){var n=Math.floor(Math.random()*(o+1));t=[e[n],e[o]],e[o]=t[0],e[n]=t[1]}},t.setMaxSize=function(e,t,o){var n=1;e.width>t&&(n=t/e.width),e.height>o&&(n=Math.min(n,o/e.height)),e.setContentSize(e.width*n,e.height*n)},t.formatTime=function(e){var t=Math.floor(e/60),o=Math.floor(e-60*t);return t.toLocaleString(void 0,{minimumIntegerDigits:2})+":"+o.toLocaleString(void 0,{minimumIntegerDigits:2})},t.loadImageFromURL=function(e,t,o){void 0===o&&(o=null),cc.loader.load({url:t,type:"jpg"},function(t,n){if(!t){var r=new cc.SpriteFrame(n);if(e.spriteFrame=r,o){var i=r.getOriginalSize(),a=1;i.height>o.height||i.width>o.width?a=Math.max(o.height/i.height,o.width/i.width):(i.height<o.height||i.width<o.width)&&(a=Math.max(o.height/i.height,o.width/i.width)),e.node.setContentSize(i.width*a,i.height*a)}}})},t.adjustNodeToSize=function(e,t){},t.LEFT=0,t.RIGHT=1,t.CENTER=2,t.TOP=3,t.BOTTOM=4,t=r([a],t)}(cc.Component));o.default=s,cc._RF.pop()},{}],use_reversed_rotateBy:[function(e,t,o){"use strict";cc._RF.push(t,"0917f4Kc9JMXqZbYcpfTl9n","use_reversed_rotateBy"),cc.RotateBy._reverse=!0,cc._RF.pop()},{}]},{},["AbstractSDK","ISDKHandler","NetworkedNode","SDKFunction","AnimationController","Arrow","AudioController","CameraFollow","Chest","Enemy","EnemyArrow","EnemyController","GameManager","GameSceneController","Joystick","PlatformController","Player","Powerups","PrefabAsset_Main","PrefabAssets","ScoreController","Tile","IsometricMode","NodeHelper","PoolHelper","Poolable","Utils","Config","ConfigItem","ConfigManager","use_reversed_rotateBy"]);