window.__require=function t(e,o,n){function i(s,a){if(!o[s]){if(!e[s]){var c=s.split("/");if(c=c[c.length-1],!e[c]){var l="function"==typeof __require&&__require;if(!a&&l)return l(c,!0);if(r)return r(c,!0);throw new Error("Cannot find module '"+s+"'")}s=c}var u=o[s]={exports:{}};e[s][0].call(u.exports,function(t){return i(e[s][1][t]||t)},u,u.exports,t,e,o,n)}return o[s].exports}for(var r="function"==typeof __require&&__require,s=0;s<n.length;s++)i(n[s]);return i}({AbstractSDK:[function(t,e,o){"use strict";cc._RF.push(e,"78116Ir4gBJ0qkBSfvbVddN","AbstractSDK"),cc._RF.pop()},{}],ArrayExtensions:[function(t,e,o){"use strict";cc._RF.push(e,"deb10gMUlJG6b/vwvIvZVKB","ArrayExtensions"),Array.prototype.getRandom=function(){return this[Math.floor(Math.random()*this.length)]},Array.prototype.convertToSet=function(){var t=new Set;return this.forEach(function(e){t.add(e)}),t},Array.prototype.popRandom=function(){var t=Math.floor(Math.random()*this.length);return this.splice(t,1)[0]},cc._RF.pop()},{}],BuffEffect:[function(t,e,o){"use strict";cc._RF.push(e,"a6367pmH8hMuY7Qsg1TA0q3","BuffEffect"),Object.defineProperty(o,"__esModule",{value:!0}),o.BuffEffect=void 0;var n=t("../../hcg-core/sdk/SdkFunctions"),i=t("./BuffManagerBase"),r=function(){function t(t,e){this.Index=i.default.generateId(),this.Owner=e,this._maxCooldown=t}return t.prototype.getReplaceable=function(){return!1},t.prototype.getMaxCooldownInSeconds=function(){return this._maxCooldown},t.prototype.getMaxCooldownInMiliSeconds=function(){return 1e3*this._maxCooldown},t.prototype.getCooldownInSeconds=function(){return(this._endTime-n.default.getInstance().getTick())/1e3},t.prototype.getCooldownInMiliseconds=function(){return this._endTime-n.default.getInstance().getTick()},t.prototype.apply=function(){return 1==this.Owner.tryAddBuff(this)&&(this._activeTime=n.default.getInstance().getTick(),this._endTime=this._activeTime+1e3*this._maxCooldown,this.doApply(),!0)},t.prototype.remove=function(){1==this.Owner.tryRemoveBuff(this)&&this.doRemove()},t.prototype.stack=function(t){this._endTime=this._endTime+1e3*t._maxCooldown},t.prototype.replace=function(t){this._activeTime=n.default.getInstance().getTick(),this._endTime=this._activeTime+1e3*t._maxCooldown},t}();o.BuffEffect=r,cc._RF.pop()},{"../../hcg-core/sdk/SdkFunctions":"SdkFunctions","./BuffManagerBase":"BuffManagerBase"}],BuffManagerBase:[function(t,e,o){"use strict";cc._RF.push(e,"293f93l7v9Ky71uNQClrpXr","BuffManagerBase");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(s=(r<3?i(s):r>3?i(e,o,s):i(e,o))||s);return r>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0}),o.SpawnCommandData=void 0;var r=t("../../hcg-core/sdk/SdkFunctions"),s=t("./BuffTarget"),a=t("./StatusIcon"),c=cc._decorator,l=c.ccclass,u=c.property,p=function(){return function(t,e,o){this.target=t,this.itemType=e,this.metadata=o}}();o.SpawnCommandData=p;var h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.multipleEffects=!0,e.statuses=new Array,e.itemSprites=new Array,e._playerContainers=new Array,e._outdateIntervalCheck=100,e._lastOutdateCheckTick=0,e}var o;return n(e,t),o=e,e.getInstance=function(){return this._instance},e.generateId=function(){return this._idGenerator++},e.prototype.getContainer=function(t){for(var e=0;e<this._playerContainers.length;e++)if(this._playerContainers[e].Owner==t)return this._playerContainers[e];return null},e.prototype.onLoad=function(){var t=this;o._idGenerator=0,o._instance=this;for(var e=this.getPlayerControllers(),n=0;n<e.length;n++)this._playerContainers.push(new s.BuffTarget(e[n]));this.statuses.forEach(function(t){t.node.active=!1}),r.default.getInstance().registerEvent(r.default.KEY_SPAWN_STATUS_ITEM,function(e){return t.receive_command_KEY_SPAWN_STATUS_ITEM(e)})},e.prototype.start=function(){},e.prototype.onDestroy=function(){},e.prototype.update=function(){var t=r.default.getInstance().getTick();if(t-this._lastOutdateCheckTick>=this._outdateIntervalCheck){this._lastOutdateCheckTick=t;for(var e=function(){var t=o._playerContainers[n];1==t.hasBuffs()&&(o.removeOutdateEffects(t),1==o.isThisPlayerController(t.Owner)&&o.statuses.forEach(function(e){var o=t.getStatus(e.itemType);null==o?e.node.active=!1:(e.node.active=!0,e.setTime(o.totalTime,o.remainTime))}))},o=this,n=0;n<this._playerContainers.length;n++)e()}},e.prototype.getItemSprite=function(t){for(var e=0;e<this.itemSprites.length;e++)if(t==e)return this.itemSprites[e]},e.prototype.spawnItem=function(t,e,o){if(null==t)return-1;var n=this.getContainer(t);if(0==this.multipleEffects&&this.isBuff(e)&&1==n.hasBuffs())return-1;if(1==r.default.getInstance().isRealTimeMultiplayer()){var i=this.serializeCommandData(t,e,o);r.default.getInstance().sendP2PMessage(r.default.KEY_SPAWN_STATUS_ITEM,{spawnInfo:i})}return this.doSpawnItem(t,e,o)},e.prototype.spawnRandomlyItem=function(t,e){if(null==t)return-1;if(0==r.default.getInstance().isSpawner())return-1;var o=this.getRandomItemId();return this.spawnItem(t,o,e)},e.prototype.doSpawnItem=function(t,e,o){if(null==t)return-1;var n=this.getContainer(t),i=this.createEffect(n,e,o);return null!=i&&i.apply()?e:-1},e.prototype.receive_command_KEY_SPAWN_STATUS_ITEM=function(t){if(null!=t){var e=this.deserializeCommandData(t.spawnInfo);this.doSpawnItem(e.target,e.itemType,t.metadata)}},e.prototype.removeOutdateEffects=function(t){var e=t.getOutdateEffects();if(null!=e)for(var o=0,n=e;o<n.length;o++){n[o].remove()}},e._instance=null,e._idGenerator=0,i([u],e.prototype,"multipleEffects",void 0),i([u([a.default])],e.prototype,"statuses",void 0),i([u([cc.SpriteFrame])],e.prototype,"itemSprites",void 0),e=o=i([l],e)}(cc.Component);o.default=h,cc._RF.pop()},{"../../hcg-core/sdk/SdkFunctions":"SdkFunctions","./BuffTarget":"BuffTarget","./StatusIcon":"StatusIcon"}],BuffTarget:[function(t,e,o){"use strict";cc._RF.push(e,"20b6e2H2plHWou5QRWxJwYn","BuffTarget"),Object.defineProperty(o,"__esModule",{value:!0}),o.BuffTarget=o.BuffStatus=void 0;var n=function(){return function(){this.itemType=0,this.remainTime=0,this.totalTime=1}}();o.BuffStatus=n;var i=function(){function t(t){this.Owner=null,this._buffs=new Array,this.Owner=t}return t.prototype.hasBuffs=function(){return this._buffs.length>0},t.prototype.getStatuses=function(){var t=new Array;return this._buffs.forEach(function(e){var o=new n;o.itemType=e.EffectId,o.remainTime=e.getCooldownInMiliseconds(),o.totalTime=e.getMaxCooldownInMiliSeconds(),t.push(o)}),t},t.prototype.getStatus=function(t){for(var e=0;e<this._buffs.length;e++){var o=this._buffs[e];if(o.EffectId==t){var i=new n;return i.itemType=o.EffectId,i.remainTime=o.getCooldownInMiliseconds(),i.totalTime=o.getMaxCooldownInMiliSeconds(),i}}return null},t.prototype.tryAddBuff=function(t){if(null==t)return!1;for(var e=null,o=0,n=this._buffs;o<n.length;o++){var i=n[o];if(i.EffectId==t.EffectId){e=i;break}}return null!=e?1==t.getReplaceable()?(e.replace(t),!1):0!=t.IsStack&&(e.stack(t),!1):(this._buffs.push(t),!0)},t.prototype.tryRemoveBuff=function(t){if(null==t)return!1;for(var e=0;e<this._buffs.length;e++)if(this._buffs[e].EffectId==t.EffectId)return this._buffs.splice(e,1),!0;return!1},t.prototype.getOutdateEffects=function(){if(0==this._buffs.length)return null;for(var t=new Array,e=0;e<this._buffs.length;e++)this._buffs[e].getCooldownInMiliseconds()<=0&&t.push(this._buffs[e]);return t},t.prototype.addInstant=function(t){},t.prototype.getEffectByType=function(t){if(0==this._buffs.length)return null;for(var e=0;e<this._buffs.length;e++)if(this._buffs[e].EffectId==t)return this._buffs[e];return null},t}();o.BuffTarget=i,cc._RF.pop()},{}],CanvasMultiResoSupport:[function(t,e,o){"use strict";cc._RF.push(e,"bbadfzUTVZCrqtOLTaLN0Uj","CanvasMultiResoSupport");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(s=(r<3?i(s):r>3?i(e,o,s):i(e,o))||s);return r>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var r=cc._decorator,s=r.ccclass,a=r.property,c=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.container=null,e.count=0,e}return n(e,t),e.prototype.onLoad=function(){this.container.active=!1;var t=cc.view.getFrameSize(),e=t.width,o=t.height,n=this.node.getComponent(cc.Canvas);e/o>=n.designResolution.width/n.designResolution.height?(n.fitWidth=!1,n.fitHeight=!0):(n.fitWidth=!0,n.fitHeight=!1)},e.prototype.update=function(){this.count>=0&&(this.count++,2==this.count&&(this.container.active=!0,this.count=-1))},i([a(cc.Node)],e.prototype,"container",void 0),e=i([s],e)}(cc.Component);o.default=c,cc._RF.pop()},{}],EmoticonController:[function(t,e,o){"use strict";cc._RF.push(e,"75f2ajScqRHT5tyZpvOjNTp","EmoticonController");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(s=(r<3?i(s):r>3?i(e,o,s):i(e,o))||s);return r>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var r,s=t("../sdk/SdkFunctions"),a=t("./PlayerEmoticons"),c=cc._decorator,l=c.ccclass,u=c.property;(function(t){t[t.NONE=0]="NONE",t[t.DOWNLOADING=1]="DOWNLOADING",t[t.DOWNLOADED=2]="DOWNLOADED"})(r||(r={}));var p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.playerEmoticons=null,e.opponentEmoticons=null,e.emoticonButtons=new Array,e.emoticonBundle="https://h5game.gogame.net/core/b3/remote/hcg_emoticons",e._downloadStatus=r.NONE,e._emoticonPrefabs=[null,null,null,null],e._onloadedHandlers=new Array,e.emoticonEnable=!0,e}var o;return n(e,t),o=e,e.getInstance=function(){return this.instance},e.prototype.onLoad=function(){if(o.instance=this,1==gpSDK.isSinglePlayer()){this.playerEmoticons.node.active=!1,this.opponentEmoticons.node.active=!1;for(var t=0,e=this.emoticonButtons;t<e.length;t++){e[t].node.active=!1}}else for(var n in s.default.getInstance().registerEvent(s.default.KEY_EMOTICON,function(t){return o.instance.showOpponentEmoticon(t)}),this.emoticonButtons){var i=parseInt(n),r=this.emoticonButtons[i],a=new cc.Component.EventHandler;a.target=this.node,a.component="EmoticonController",a.handler="onClickEmoticon",a.customEventData=i.toString(),r.clickEvents.push(a)}},e.prototype.start=function(){this.downloadEmoticons()},e.prototype.onDestroy=function(){if(1==gpSDK.isSinglePlayer());else for(var t in this.emoticonButtons){var e=parseInt(t),o=this.emoticonButtons[e],n=new cc.Component.EventHandler;n.target=this.node,n.component="EmoticonController",n.handler="onClickEmoticon",n.customEventData=e.toString(),o.clickEvents.slice(0,o.clickEvents.length)}},e.prototype.showOpponentEmoticon=function(t){0!=this.emoticonEnable&&null!=t&&this.opponentEmoticons.showEmoticon(t.iconId)},e.prototype.showSelfEmoticon=function(t){0!=this.emoticonEnable&&(s.default.getInstance().sendP2PMessage(s.default.KEY_EMOTICON,{iconId:t}),this.playerEmoticons.showEmoticon(t))},e.prototype.onClickEmoticon=function(t,e){if(0!=this.emoticonEnable&&null!=e){var o=parseInt(e);this.showSelfEmoticon(o)}},e.prototype.downloadEmoticons=function(){if(this._downloadStatus==r.NONE){this._downloadStatus=r.DOWNLOADING;var t=this;cc.assetManager.loadBundle(this.emoticonBundle,function(e,o){o.load("Prefabs/Emoticon_0",cc.Prefab,function(e,o){t.pushEmoticon(0,e,o)}),o.load("Prefabs/Emoticon_1",cc.Prefab,function(e,o){t.pushEmoticon(1,e,o)}),o.load("Prefabs/Emoticon_2",cc.Prefab,function(e,o){t.pushEmoticon(2,e,o)}),o.load("Prefabs/Emoticon_3",cc.Prefab,function(e,o){t.pushEmoticon(3,e,o)})})}},e.prototype.pushEmoticon=function(t,e,o){null!=o?(this._emoticonPrefabs[t]=o,this.checkIfDownloadedIcons()):console.log("@@=> failed to load emoticon "+t+": "+e)},e.prototype.checkIfDownloadedIcons=function(){for(var t=0;t<this._emoticonPrefabs.length;t++)if(null==this._emoticonPrefabs[t])return;if(this._downloadStatus=r.DOWNLOADED,this._onloadedHandlers.length>0)for(t=0;t<this._onloadedHandlers.length;t++)null!=this._onloadedHandlers[t]&&this._onloadedHandlers[t]();return!0},e.prototype.onEmoticonLoaded=function(t){this._onloadedHandlers.push(t),this._downloadStatus==r.DOWNLOADED&&t()},e.prototype.getIconPrefab=function(t){return this._downloadStatus!=r.DOWNLOADED||t<0||t>=this._emoticonPrefabs.length?null:this._emoticonPrefabs[t]},e.instance=null,i([u(a.default)],e.prototype,"playerEmoticons",void 0),i([u(a.default)],e.prototype,"opponentEmoticons",void 0),i([u([cc.Button])],e.prototype,"emoticonButtons",void 0),i([u],e.prototype,"emoticonBundle",void 0),e=o=i([l],e)}(cc.Component);o.default=p,cc._RF.pop()},{"../sdk/SdkFunctions":"SdkFunctions","./PlayerEmoticons":"PlayerEmoticons"}],FPSHUD:[function(t,e,o){"use strict";cc._RF.push(e,"ab267W2gg9F+IrFrXlp3Tuw","FPSHUD");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(s=(r<3?i(s):r>3?i(e,o,s):i(e,o))||s);return r>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var r=cc._decorator,s=r.ccclass,a=r.property,c=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.showFps=!1,e.fpsLabel=null,e._frameCount=0,e._frameDt=0,e._fps=0,e._updateRateSeconds=2,e}return n(e,t),e.prototype.onLoad=function(){null==this.fpsLabel?this.showFps=!1:this.fpsLabel.string=""},e.prototype.update=function(t){1==this.showFps&&(this._frameCount++,this._frameDt+=t,this._frameDt>1/this._updateRateSeconds&&(this._fps=this._frameCount/this._frameDt,this._frameCount=0,this._frameDt-=1/this._updateRateSeconds,this.fpsLabel.string="fps: "+Math.round(this._fps),this._fps>=28?this.fpsLabel.node.color=cc.Color.GREEN:this._fps>=24?this.fpsLabel.node.color=cc.Color.YELLOW:this.fpsLabel.node.color=cc.Color.RED))},i([a],e.prototype,"showFps",void 0),i([a(cc.Label)],e.prototype,"fpsLabel",void 0),e=i([s],e)}(cc.Component);o.default=c,cc._RF.pop()},{}],FillScreen:[function(t,e,o){"use strict";cc._RF.push(e,"cf9a0rICe9OqZZzxlKa/1j0","FillScreen");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(s=(r<3?i(s):r>3?i(e,o,s):i(e,o))||s);return r>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var r=cc._decorator,s=r.ccclass,a=(r.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.prototype.onLoad=function(){},e=i([s],e)}(cc.Component));o.default=a,cc._RF.pop()},{}],GameElapasedTime:[function(t,e,o){"use strict";cc._RF.push(e,"93e8cWmrA5Bm4YpFrHO07kr","GameElapasedTime"),Object.defineProperty(o,"__esModule",{value:!0});var n=t("./SdkFunctions"),i=function(){function t(){this._startAt=0,this._isStarted=!1,this._pauseAtTick=-1,this._totalPauseTime=0}return t.getInstance=function(){return null==this._instance&&(this._instance=new t),this._instance},Object.defineProperty(t,"ElapseTime",{get:function(){return this.getInstance().getElapseTime()},enumerable:!1,configurable:!0}),Object.defineProperty(t,"ElapseTimeInSeconds",{get:function(){return this.getInstance().getElapseTimeInSeconds()},enumerable:!1,configurable:!0}),t.prototype.start=function(){this._startAt=n.default.getInstance().getTick(),this._isStarted=!0},t.prototype.beforePause=function(){0!=this._isStarted&&(this._pauseAtTick=n.default.getInstance().getTick())},t.prototype.afterResume=function(){0!=this._isStarted&&(this._totalPauseTime=this._totalPauseTime+(n.default.getInstance().getTick()-this._pauseAtTick),this._pauseAtTick=-1)},t.prototype.getElapseTime=function(){return 0==this._isStarted?0:-1!=this._pauseAtTick?this._startAt-this._totalPauseTime+this._pauseAtTick:n.default.getInstance().getTick()-this._startAt-this._totalPauseTime},t.prototype.getElapseTimeInSeconds=function(){return.001*this.getElapseTime()},t._instance=null,t}();o.default=i,cc._RF.pop()},{"./SdkFunctions":"SdkFunctions"}],GameManager:[function(t,e,o){"use strict";cc._RF.push(e,"c8ba9bG/J9I6oGYY8zxNGNa","GameManager");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(s=(r<3?i(s):r>3?i(e,o,s):i(e,o))||s);return r>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var r=t("../hcg-core/sdk/SdkFunctions"),s=t("../hcg-core/Sound/SoundManager"),a=t("../hcg-core/UI/HCG_GameController"),c=t("../hcg-core/UI/HCG_GameManager"),l=t("../hcg-core/utilities/Utils"),u=t("./NetTransfer"),p=t("./Player"),h=cc._decorator,d=h.ccclass,f=h.property,y=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.playerObject=null,e.policeObject=null,e.policeObject_lv1=null,e.policeObject_lv2=null,e.policeObject_lv3=null,e.policeObject_golden=null,e.obstacleObject=null,e.shadowArray=[],e.wantedStars=[],e.timeTotal=0,e.policeNumber=0,e.obstacleNumber=0,e.cooldownAlertBanner=null,e.indicator=null,e.move=null,e.activePlayer=null,e.cooldownAlert=null,e.gameScore=0,e.timerCount=0,e.load=!1,e.gameOver=!1,e.restart=!1,e.indicatorList=new Array,e.obstacleList=new Array,e.policeList=new Array,e.playerList=new Array,e.vertical=0,e.horizontal=0,e.isChasing=!1,e.gameStarted=!1,e.opponentReady=!1,e.ccComponentIsUp=!1,e.wantedLevel=0,e.lastAnimWatedLevel=0,e.hasGoldenBoss=!1,e.bustedBanner=null,e.collectedBanner=null,e.pauseAtTick=-1,e.totalPauseTime=0,e.startTime=0,e.policeBound=null,e.moneyToSpawnBoss_Lv1=400,e.moneyToSpawnBoss_Lv2=1e3,e.moneyToSpawnBoss_Lv3=1500,e.vanNode=null,e.bankGate_1=null,e.bankGate_2=null,e.boundary=null,e.recorder=null,e.validator=null,e}return n(e,t),Object.defineProperty(e.prototype,"elapsedTime",{get:function(){return 0==this.gameStarted?0:r.default.getInstance().getTick()-this.startTime-this.totalPauseTime},enumerable:!1,configurable:!0}),e.prototype.onLoad=function(){t.prototype.onLoad.call(this),u.default.initialize(this),this.gameScene=this.node.getChildByName("GameScene"),this.shadow=this.gameScene.getChildByName("ShadowTower"),this.police=this.gameScene.getChildByName("PoliceTower"),this.player=this.gameScene.getChildByName("PlayerTower"),this.obstacle=this.gameScene.getChildByName("ObstacleTower"),this.indicatorList.push(this.gameScene.getChildByName("SafeTower").getChildByName("Safe01").getChildByName("Indicator")),this.indicatorList.push(this.gameScene.getChildByName("SafeTower").getChildByName("Safe02").getChildByName("Indicator")),this.indicatorList.push(this.gameScene.getChildByName("Van").getChildByName("Indicator")),this.bustedBanner=this.node.getChildByName("lose banner"),this.collectedBanner=this.node.getChildByName("win banner"),this.obstacleMin=cc.v2(-this.obstacle.width/2,-this.obstacle.height/2),this.obstacleMax=cc.v2(this.obstacle.width/2,this.obstacle.height/2),this.policeMin=cc.v2(-this.police.width/2,-this.police.height/2),this.policeMax=cc.v2(this.police.width/2,this.police.height/2),cc.director.getCollisionManager().enabled=!0,cc.director.getPhysicsManager().enabled=!0,console.log("@@=> initialize recorder: "+bankRobberRecorder),this.recorder=bankRobberRecorder,console.log("@@=> initialize validator: "+bankRobberValidator),this.validator=bankRobberValidator},e.prototype.start=function(){cc.systemEvent.on(cc.SystemEvent.EventType.KEY_DOWN,this.onKeyDown,this),cc.systemEvent.on(cc.SystemEvent.EventType.KEY_UP,this.onKeyUp,this),this.ccComponentIsUp=!0,this.checkToStartGame()},e.prototype.startGame=function(){this.opponentReady=!0,this.checkToStartGame()},e.prototype.pauseGame=function(){1==this.recorder.isRecording&&0==this.recorder.isPausing&&-1==this.pauseAtTick&&(this.pauseAtTick=r.default.getInstance().getTick(),this.recorder.pauseGame(r.default.getInstance().getTick())),t.prototype.pauseGame.call(this)},e.prototype.resumeGame=function(){1==this.recorder.isRecording&&1==this.recorder.isPausing&&-1!=this.pauseAtTick&&(this.totalPauseTime+=r.default.getInstance().getTick()-this.pauseAtTick,this.pauseAtTick=-1,this.recorder.unPauseGame(r.default.getInstance().getTick())),t.prototype.resumeGame.call(this)},e.prototype.checkToStartGame=function(){1==this.opponentReady&&1==this.ccComponentIsUp&&0==this.gameStarted&&(this.gameStarted=!0,this.restart=!1,this.gameOver=!1,this.gameScene.opacity=255,this.timerCount=this.timeTotal,this.gameScore=0,this.initializePlayer(),this.startTime=r.default.getInstance().getTick(),this.startTimer(),this.indicatorAnimation(),this.animWantedStar(),this.boundary.active=!0,1==r.default.getInstance().isSpawner()&&this.startRecord())},e.prototype.getRecordPolices=function(){for(var t=[],e=0;e<this.policeList.length;e++){var o=this.policeList[e].getComponent("Police");t.push({position:l.default.getSimpleWorldPosition(o.node),speed:o.policeSpeed,isChasing:!1})}return t},e.prototype.getRecordObstacles=function(){for(var t=[],e=0;e<this.obstacleList.length;e++){var o=this.obstacleList[e];t.push({position:l.default.getSimpleWorldPosition(this.obstacleList[e]),width:o.width,height:o.height})}return t},e.prototype.startRecord=function(){console.log("@@=> start record: "+(null!=this.recorder));var t=this.recorder.startRecord(r.default.getInstance().getTick(),l.default.getSimpleWorldPosition(this.activePlayer.node),this.activePlayer.playerSpeed,this.getRecordPolices(),this.getRecordObstacles(),l.default.getSimpleWorldPosition(this.vanNode),[l.default.getSimpleWorldPosition(this.bankGate_1),l.default.getSimpleWorldPosition(this.bankGate_2)]);console.log("@@=> StartRecord: "+t.info)},e.prototype.startTimer=function(){var t=this;this.timerCount--,this.timerCount>0?(this.timerCount<=10&&this.playEndAlert(),this.spawnGoldenPolice(),c.default.instance.gameUIScript.updateTimerLabel(this.timerCount),this.node.runAction(cc.sequence(cc.delayTime(1),cc.callFunc(function(){return t.startTimer()})))):(this.StopEndAlert(),c.default.instance.gameUIScript.updateTimerLabel(0),this.endGame())},e.prototype.initializePlayer=function(){this.load=!1,this.indicator.active=!1,this.move.active=!1},e.prototype.InitializeGameWorldOnCooldown=function(){if(1==r.default.getInstance().isSpawner()){for(var t=[],e=0;e<this.obstacleNumber;e++){var o=cc.instantiate(this.obstacleObject),n=this.randomGenerator(o.childrenCount),i=this.setObstacleSpriteAndGetSelectedChild(o,n),s=cc.v2(this.obstacleMin.x+Math.floor(e%2)*this.obstacle.width/2+i.width/2,this.obstacleMin.y+2*Math.floor(e/2)*this.obstacle.height/this.obstacleNumber+i.height/2),a=cc.v2(this.obstacleMin.x+(Math.floor(e%2)+1)*this.obstacle.width/2-i.width/2,this.obstacleMin.y+2*(Math.floor(e/2)+1)*this.obstacle.height/this.obstacleNumber-i.height/2),c=cc.v2(this.randomGenerator(a.x,s.x),this.randomGenerator(a.y,s.y));this.setObstacleInfo(o,i,n,c),t.push({spriteNumber:n,position:c})}var l=[];for(e=0;e<this.policeNumber;e++){var u=this.spawnPolice(this.policeObject,!1,null);this.policeList.push(u),l.push([u.node.position.x,u.node.position.y])}return[t,l]}return null},e.prototype.ReceiveCommandInitializeGameWorlOnCooldown=function(t){if(null!=t){for(var e=t[0],o=0;o<this.obstacleNumber;o++){var n=cc.instantiate(this.obstacleObject),i=this.setObstacleSpriteAndGetSelectedChild(n,e[o].spriteNumber);this.setObstacleInfo(n,i,e[o].spriteNumber,e[o].position)}var r=t[1];for(o=0;o<this.policeNumber;o++){var s=this.spawnPolice(this.policeObject,!1,new cc.Vec2(r[o][0],r[o][1]));this.policeList.push(s)}this.startRecord()}},e.prototype.setObstacleSpriteAndGetSelectedChild=function(t,e){switch(e){case 0:return t.getChildByName("Obstacle01").active=!0,t.getChildByName("Obstacle02").destroy(),t.getChildByName("Obstacle03").destroy(),t.getChildByName("Obstacle04").destroy(),t.getChildByName("Obstacle01");case 1:return t.getChildByName("Obstacle01").destroy(),t.getChildByName("Obstacle02").active=!0,t.getChildByName("Obstacle03").destroy(),t.getChildByName("Obstacle04").destroy(),t.getChildByName("Obstacle02");case 2:return t.getChildByName("Obstacle01").destroy(),t.getChildByName("Obstacle02").destroy(),t.getChildByName("Obstacle03").active=!0,t.getChildByName("Obstacle04").destroy(),t.getChildByName("Obstacle03");case 3:return t.getChildByName("Obstacle01").destroy(),t.getChildByName("Obstacle02").destroy(),t.getChildByName("Obstacle03").destroy(),t.getChildByName("Obstacle04").active=!0,t.getChildByName("Obstacle04")}return null},e.prototype.setObstacleInfo=function(t,e,o,n){this.obstacle.addChild(t),this.obstacleList.push(t),e.position=n;var i=new cc.Node;this.shadow.addChild(i),i.addComponent("cc.Sprite").spriteFrame=this.shadowArray[Math.floor(o/2)],this.obstacleList.push(i),i.position=cc.v2(e.position.x,e.position.y-30)},e.prototype.spawnPolice=function(t,e,o){var n=cc.instantiate(t);this.police.addChild(n);var i=n.getComponent("Police");return i.prepare(e,o),s.default.getInstance().registerSource(i.node.getComponent("cc.AudioSource")),1==e&&this.recorder.spawnPolice(r.default.getInstance().getTick(),i.getRecordPolice(),this.wantedLevel),i},e.prototype.spawnGoldenPolice=function(){this.timerCount<=15&&3==this.wantedLevel&&0==this.hasGoldenBoss&&(this.hasGoldenBoss=!0,this.policeList.push(this.spawnPolice(this.policeObject_golden,!0,null)))},e.prototype.collectLastPolice=function(){var t=this.policeList.pop();this.recorder.unSpawnPolice(r.default.getInstance().getTick(),t.getComponent("Police").getRecordPolice(),this.wantedLevel),t.node.stopAllActions(),t.node.destroy()},e.prototype.chasePolice=function(){this.isChasing=!0;for(var t=0,e=this.policeList;t<e.length;t++){var o=e[t];o&&o.chasePlayer(!0,!0)}},e.prototype.busted=function(){this.isChasing=!1;for(var t=0,e=this.policeList;t<e.length;t++){var o=e[t];o&&(o.lock=!1,o.warning.active=!1,o.movePrepare())}3==this.wantedLevel&&this.gameScore<this.moneyToSpawnBoss_Lv3&&(1==this.hasGoldenBoss&&(this.collectLastPolice(),this.hasGoldenBoss=!1),this.collectLastPolice(),this.wantedLevel=2),2==this.wantedLevel&&this.gameScore<this.moneyToSpawnBoss_Lv2&&(this.collectLastPolice(),this.wantedLevel=1),1==this.wantedLevel&&this.gameScore<this.moneyToSpawnBoss_Lv1&&(this.collectLastPolice(),this.wantedLevel=0),this.updateWantedStars()},e.prototype.update=function(t){if(this.isChasing){for(var e=new Array,o=new Array,n=0,i=this.policeList;n<i.length;n++){var r=i[n];e.push(r.node.parent.convertToWorldSpaceAR(r.node.position).sub(this.activePlayer.node.parent.convertToWorldSpaceAR(this.activePlayer.node.position)).mag()),o.push(r)}for(var s=0;s<o.length-1;s++)for(var a=s+1;a<o.length;a++)if(e[s]>e[a]){var c=e[s];e[s]=e[a],e[a]=c;var l=o[s];o[s]=o[a],o[a]=l}var u=this.activePlayer.node.parent.convertToWorldSpaceAR(this.activePlayer.node.position),p=this.activePlayer.playerSpeed-o[0].policeSpeed;for(s=0;s<o.length;s++){var h=new cc.Vec2(u.x+s*p*Math.sin(this.activePlayer.moveAngle),u.y+s*p*Math.cos(this.activePlayer.moveAngle));o[s].smartChase(o[s].node.parent.convertToNodeSpaceAR(h))}}},e.prototype.tempMoneyChange=function(){0==this.wantedLevel&&this.gameScore+this.activePlayer.money>=this.moneyToSpawnBoss_Lv1&&(this.policeList.push(this.spawnPolice(this.policeObject_lv1,!0,null)),this.wantedLevel=1),1==this.wantedLevel&&this.gameScore+this.activePlayer.money>=this.moneyToSpawnBoss_Lv2&&(this.policeList.push(this.spawnPolice(this.policeObject_lv2,!0,null)),this.wantedLevel=2),2==this.wantedLevel&&this.gameScore+this.activePlayer.money>=this.moneyToSpawnBoss_Lv3&&(this.policeList.push(this.spawnPolice(this.policeObject_lv3,!0,null)),this.wantedLevel=3),this.updateWantedStars()},e.prototype.moneyIn=function(t){var e=this;if(1!=this.activePlayer.busted&&0!=this.gameStarted){this.load=!1,this.gameScore+=t,c.default.instance.updatePlayerScore(this.gameScore),this.isChasing=!1;for(var o=0,n=this.policeList;o<n.length;o++){var i=n[o];i&&(i.lock=!1,i.warning.active=!1,i.movePrepare())}t>0&&cc.tween(this.node).delay(.5).call(function(){e.showCollectedBanner(!0),cc.tween(e.node).delay(1).call(function(){e.showCollectedBanner(!1)}).start()}).start()}},e.prototype.indicatorAnimation=function(){var t=this;this.gameOver||(this.load?(this.indicatorList[0].active=!1,this.indicatorList[1].active=!1,this.indicatorList[2].active=!0,cc.tween(this.indicatorList[2]).by(.3,{position:cc.v2(0,50)}).by(.3,{position:cc.v2(0,-50)}).call(function(){t.indicatorAnimation()}).start()):(this.indicatorList[0].active=!0,this.indicatorList[1].active=!0,this.indicatorList[2].active=!1,cc.tween(this.indicatorList[0]).by(.3,{position:cc.v2(0,50)}).by(.3,{position:cc.v2(0,-50)}).start(),cc.tween(this.indicatorList[1]).by(.3,{position:cc.v2(0,50)}).by(.3,{position:cc.v2(0,-50)}).call(function(){t.indicatorAnimation()}).start()))},e.prototype.isPlayerInsideSafeVanArea=function(){if(0==this.policeBound.active||this.activePlayer.money>0)return!1;var t=this.policeBound.convertToNodeSpaceAR(this.activePlayer.node.parent.convertToWorldSpaceAR(this.activePlayer.node.position));return Math.abs(t.x)<.5*this.policeBound.width&&Math.abs(t.y)<.5*this.policeBound.height},e.prototype.onKeyDown=function(t){if(!this.gameOver&&!this.activePlayer.busted){switch(t.keyCode){case cc.macro.KEY.right:case cc.macro.KEY.d:this.horizontal=1;break;case cc.macro.KEY.left:case cc.macro.KEY.a:this.horizontal=-1;break;case cc.macro.KEY.up:case cc.macro.KEY.w:this.vertical=1;break;case cc.macro.KEY.down:case cc.macro.KEY.s:this.vertical=-1}this.adjustSpeed()}},e.prototype.onKeyUp=function(t){if(!this.gameOver&&!this.activePlayer.busted){switch(t.keyCode){case cc.macro.KEY.right:case cc.macro.KEY.d:1==this.horizontal&&(this.horizontal=0);break;case cc.macro.KEY.left:case cc.macro.KEY.a:-1==this.horizontal&&(this.horizontal=0);break;case cc.macro.KEY.up:case cc.macro.KEY.w:1==this.vertical&&(this.vertical=0);break;case cc.macro.KEY.down:case cc.macro.KEY.s:-1==this.vertical&&(this.vertical=0)}this.adjustSpeed(),0==this.horizontal&&0==this.vertical&&(this.activePlayer.linearVelocity=cc.v2(0,0))}},e.prototype.adjustSpeed=function(){this.activePlayer.busted||(this.horizontal>0?(this.activePlayer.movePrepare(1.5708),this.vertical>0?this.activePlayer.movePrepare(.785398):this.vertical<0&&this.activePlayer.movePrepare(2.35619)):this.horizontal<0?(this.activePlayer.movePrepare(-1.5708),this.vertical>0?this.activePlayer.movePrepare(-.785398):this.vertical<0&&this.activePlayer.movePrepare(-2.35619)):this.vertical>0?this.activePlayer.movePrepare(0):this.vertical<0&&this.activePlayer.movePrepare(3.14159))},e.prototype.endGame=function(){var t=this.recorder.stopRecord(r.default.getInstance().getTick());r.default.getInstance().SetGameStateData(t),c.default.instance.triggerGameOver(),this.restart=!1,this.gameOver=!0,this.gameScene.opacity=100;for(var e=0,o=this.policeList;e<o.length;e++){var n=o[e];n&&(n.linearVelocity=cc.v2(0,0),n.node.stopAllActions())}this.activePlayer.linearVelocity=cc.v2(0,0),this.activePlayer.node.stopAllActions(),this.node.stopAllActions(),this.bustedBanner.active=!1,this.collectedBanner.active=!1},e.prototype.randomGenerator=function(t,e){return void 0===e&&(e=0),Math.floor(e+(t-e)*Math.random())},e.prototype.setPoliceBoundary=function(t){this.policeBound.active=t},e.prototype.appearHelpPanel=function(t){t.active=!0,t.opacity=0,t.scale=0,cc.tween(t).parallel(cc.tween(t).to(.1,{opacity:255}),cc.tween(t).to(.1,{scale:1},{easing:"backOut"})).start()},e.prototype.disappearPanel=function(t){t.active=!1},e.prototype.showBustedBanner=function(t){1==t?this.appearHelpPanel(this.bustedBanner):this.disappearPanel(this.bustedBanner)},e.prototype.showCollectedBanner=function(t){},e.prototype.updateWantedStars=function(){if(this.lastAnimWatedLevel!=this.wantedLevel){this.lastAnimWatedLevel=this.wantedLevel;for(var t=0;t<this.wantedStars.length;t++){var e=this.wantedStars[t];null!=e&&(e.stopAllActions(),e.active=t<this.wantedLevel,e.opacity=255)}}},e.prototype.animWantedStar=function(){var t=this;if(this.wantedLevel>0&&this.wantedLevel-1<this.wantedStars.length){var e=this.wantedStars[this.wantedLevel-1];cc.tween(e).sequence(cc.tween(e).to(.3,{opacity:255}),cc.tween(e).to(.3,{opacity:128})).start()}this.node.runAction(cc.sequence(cc.delayTime(.7),cc.callFunc(function(){return t.animWantedStar()})))},e.prototype.playEndAlert=function(){0==this.cooldownAlertBanner.active&&(this.cooldownAlertBanner.active=!0),s.default.getInstance().playSound(this.cooldownAlert,!1),cc.tween(this.cooldownAlertBanner).sequence(cc.tween(this.cooldownAlertBanner).to(.3,{opacity:50}),cc.tween(this.cooldownAlertBanner).to(.3,{opacity:0})).start()},e.prototype.StopEndAlert=function(){this.cooldownAlertBanner.active=!1},i([f(cc.Prefab)],e.prototype,"playerObject",void 0),i([f(cc.Prefab)],e.prototype,"policeObject",void 0),i([f(cc.Prefab)],e.prototype,"policeObject_lv1",void 0),i([f(cc.Prefab)],e.prototype,"policeObject_lv2",void 0),i([f(cc.Prefab)],e.prototype,"policeObject_lv3",void 0),i([f(cc.Prefab)],e.prototype,"policeObject_golden",void 0),i([f(cc.Prefab)],e.prototype,"obstacleObject",void 0),i([f([cc.SpriteFrame])],e.prototype,"shadowArray",void 0),i([f([cc.Node])],e.prototype,"wantedStars",void 0),i([f],e.prototype,"timeTotal",void 0),i([f],e.prototype,"policeNumber",void 0),i([f],e.prototype,"obstacleNumber",void 0),i([f(cc.Node)],e.prototype,"cooldownAlertBanner",void 0),i([f(cc.Node)],e.prototype,"indicator",void 0),i([f(cc.Node)],e.prototype,"move",void 0),i([f(p.default)],e.prototype,"activePlayer",void 0),i([f(cc.AudioClip)],e.prototype,"cooldownAlert",void 0),i([f(cc.Node)],e.prototype,"policeBound",void 0),i([f],e.prototype,"moneyToSpawnBoss_Lv1",void 0),i([f],e.prototype,"moneyToSpawnBoss_Lv2",void 0),i([f],e.prototype,"moneyToSpawnBoss_Lv3",void 0),i([f(cc.Node)],e.prototype,"vanNode",void 0),i([f(cc.Node)],e.prototype,"bankGate_1",void 0),i([f(cc.Node)],e.prototype,"bankGate_2",void 0),i([f(cc.Node)],e.prototype,"boundary",void 0),e=i([d],e)}(a.default);o.default=y,cc._RF.pop()},{"../hcg-core/Sound/SoundManager":"SoundManager","../hcg-core/UI/HCG_GameController":"HCG_GameController","../hcg-core/UI/HCG_GameManager":"HCG_GameManager","../hcg-core/sdk/SdkFunctions":"SdkFunctions","../hcg-core/utilities/Utils":"Utils","./NetTransfer":"NetTransfer","./Player":"Player"}],HCG_CountdownToStart:[function(t,e,o){"use strict";cc._RF.push(e,"3a038WqGCFCBJ/Kk305S5kk","HCG_CountdownToStart");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(s=(r<3?i(s):r>3?i(e,o,s):i(e,o))||s);return r>3&&s&&Object.defineProperty(e,o,s),s},r=this&&this.__awaiter||function(t,e,o,n){function i(t){return t instanceof o?t:new o(function(e){e(t)})}return new(o||(o=Promise))(function(o,r){function s(t){try{c(n.next(t))}catch(t){r(t)}}function a(t){try{c(n.throw(t))}catch(t){r(t)}}function c(t){t.done?o(t.value):i(t.value).then(s,a)}c((n=n.apply(t,e||[])).next())})},s=this&&this.__generator||function(t,e){var o,n,i,r,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function a(t){return function(e){return c([t,e])}}function c(r){if(o)throw new TypeError("Generator is already executing.");for(;s;)try{if(o=1,n&&(i=2&r[0]?n.return:r[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,r[1])).done)return i;switch(n=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return s.label++,{value:r[1],done:!1};case 5:s.label++,n=r[1],r=[0];continue;case 7:r=s.ops.pop(),s.trys.pop();continue;default:if(!(i=(i=s.trys).length>0&&i[i.length-1])&&(6===r[0]||2===r[0])){s=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){s.label=r[1];break}if(6===r[0]&&s.label<i[1]){s.label=i[1],i=r;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(r);break}i[2]&&s.ops.pop(),s.trys.pop();continue}r=e.call(t,s)}catch(t){r=[6,t],n=0}finally{o=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0});var a=t("../Sound/SoundManager"),c=cc._decorator,l=c.ccclass,u=c.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.labelTimeCoundown=null,e.textFinal="Start!",e.isCountDown=!1,e}return n(e,t),e.prototype.playCountdown=function(t){return void 0===t&&(t=4),r(this,void 0,void 0,function(){var e,o=this;return s(this,function(n){return this.node.active=!0,e=t,[2,new Promise(function(n,i){var r=function(){t--;var o=0;if(o=this.isCountDown?t:e-t,0==t?(this.labelTimeCoundown.node.opacity=255,a.default.getInstance().PlayCountDownStartSFX(),this.labelTimeCoundown.string=this.textFinal):-1!=t&&(a.default.getInstance().PlayCountDownNumberSFX(),this.labelTimeCoundown.node.opacity=255,this.labelTimeCoundown.string=o.toString(),cc.tween(this.labelTimeCoundown.node).to(.5,{opacity:0}).start()),-1==t)return this.node.active=!1,n("done"),void this.unschedule(r)};o.schedule(r,1)})]})})},i([u(cc.Label)],e.prototype,"labelTimeCoundown",void 0),i([u],e.prototype,"textFinal",void 0),i([u],e.prototype,"isCountDown",void 0),e=i([l],e)}(cc.Component);o.default=p,cc._RF.pop()},{"../Sound/SoundManager":"SoundManager"}],HCG_GameController:[function(t,e,o){"use strict";cc._RF.push(e,"fef9c5Z9JpEB5ZX0CQpS/Xa","HCG_GameController");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(s=(r<3?i(s):r>3?i(e,o,s):i(e,o))||s);return r>3&&s&&Object.defineProperty(e,o,s),s},r=this&&this.__awaiter||function(t,e,o,n){function i(t){return t instanceof o?t:new o(function(e){e(t)})}return new(o||(o=Promise))(function(o,r){function s(t){try{c(n.next(t))}catch(t){r(t)}}function a(t){try{c(n.throw(t))}catch(t){r(t)}}function c(t){t.done?o(t.value):i(t.value).then(s,a)}c((n=n.apply(t,e||[])).next())})},s=this&&this.__generator||function(t,e){var o,n,i,r,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function a(t){return function(e){return c([t,e])}}function c(r){if(o)throw new TypeError("Generator is already executing.");for(;s;)try{if(o=1,n&&(i=2&r[0]?n.return:r[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,r[1])).done)return i;switch(n=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return s.label++,{value:r[1],done:!1};case 5:s.label++,n=r[1],r=[0];continue;case 7:r=s.ops.pop(),s.trys.pop();continue;default:if(!(i=(i=s.trys).length>0&&i[i.length-1])&&(6===r[0]||2===r[0])){s=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){s.label=r[1];break}if(6===r[0]&&s.label<i[1]){s.label=i[1],i=r;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(r);break}i[2]&&s.ops.pop(),s.trys.pop();continue}r=e.call(t,s)}catch(t){r=[6,t],n=0}finally{o=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0});var a=t("../sdk/SdkFunctions"),c=t("./HCG_UIController"),l=cc._decorator,u=l.ccclass,p=(l.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.prototype.onLoad=function(){},e.prototype.start=function(){},e.prototype.startGame=function(){},e.prototype.pauseGame=function(){cc.director.pause()},e.prototype.resumeGame=function(){cc.director.resume()},e.prototype.abortGame=function(){a.default.getInstance().abortGame()},e.prototype.setDefault=function(){},e.prototype.afterTimeUpEvent=function(){},e.prototype.MP_Host_AssignNetworkedNodes=function(){return[]},e.prototype.MP_Client_AssignNetworkNodes=function(t){},e.prototype.MP_OnInitializeNetworkedNode=function(t){return null},e.prototype.receive_command_KEY_NETWORK_NODE_REQUEST_DESTROY=function(t){},e.prototype.InitializeGameWorldOnCooldown=function(){return null},e.prototype.ReceiveCommandInitializeGameWorlOnCooldown=function(t){},e.prototype.OnOpponentScoreUpdated=function(t,e){},e.prototype.showCooldownWaitingForOpponent=function(t){c.default.getInstance().showCooldownWaitingForOpponent(t)},e.prototype.showCooldownToStart=function(){return r(this,void 0,void 0,function(){return s(this,function(t){switch(t.label){case 0:return[4,c.default.getInstance().showCountdown2Start()];case 1:return t.sent(),[2]}})})},e=i([u],e)}(cc.Component));o.default=p,cc._RF.pop()},{"../sdk/SdkFunctions":"SdkFunctions","./HCG_UIController":"HCG_UIController"}],HCG_GameManager:[function(t,e,o){"use strict";cc._RF.push(e,"cdb20J7IgpEyI3nGqiKjSCF","HCG_GameManager");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(s=(r<3?i(s):r>3?i(e,o,s):i(e,o))||s);return r>3&&s&&Object.defineProperty(e,o,s),s},r=this&&this.__awaiter||function(t,e,o,n){function i(t){return t instanceof o?t:new o(function(e){e(t)})}return new(o||(o=Promise))(function(o,r){function s(t){try{c(n.next(t))}catch(t){r(t)}}function a(t){try{c(n.throw(t))}catch(t){r(t)}}function c(t){t.done?o(t.value):i(t.value).then(s,a)}c((n=n.apply(t,e||[])).next())})},s=this&&this.__generator||function(t,e){var o,n,i,r,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function a(t){return function(e){return c([t,e])}}function c(r){if(o)throw new TypeError("Generator is already executing.");for(;s;)try{if(o=1,n&&(i=2&r[0]?n.return:r[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,r[1])).done)return i;switch(n=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return s.label++,{value:r[1],done:!1};case 5:s.label++,n=r[1],r=[0];continue;case 7:r=s.ops.pop(),s.trys.pop();continue;default:if(!(i=(i=s.trys).length>0&&i[i.length-1])&&(6===r[0]||2===r[0])){s=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){s.label=r[1];break}if(6===r[0]&&s.label<i[1]){s.label=i[1],i=r;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(r);break}i[2]&&s.ops.pop(),s.trys.pop();continue}r=e.call(t,s)}catch(t){r=[6,t],n=0}finally{o=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0});var a=t("../sdk/ISDKHandler"),c=t("../sdk/SdkFunctions"),l=t("./HCG_GameController"),u=t("./HCG_UIController"),p=cc._decorator,h=p.ccclass,d=p.property,f=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.opponentData=null,e.playerData=null,e.host="https://h5game.gogame.net/",e.gameControllerScript=null,e.gameUIScript=null,e}var o;return n(e,t),o=e,e.prototype.OnOpponentUpdated=function(t){this.opponentData=t,this.gameUIScript.OnOpponentUpdated(t)},e.prototype.OnOpponentScoreUpdated=function(t,e){this.gameUIScript.OnOpponentScoreUpdated(t,e),this.gameControllerScript.OnOpponentScoreUpdated(t,e)},e.prototype.OnSelfPlayerDataUpdated=function(t){this.playerData=t,this.gameUIScript.OnSelfPlayerDataUpdated(t)},e.prototype.OnOpponentsReady=function(){this.startGame()},e.prototype.MP_Host_AssignNetworkedNodes=function(){return this.gameControllerScript.MP_Host_AssignNetworkedNodes()},e.prototype.MP_Client_AssignNetworkNodes=function(t){this.gameControllerScript.MP_Client_AssignNetworkNodes(t)},e.prototype.MP_OnInitializeNetworkedNode=function(t){return this.gameControllerScript.MP_OnInitializeNetworkedNode(t)},e.prototype.receive_command_KEY_NETWORK_NODE_REQUEST_DESTROY=function(t){this.gameControllerScript.receive_command_KEY_NETWORK_NODE_REQUEST_DESTROY(t)},e.prototype.receive_command_INITIALIZE_GAME_WORLD_ON_COOLDOWN=function(t){this.gameControllerScript.ReceiveCommandInitializeGameWorlOnCooldown(t)},e.prototype.onLoad=function(){t.prototype.onLoad.call(this),cc.game.setFrameRate(60),o.instance=this},e.prototype.start=function(){this.gameControllerScript.setDefault(),c.default.getInstance().isSinglePlayer()?this.gameUIScript.showOffOpponentUI():this.gameControllerScript.showCooldownWaitingForOpponent(!0),c.default.getInstance().readyToStartGame()},e.prototype.startGame=function(){return r(this,void 0,void 0,function(){return s(this,function(t){switch(t.label){case 0:return this.gameControllerScript.showCooldownWaitingForOpponent(!1),[4,Promise.all([this.gameControllerScript.showCooldownToStart(),this.InitializeGameWorld()])];case 1:return t.sent(),this.gameControllerScript.startGame(),[2]}})})},e.prototype.InitializeGameWorld=function(){return r(this,void 0,void 0,function(){var t;return s(this,function(e){return null!=(t=this.gameControllerScript.InitializeGameWorldOnCooldown())&&c.default.getInstance().send_command_INITIALIZE_GAME_WORLD_ON_COOLDOWN(t),[2]})})},e.prototype.triggerGameOver=function(){return r(this,void 0,void 0,function(){return s(this,function(t){switch(t.label){case 0:return[4,this.gameUIScript.showTimerUp()];case 1:return t.sent(),[4,this.gameControllerScript.afterTimeUpEvent()];case 2:return t.sent(),c.default.getInstance().triggerGameOver(),c.default.getInstance().isSinglePlayer()||this.gameUIScript.showWait4OpponentEndGame(),[2]}})})},e.prototype.updatePlayerScore=function(t){this.gameUIScript.updatePlayerScore(t),c.default.getInstance().sendCurrentScore(t)},e.prototype.PauseGame=function(){this.gameControllerScript.pauseGame()},e.prototype.ResumeGame=function(){this.gameControllerScript.resumeGame()},e.instance=null,i([d],e.prototype,"host",void 0),i([d(l.default)],e.prototype,"gameControllerScript",void 0),i([d(u.default)],e.prototype,"gameUIScript",void 0),e=o=i([h],e)}(a.default);o.default=f,cc._RF.pop()},{"../sdk/ISDKHandler":"ISDKHandler","../sdk/SdkFunctions":"SdkFunctions","./HCG_GameController":"HCG_GameController","./HCG_UIController":"HCG_UIController"}],HCG_ScoreComboSound:[function(t,e,o){"use strict";cc._RF.push(e,"a38ddsByg1KF6dih4lNx6hi","HCG_ScoreComboSound");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(s=(r<3?i(s):r>3?i(e,o,s):i(e,o))||s);return r>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0}),o.SoundComboSetting=void 0;var r=cc._decorator,s=r.ccclass,a=r.property,c=function(){function t(){this.cap=0,this.audioClip=null}return i([a()],t.prototype,"cap",void 0),i([a(cc.AudioClip)],t.prototype,"audioClip",void 0),t=i([s("SoundComboSetting")],t)}();o.SoundComboSetting=c;var l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.soundSetting=new Array,e}var o;return n(e,t),o=e,e.prototype.onLoad=function(){o.instance=this},e.prototype.getSoundByNumber=function(t){for(var e=0;e<this.soundSetting.length;e++){var o=this.soundSetting[e];if(!(t>o.cap))return o.audioClip;if(e==this.soundSetting.length-1)return o.audioClip}},e.prototype.PlaySoundCombo=function(t){cc.audioEngine.playEffect(this.getSoundByNumber(t),!1)},e.instance=null,i([a({type:c})],e.prototype,"soundSetting",void 0),e=o=i([s],e)}(cc.Component);o.default=l,cc._RF.pop()},{}],HCG_ScoreController:[function(t,e,o){"use strict";cc._RF.push(e,"77c26AoELtJcYn2bu5DS5tF","HCG_ScoreController");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(s=(r<3?i(s):r>3?i(e,o,s):i(e,o))||s);return r>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0}),o.TimeComboSetting=void 0;var r=t("../utilities/Utils"),s=t("./HCG_GameManager"),a=t("./HCG_ScoreComboSound"),c=cc._decorator,l=c.ccclass,u=c.property,p=function(){function t(){this.cap=0,this.duration=0}return i([u()],t.prototype,"cap",void 0),i([u()],t.prototype,"duration",void 0),t=i([l("TimeComboSetting")],t)}();o.TimeComboSetting=p;var h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.combo=0,e.score=0,e.scorePrefab=null,e.nodeCombo=null,e.comboText=null,e.comboValueLabel=null,e.scoreContainer=[],e.tempNum=0,e.addScoreDefault=1,e.addScoreByCombo=1,e.isChangeComboTextColor=!1,e.comboColors=[],e.isHaveCountDown=!1,e.comboTimerBar=null,e.isUsingCustomCountdown=!1,e.timeCombo=-1,e.timeComboSetting=new Array,e.timeLeft=-1,e.interval=.1,e.callback=function(){this.timeLeft-=this.interval;var t=this.timeLeft/this.timeCombo;this.adjustSlider(t),this.timeLeft<0&&(this.combo=0,this.nodeCombo.active=!1,this.unschedule(this.callback))},e.colorGetScore=cc.Color.GREEN,e.colorDecreaseScore=cc.Color.RED,e.isCustomTween=!1,e}var o;return n(e,t),o=e,e.prototype.onLoad=function(){o.instance=this},e.prototype.start=function(){this.nodeCombo.active=!1},e.prototype.caculatorScore=function(t){1==t?this.addScore():this.deductScore(),s.default.instance.updatePlayerScore(this.score),a.default.instance.PlaySoundCombo(this.combo)},e.prototype.addScore=function(){this.combo++;var t=this.addScoreDefault+(this.combo-1)*this.addScoreByCombo;if(this.score+=t,1==this.isHaveCountDown&&this.combo>1&&(this.comboTimerBar.node.active=!0,this.unschedule(this.callback),1==this.isUsingCustomCountdown?this.timeLeft=this.getComboDurationByComboNumber(this.combo):this.timeLeft=this.timeCombo,this.schedule(this.callback,this.interval)),this.comboValueLabel.string=this.combo.toString(),1==this.isChangeComboTextColor){var e=r.default.random(0,this.comboColors.length-1);this.comboValueLabel.node.color=this.comboColors[e],this.comboText.node.color=this.comboColors[e]}this.nodeCombo.active=this.combo>=2,this.combo>=2&&cc.tween(this.nodeCombo).to(0,{opacity:255}).to(.25,{scale:1.2}).to(.25,{scale:1}).start(),this.showScoreDisplay(t)},e.prototype.adjustSlider=function(t){this.comboTimerBar.progress=t},e.prototype.deductScore=function(){this.combo=0,this.score-=this.addScoreDefault,this.score<0&&(this.score=0),this.nodeCombo.active=!1;var t=-this.addScoreDefault;this.showScoreDisplay(t)},e.prototype.addManual=function(t,e){void 0===e&&(e=null),this.score+=t,s.default.instance.updatePlayerScore(this.score),this.showScoreDisplay(t,e)},e.prototype.updateScore=function(t){this.score=t,s.default.instance.updatePlayerScore(this.score)},e.prototype.customColor=function(t,e){null!=t&&(this.colorGetScore=t),null!=e&&(this.colorDecreaseScore=e)},e.prototype.customTween=function(t){this.isCustomTween=!0,this._customTween=t},e.prototype.customPlayEffectShowScore=function(t){this._customTween.clone(t).start()},e.prototype.showScoreDisplay=function(t,e){void 0===e&&(e=null);var o=cc.instantiate(this.scorePrefab);t<0?(o.color=this.colorDecreaseScore,o.getComponent(cc.Label).string=t.toString()):(o.color=this.colorGetScore,o.getComponent(cc.Label).string="+"+t.toString()),null!=e?o.setParent(e):o.setParent(this.scoreContainer[r.default.random(0,this.scoreContainer.length-1)]),this.tempNum++,1==this.isCustomTween?this.customPlayEffectShowScore(o):cc.tween(o).by(.5,{position:cc.v3(0,80)}).then(cc.fadeOut(.5)).removeSelf().start()},e.prototype.getComboDurationByComboNumber=function(t){for(var e=0;e<this.timeComboSetting.length;e++){var o=this.timeComboSetting[e];if(!(t>o.cap))return o.duration;if(e==this.timeComboSetting.length-1)return o.duration}},e.instance=null,i([u(cc.Prefab)],e.prototype,"scorePrefab",void 0),i([u(cc.Node)],e.prototype,"nodeCombo",void 0),i([u(cc.Label)],e.prototype,"comboText",void 0),i([u(cc.Label)],e.prototype,"comboValueLabel",void 0),i([u(cc.Node)],e.prototype,"scoreContainer",void 0),i([u],e.prototype,"addScoreDefault",void 0),i([u],e.prototype,"addScoreByCombo",void 0),i([u],e.prototype,"isChangeComboTextColor",void 0),i([u({type:cc.Color,visible:function(){return this.isChangeComboTextColor}})],e.prototype,"comboColors",void 0),i([u],e.prototype,"isHaveCountDown",void 0),i([u({type:cc.ProgressBar,visible:function(){return this.isHaveCountDown}})],e.prototype,"comboTimerBar",void 0),i([u],e.prototype,"isUsingCustomCountdown",void 0),i([u({visible:function(){return this.isHaveCountDown&&!this.isUsingCustomCountdown}})],e.prototype,"timeCombo",void 0),i([u({type:p,visible:function(){return this.isHaveCountDown&&this.isUsingCustomCountdown}})],e.prototype,"timeComboSetting",void 0),e=o=i([l],e)}(cc.Component);o.default=h,cc._RF.pop()},{"../utilities/Utils":"Utils","./HCG_GameManager":"HCG_GameManager","./HCG_ScoreComboSound":"HCG_ScoreComboSound"}],HCG_UIController:[function(t,e,o){"use strict";cc._RF.push(e,"8e4e987TgZFc5K9Bs3KgooC","HCG_UIController");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(s=(r<3?i(s):r>3?i(e,o,s):i(e,o))||s);return r>3&&s&&Object.defineProperty(e,o,s),s},r=this&&this.__awaiter||function(t,e,o,n){function i(t){return t instanceof o?t:new o(function(e){e(t)})}return new(o||(o=Promise))(function(o,r){function s(t){try{c(n.next(t))}catch(t){r(t)}}function a(t){try{c(n.throw(t))}catch(t){r(t)}}function c(t){t.done?o(t.value):i(t.value).then(s,a)}c((n=n.apply(t,e||[])).next())})},s=this&&this.__generator||function(t,e){var o,n,i,r,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function a(t){return function(e){return c([t,e])}}function c(r){if(o)throw new TypeError("Generator is already executing.");for(;s;)try{if(o=1,n&&(i=2&r[0]?n.return:r[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,r[1])).done)return i;switch(n=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return s.label++,{value:r[1],done:!1};case 5:s.label++,n=r[1],r=[0];continue;case 7:r=s.ops.pop(),s.trys.pop();continue;default:if(!(i=(i=s.trys).length>0&&i[i.length-1])&&(6===r[0]||2===r[0])){s=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){s.label=r[1];break}if(6===r[0]&&s.label<i[1]){s.label=i[1],i=r;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(r);break}i[2]&&s.ops.pop(),s.trys.pop();continue}r=e.call(t,s)}catch(t){r=[6,t],n=0}finally{o=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0});var a=t("../sdk/SdkFunctions"),c=t("../utilities/Utils"),l=t("./HCG_CountdownToStart"),u=cc._decorator,p=u.ccclass,h=u.property,d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.playerNameLabel=null,e.playerScoreLabel=null,e.playerAvatar=null,e.opponentNameLabel=null,e.opponentScoreLabel=null,e.opponentAvatar=null,e.timerLabel=null,e.nodeWaittingForOpponent=null,e.waitingCooldown=null,e.nodeTimeUp=null,e.label_timeUpUI=null,e.nodeWait4OpponentEndGame=null,e.nodeCountDownToStart=null,e}var o;return n(e,t),o=e,e.getInstance=function(){return this._instance},e.prototype.onLoad=function(){o._instance=this,null!=this.waitingCooldown&&(this.waitingCooldown.string="")},e.prototype.OnOpponentUpdated=function(t){this.opponentNameLabel.string=t.firstName,t.avatar&&t.avatar.link&&c.default.loadImageFromURL(this.opponentAvatar,t.avatar.link,this.opponentAvatar.node.parent),this.opponentAvatar.node.on(cc.Node.EventType.TOUCH_START,function(){a.default.getInstance().showOpponentProfile(t.id)},this)},e.prototype.OnOpponentScoreUpdated=function(t,e){this.opponentScoreLabel.string=e.toString()},e.prototype.OnSelfPlayerDataUpdated=function(t){this.playerNameLabel.string=t.firstName,t.avatar&&t.avatar.link&&c.default.loadImageFromURL(this.playerAvatar,t.avatar.link,this.playerAvatar.node.parent)},e.prototype.updatePlayerScore=function(t){this.playerScoreLabel.string=t.toString()},e.prototype.showOffOpponentUI=function(){this.opponentNameLabel.node.active=!1,this.opponentScoreLabel.node.active=!1,this.opponentAvatar.node.active=!1},e.prototype.showCountdown2Start=function(){return r(this,void 0,void 0,function(){return s(this,function(t){switch(t.label){case 0:return null==this.nodeCountDownToStart?[2]:null==this.nodeCountDownToStart?[3,2]:[4,this.nodeCountDownToStart.playCountdown()];case 1:t.sent(),t.label=2;case 2:return[2]}})})},e.prototype.showCooldownWaitingForOpponent=function(t){null!=this.nodeWaittingForOpponent&&(this.nodeWaittingForOpponent.active=t,null!=this.waitingCooldown&&(1==t?(this.waitingCooldown.node.active=!0,this.schedule(this.cooldownWaitingOpponent,1)):(this.waitingCooldown.node.active=!1,a.default.getInstance().RemainLoadingTime()>0&&this.unschedule(this.cooldownWaitingOpponent))))},e.prototype.cooldownWaitingOpponent=function(){this.waitingCooldown.string=a.default.getInstance().RemainLoadingTime()+"s",a.default.getInstance().RemainLoadingTime()<=0&&this.unschedule(this.cooldownWaitingOpponent)},e.prototype.showTimerUp=function(){return r(this,void 0,void 0,function(){var t=this;return s(this,function(e){return null==this.nodeTimeUp||null==this.label_timeUpUI?[2]:[2,new Promise(function(e,o){t.nodeTimeUp.active=!0,cc.tween(t.label_timeUpUI.node).to(.25,{scale:1.2,angle:10}).to(.5,{scale:.8,angle:-10}).to(.25,{scale:1,angle:0}).delay(.5).call(function(){t.nodeTimeUp.active=!1,e("done")}).start()})]})})},e.prototype.showWait4OpponentEndGame=function(){null!=this.nodeWait4OpponentEndGame&&(this.nodeWait4OpponentEndGame.active=!0)},e.prototype.updateTimerLabel=function(t){this.timerLabel.string=c.default.secondToMinute(t)},e._instance=null,i([h(cc.Label)],e.prototype,"playerNameLabel",void 0),i([h(cc.Label)],e.prototype,"playerScoreLabel",void 0),i([h(cc.Sprite)],e.prototype,"playerAvatar",void 0),i([h(cc.Label)],e.prototype,"opponentNameLabel",void 0),i([h(cc.Label)],e.prototype,"opponentScoreLabel",void 0),i([h(cc.Sprite)],e.prototype,"opponentAvatar",void 0),i([h(cc.Label)],e.prototype,"timerLabel",void 0),i([h(cc.Node)],e.prototype,"nodeWaittingForOpponent",void 0),i([h(cc.Label)],e.prototype,"waitingCooldown",void 0),i([h(cc.Node)],e.prototype,"nodeTimeUp",void 0),i([h(cc.Label)],e.prototype,"label_timeUpUI",void 0),i([h(cc.Node)],e.prototype,"nodeWait4OpponentEndGame",void 0),i([h(l.default)],e.prototype,"nodeCountDownToStart",void 0),e=o=i([p],e)}(cc.Component);o.default=d,cc._RF.pop()},{"../sdk/SdkFunctions":"SdkFunctions","../utilities/Utils":"Utils","./HCG_CountdownToStart":"HCG_CountdownToStart"}],HelpController:[function(t,e,o){"use strict";cc._RF.push(e,"54123GjlthPW7lMvzA9j7Vm","HelpController");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(s=(r<3?i(s):r>3?i(e,o,s):i(e,o))||s);return r>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var r=t("../Sound/SoundManager"),s=t("../UI/HCG_GameManager"),a=cc._decorator,c=a.ccclass,l=a.property,u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.helpPanel=null,e.openButton=null,e.closeButton1=null,e.closeButton2=null,e.pauseGameOnSingle=!0,e._isOpen=!1,e}var o;return n(e,t),o=e,e.getInstance=function(){return this._instance},e.prototype.isOpen=function(){return this._isOpen},e.prototype.onLoad=function(){o._instance=this,this._isOpen=!1,this.helpPanel.active=!1;var t=new cc.Component.EventHandler;t.target=this.node,t.component="HelpController",t.handler="onClickClose",this.closeButton1.clickEvents.push(t),this.closeButton2.clickEvents.push(t);var e=new cc.Component.EventHandler;e.target=this.node,e.component="HelpController",e.handler="onClickOpen",this.openButton.clickEvents.push(e)},e.prototype.onDestroy=function(){this.closeButton1.clickEvents.slice(0,this.closeButton1.clickEvents.length),this.closeButton2.clickEvents.slice(0,this.closeButton2.clickEvents.length),this.openButton.clickEvents.slice(0,this.openButton.clickEvents.length)},e.prototype.onClickOpen=function(){var t=this;this._isOpen=!0,this.helpPanel.active=!0,this.helpPanel.opacity=0,this.helpPanel.scale=0,r.default.getInstance().PlayButtonSFX(),cc.tween(this.helpPanel).parallel(cc.tween(this.helpPanel).to(.1,{opacity:255}),cc.tween(this.helpPanel).to(.1,{scale:1},{easing:"backOut"})).delay(.2).call(function(){t.pauseGameOnSingle&&1==gpSDK.isSinglePlayer()&&s.default.instance.PauseGame(),null!=t.onHelpOpenOrClose&&t.onHelpOpenOrClose(!0)}).start()},e.prototype.onClickClose=function(){this._isOpen=!1,this.helpPanel.stopAllActions(),this.helpPanel.active=!1,r.default.getInstance().PlayButtonSFX(),this.pauseGameOnSingle&&1==gpSDK.isSinglePlayer()&&s.default.instance.ResumeGame(),null!=this.onHelpOpenOrClose&&this.onHelpOpenOrClose(!1)},e._instance=null,i([l(cc.Node)],e.prototype,"helpPanel",void 0),i([l(cc.Button)],e.prototype,"openButton",void 0),i([l(cc.Button)],e.prototype,"closeButton1",void 0),i([l(cc.Button)],e.prototype,"closeButton2",void 0),i([l],e.prototype,"pauseGameOnSingle",void 0),e=o=i([c],e)}(cc.Component);o.default=u,cc._RF.pop()},{"../Sound/SoundManager":"SoundManager","../UI/HCG_GameManager":"HCG_GameManager"}],ISDKHandler:[function(t,e,o){"use strict";cc._RF.push(e,"4d5b3Lqox9HKa8Df0zZ+7YH","ISDKHandler");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(s=(r<3?i(s):r>3?i(e,o,s):i(e,o))||s);return r>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var r=t("./SDKEngine"),s=t("./SdkFunctions"),a=cc._decorator,c=a.ccclass,l=a.property,u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.engine=null,e}return n(e,t),e.prototype.onLoad=function(){null!=this.engine&&r.default.setInstance(this.engine),console.log("@@=> [ISDKHandler] register sdk!"),s.default.getInstance().setSDKHandler(this)},e.prototype.OnSelfPlayerDataUpdated=function(t){console.log("OnSelfPlayerDataUpdated(playerData) not overridden")},e.prototype.OnOpponentUpdated=function(t){console.log("OnOpponentUpdated(opponent) not overridden")},e.prototype.OnOpponentScoreUpdated=function(t,e){console.log("OnOpponentScoreUpdated(opponentID, opponentScore:number) not overridden")},e.prototype.OnFinalScoreUpdated=function(){console.log("OnSelfPlayerDataUpdated() not overridden")},e.prototype.OnOpponentsReady=function(){console.log("OnOpponentsReady() not overridden")},e.prototype.MP_Host_AssignNetworkedNodes=function(){return console.log("MP_Host_AssignNetworkedNode() not overridden"),[]},e.prototype.MP_Client_AssignNetworkNodes=function(t){console.log("MP_Client_AssignNetworkNodes() not overridden")},e.prototype.MP_OnInitializeNetworkedNode=function(t){return console.log("MP_OnInitializeNetworkedNode(prefabName:string) not overridden"),null},e.prototype.receive_command_KEY_NETWORK_NODE_REQUEST_DESTROY=function(t){console.log("receive_command_KEY_NETWORK_NODE_REQUEST_DESTROY(prefabName:string) not overridden")},e.prototype.receive_command_INITIALIZE_GAME_WORLD_ON_COOLDOWN=function(t){},i([l(r.default)],e.prototype,"engine",void 0),e=i([c],e)}(cc.Component);o.default=u,cc._RF.pop()},{"./SDKEngine":"SDKEngine","./SdkFunctions":"SdkFunctions"}],InstantEffect:[function(t,e,o){"use strict";cc._RF.push(e,"6963bK9TbRERJsrnZY+6aWW","InstantEffect"),Object.defineProperty(o,"__esModule",{value:!0}),o.InstantEffect=void 0;var n=t("./BuffManagerBase"),i=function(){function t(t){this.Index=n.default.generateId(),this.Owner=t}return t.prototype.apply=function(){return this.doApply(),!0},t}();o.InstantEffect=i,cc._RF.pop()},{"./BuffManagerBase":"BuffManagerBase"}],LBPositionConverter:[function(t,e,o){"use strict";cc._RF.push(e,"5f932n618xN44hAmTmw9N3G","LBPositionConverter"),Object.defineProperty(o,"__esModule",{value:!0});var n=function(){function t(t,e){this._cSize=new cc.Vec2(t.x,t.y),this._cAnchor=new cc.Vec2(e.x,e.y)}return t.prototype.toLBPos=function(t){return new cc.Vec2(t.x+this._cAnchor.x*this._cSize.x,t.y+this._cAnchor.y*this._cSize.y)},t.prototype.toAnchorPos=function(t){return new cc.Vec2(t.x-this._cAnchor.x*this._cSize.x,t.y-this._cAnchor.y*this._cSize.y)},t}();o.default=n,cc._RF.pop()},{}],Lighting:[function(t,e,o){"use strict";cc._RF.push(e,"995e0Lj2YhOoaQPoYw4RHUc","Lighting");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(s=(r<3?i(s):r>3?i(e,o,s):i(e,o))||s);return r>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var r=cc._decorator,s=r.ccclass,a=(r.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.prototype.onLoad=function(){this.police=this.node.parent.getComponent("Police")},e.prototype.onCollisionEnter=function(t,e){1!=this.police.gameManager.isPlayerInsideSafeVanArea()&&"player"==t.node.group&&this.police.chasePlayer(!1,!0)},e=i([s],e)}(cc.Component));o.default=a,cc._RF.pop()},{}],MapExtensions:[function(t,e,o){"use strict";cc._RF.push(e,"8a2c0teoF5EUKf6G5JgpaRn","MapExtensions"),Map.prototype.getRandomKey=function(){for(var t=Math.floor(Math.random()*this.size),e=0,o=0,n=this.keys();o<n.length;o++){var i=n[o];if(e++===t)return i}},Map.prototype.getRandomValue=function(){for(var t=Math.floor(Math.random()*this.size),e=0,o=0,n=this.values();o<n.length;o++){var i=n[o];if(e++===t)return console.log("random"),i}},Map.prototype.convertValuesToSet=function(){var t=new Set;return this.forEach(function(e){t.add(e)}),t},Map.prototype.getRandomKey_Old=function(){return Array.from(this.keys()).getRandom()},Map.prototype.getRandomValue_Old=function(){return Array.from(this.values()).getRandom()},cc._RF.pop()},{}],MathExtensions:[function(t,e,o){"use strict";cc._RF.push(e,"4d0f50aNr1I/Kc95SdwTi4L","MathExtensions"),Math.randomArb=function(t,e){return Math.random()*(e-t)+t},Math.randomInt=function(t,e){return t=Math.ceil(t),e=Math.floor(e),Math.floor(Math.random()*(e-t))+t},Math.randomIntIncl=function(t,e){return t=Math.ceil(t),e=Math.floor(e),Math.floor(Math.random()*(e-t+1))+t},Math.flipCoin=function(){return Math.random()>.5},Math.clamp=function(t,e,o){return t<=e?e:t>=o?o:t},cc._RF.pop()},{}],NetTransfer:[function(t,e,o){"use strict";cc._RF.push(e,"e60d3DbrXxNvIkW6yg8z+wm","NetTransfer"),Object.defineProperty(o,"__esModule",{value:!0});var n=t("../hcg-core/sdk/SdkFunctions"),i=function(){function t(){this._gameManager=null,this._sdkFunction=null,this._sdkFunction=n.default.getInstance()}return t.getInstance=function(){return null==this._instance&&(this._instance=new t),this._instance},t.initialize=function(e){t.getInstance()._gameManager=e},t}();o.default=i,cc._RF.pop()},{"../hcg-core/sdk/SdkFunctions":"SdkFunctions"}],NetworkedNode:[function(t,e,o){"use strict";cc._RF.push(e,"27b1f+hPgJEor109iSkusUM","NetworkedNode");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}();Object.defineProperty(o,"__esModule",{value:!0});var i=t("../utilities/Utils"),r=t("./SdkFunctions"),s=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._minUpdateInterval=-1,e._timeSinceLastFrame=e._minUpdateInterval,e.syncedVariables=["networkedNodeID","ownerID"],e.previousWatchedVariableValues=new Map,e._lastUpdatedTimestamp=0,e._changeDetected=!1,e}return n(e,t),e.prototype.getPrefabNameKey=function(){return this.node.name},e.prototype.generateNetworkID=function(){this.networkedNodeID||(this.setNetworkID(i.default.generateUUID()),this.assignOwnerID(r.default.getInstance().myPlayerId()))},e.prototype.assignOwnerID=function(t){this.ownerID=t},e.prototype.setNetworkID=function(t){null!=t?(this.networkedNodeID=t,r.default.getInstance().addNetworkNode(this)):(r.default.getInstance().removeNetworkNode(this),this.networkedNodeID=null)},e.prototype.addSyncedVariables=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var o=0,n=t;o<n.length;o++){var i=n[o];this.syncedVariables.push(i)}},e.prototype.convertToData=function(){for(var t={},e=0,o=this.syncedVariables;e<o.length;e++){var n=o[e];t[n]=this.getNodeValue(n),this.previousWatchedVariableValues.has(n)&&this.previousWatchedVariableValues.get(n)==t[n]||(this.previousWatchedVariableValues.set(n,t[n]),this._changeDetected=!0)}return t},e.prototype.updateData=function(){var t=this.convertToData();this._changeDetected&&(this._changeDetected=!1,r.default.getInstance().send_command_NETWORK_NODE_DATA_CHANGED(this,t))},e.prototype.reassignNodeOwner=function(t){if(this.ownerID!=t&&r.default.getInstance().myPlayerId()==this.ownerID||r.default.getInstance().isHost){this.ownerID=t;var e=this.convertToData();r.default.getInstance().send_command_NETWORK_NODE_REASSIGN_OWNER(this,e)}},e.prototype.updateFromData=function(t,e){this._lastUpdatedTimestamp<e?(this._lastUpdatedTimestamp=e,this.onDataReceivedImpl(t)):console.log("@@=> update rejected by time, "+e)},e.prototype.getNodeValue=function(t,e){return void 0===e&&(e=this),t.includes(".")?this.getNodeValue(t.substr(t.indexOf(".")+1),e[t.substr(0,t.indexOf("."))]):e[t]},e.prototype.isSelfOwnNode=function(){return!!this.ownerID&&this.ownerID==r.default.getInstance().myPlayerId()},e.prototype.update=function(t){this._minUpdateInterval>=0&&this.isSelfOwnNode()&&(this._timeSinceLastFrame-=t,this._timeSinceLastFrame<0&&(this._timeSinceLastFrame=this._minUpdateInterval,this.updateData()))},e.prototype.destroyNode=function(){1==this.hasAuthority()&&(r.default.getInstance().send_command_NETWORK_NODE_DESTROY(this),this.setNetworkID(null),this.assignOwnerID(null),this.node.destroy())},e.prototype.destroyOrSendDestroyNodeRequest=function(){1==this.hasAuthority()?this.destroyNode():r.default.getInstance().send_command_KEY_NETWORK_NODE_REQUEST_DESTROY(this)},e.prototype.hasAuthority=function(){return 1==r.default.getInstance().isHost()||this.ownerID==r.default.getInstance().myPlayerId()},e}(cc.Component);o.default=s,cc._RF.pop()},{"../utilities/Utils":"Utils","./SdkFunctions":"SdkFunctions"}],PesudoRandom:[function(t,e,o){"use strict";cc._RF.push(e,"d6f8d1UUrlLgLBY3T5r8D4I","PesudoRandom"),Object.defineProperty(o,"__esModule",{value:!0});var n=function(){function t(t){this._seed=Math.floor(t),this._seed<=0&&(this._seed+=2147483646)}return Object.defineProperty(t.prototype,"Seed",{get:function(){return this._seed},enumerable:!1,configurable:!0}),t.prototype.next=function(){return this._seed=16807*this._seed%2147483647},t.prototype.nextFloat=function(){return(this.next()-1)/2147483646},t.prototype.rangeInt=function(t,e){return Math.floor(this.nextFloat()*Math.floor(e-t))+t},t.prototype.rangeFloat=function(t,e){return this.nextFloat()*(e-t)+t},t.prototype.getRandomEnum=function(t){var e=Object.keys(t).length;return this.rangeInt(0,e)},t}();o.default=n,cc._RF.pop()},{}],PlayerEmoticons:[function(t,e,o){"use strict";cc._RF.push(e,"38d6dXnICxGaI+iUhv7066t","PlayerEmoticons");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(s=(r<3?i(s):r>3?i(e,o,s):i(e,o))||s);return r>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var r=cc._decorator,s=r.ccclass,a=r.property,c=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.emoticonBox=null,e.emoticons=new Array,e.timeToKeep=2,e.tweenBox=null,e.tweenEmoji=null,e}return n(e,t),e.prototype.start=function(){this.emoticons.forEach(function(t){t.opacity=0,t.active=!0,t.getComponent(cc.Widget).enabled=!1,t.setPosition(cc.v2(0,5))})},e.prototype.showEmoticon=function(t){var e=this;if(null!=t&&!(t<0||t>=this.emoticons.length)){null!=this.tweenBox&&this.tweenBox.stop(),null!=this.tweenEmoji&&this.tweenEmoji.stop();for(var o=function(){var o=n.emoticons[i];i!=t&&0!=o.opacity&&(o.opacity=0),i==t&&(o.scale=0,o.opacity=0,n.emoticonBox.active=!0,n.emoticonBox.opacity=0,n.emoticonBox.scale=0,n.tweenBox=cc.tween(n.emoticonBox).parallel(cc.tween(n.emoticonBox).to(.3,{opacity:255}),cc.tween(n.emoticonBox).to(.3,{scale:1},{easing:"backOut"})).delay(.8+n.timeToKeep).call(function(){cc.tween(e.emoticonBox).to(.3,{opacity:0}).delay(.3).call(function(){return e.emoticonBox.active=!1}).start()}).start(),n.tweenEmoji=cc.tween(o).delay(.5).parallel(cc.tween(o).to(.3,{opacity:255}),cc.tween(o).to(.3,{scale:1},{easing:"backOut"})).delay(n.timeToKeep).call(function(){cc.tween(o).to(.3,{opacity:0}).delay(.3).call(function(){return o.opacity=0}).start()}).start())},n=this,i=0;i<this.emoticons.length;i++)o()}},i([a(cc.Node)],e.prototype,"emoticonBox",void 0),i([a([cc.Node])],e.prototype,"emoticons",void 0),i([a],e.prototype,"timeToKeep",void 0),e=i([s],e)}(cc.Component);o.default=c,cc._RF.pop()},{}],Player:[function(t,e,o){"use strict";cc._RF.push(e,"9f267zm7zVB1qtllZk6fYdC","Player");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(s=(r<3?i(s):r>3?i(e,o,s):i(e,o))||s);return r>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var r=t("../hcg-core/sdk/SdkFunctions"),s=t("../hcg-core/Sound/SoundManager"),a=t("../hcg-core/utilities/Utils"),c=cc._decorator,l=c.ccclass,u=c.property,p=cc.Class({name:"AudioPlayer",properties:{audioClip:{type:cc.AudioClip,default:null}}}),h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.spriteArray=[],e.audioArray=[],e.font=null,e.playerSpeed=0,e.bustedAnim=null,e.busted=!1,e.startGrabMoneyCount=-1,e.startGrabTime=-1,e.count=0,e.money=0,e.moveAngle=0,e.moneyTween=null,e.linearVelocity=cc.Vec2.ZERO,e.tempPos=cc.Vec3.ZERO,e}return n(e,t),e.prototype.onLoad=function(){this.gameManager=this.node.parent.parent.parent.getComponent("GameManager"),this.objectRb=this.node.getComponent("cc.RigidBody"),this.objectSprite=this.node.getComponent("cc.Sprite"),this.actionSprite=this.node.getChildByName("ActionSprite").getComponent("cc.Sprite"),this.moneyValue=this.node.getChildByName("MoneyValue").getComponent("cc.Label"),this.actionSprite.node.active=!1,this.moneyValue.node.active=!1,this.count=3,this.spawnAnimation()},e.prototype.spawnAnimation=function(){var t=this;cc.tween(this.node).to(.15,{opacity:0}).to(.15,{opacity:255}).call(function(){t.count-- >0&&t.spawnAnimation()}).start()},e.prototype.moneyAnimation=function(t,e){void 0===e&&(e=!1),cc.tween(t).by(.1,{position:cc.v2(0,100)}).by(.1,{position:cc.v2(0,-100)}).by(.1,{position:cc.v2(0,50)}).by(.1,{position:cc.v2(0,-50)}).call(function(){e?t.destroy():t.active=!1}).start()},e.prototype.prepareSprite=function(){var t=(360+180*this.moveAngle/Math.PI)%360;t>=157.5&&t<=202.5?(this.objectSprite.spriteFrame=this.spriteArray[0],this.node.scaleX=1):t>=22.5&&t<=67.5?(this.objectSprite.spriteFrame=this.spriteArray[1],this.node.scaleX=1):t>=292.5&&t<=337.5?(this.objectSprite.spriteFrame=this.spriteArray[1],this.node.scaleX=-1):t>=67.5&&t<=112.5?(this.objectSprite.spriteFrame=this.spriteArray[2],this.node.scaleX=1):t>=247.5&&t<=292.5?(this.objectSprite.spriteFrame=this.spriteArray[2],this.node.scaleX=-1):t>=112.5&&t<=157.5?(this.objectSprite.spriteFrame=this.spriteArray[3],this.node.scaleX=1):t>=202.5&&t<=247.5?(this.objectSprite.spriteFrame=this.spriteArray[3],this.node.scaleX=-1):(this.objectSprite.spriteFrame=this.spriteArray[4],this.node.scaleX=1),this.actionSprite.node.scaleX=this.node.scaleX,this.moneyValue.node.scaleX=this.node.scaleX},e.prototype.movePrepare=function(t){if(this.busted)this.linearVelocity=cc.v2(0,0);else{this.moveAngle=t,this.prepareSprite();var e=cc.v2(this.playerSpeed*Math.sin(this.moveAngle),this.playerSpeed*Math.cos(this.moveAngle));this.linearVelocity=cc.v2(e.x,e.y)}},e.prototype.moneyIn=function(){var t=this;if(!this.busted&&1==this.gameManager.gameStarted){this.gameManager.load=!0,this.moneyValue.node.active=!0,this.moneyValue.node.opacity=255,s.default.getInstance().playSound(this.audioArray[1].audioClip,!1),this.money=this.getMoney(),this.gameManager.tempMoneyChange(),this.moneyValue.string="$ "+this.money;var e=new cc.Node;this.node.addChild(e),e.scaleX=this.node.scaleX,e.position=cc.v2(0,100);var o=e.addComponent("cc.Label");o.string="+10",o.font=this.font,this.moneyAnimation(e,!0),this.moneyTween=cc.tween(this.node).delay(.1).call(function(){return t.moneyIn()}),this.moneyTween.start(),this.gameManager.setPoliceBoundary(!1)}},e.prototype.onBeginContact=function(t,e,o){var n=this;if("police"==o.node.group&&!this.busted){this.busted=!0,this.gameManager.setPoliceBoundary(!0),this.gameManager.busted(),s.default.getInstance().playSound(this.audioArray[0].audioClip,!1),this.actionSprite.spriteFrame=this.spriteArray[6],this.actionSprite.node.active=!0,this.actionSprite.node.opacity=255,this.linearVelocity=cc.v2(0,0);var i=this.money;if(this.money>0)this.money=this.getMoney(),this.bustedAnim.node.active=!0,this.bustedAnim.getState().setAnimation(0,"animation",!1);this.moneyTween&&this.moneyTween.stop(),this.startGrabTime=-1,this.startGrabMoneyCount=-1,cc.tween(this.node).delay(1).call(function(){n.money>0&&(n.gameManager.showBustedBanner(!0),cc.tween(n.node).delay(1).call(function(){n.gameManager.showBustedBanner(!1)}).start()),n.moveAngle=0,n.busted=!1,n.moneyValue.node.active=!1,n.money=0,n.actionSprite.node.active=!1,n.actionSprite.node.opacity=0,n.node.position=cc.Vec2.ZERO,n.gameManager.horizontal=0,n.gameManager.vertical=0,n.count=3,n.spawnAnimation(),n.gameManager.recorder.reSpawn(r.default.getInstance().getTick(),a.default.getSimpleWorldPosition(n.node))}).start(),this.gameManager.recorder.beBusted(r.default.getInstance().getTick(),a.default.getSimpleWorldPosition(this.node),i)}},e.prototype.onCollisionEnter=function(t,e){if("safe"==t.node.group&&(this.gameManager.chasePolice(),!this.busted&&1==this.gameManager.gameStarted)){this.startGrabTime=this.gameManager.elapsedTime,this.startGrabMoneyCount=this.money,this.moneyIn();var o="Safe01"==t.node.name?1:2;this.gameManager.recorder.startGrabMoney(r.default.getInstance().getTick(),a.default.getSimpleWorldPosition(this.node),o,this.money,this.gameManager.getRecordPolices())}if("van"==t.node.group&&this.money>0){this.moneyValue.node.active=!1;var n=this.money;this.gameManager.moneyIn(this.money),s.default.getInstance().playSound(this.audioArray[2].audioClip,!1),this.money=0,this.actionSprite.spriteFrame=this.spriteArray[5],this.actionSprite.node.active=!0,this.actionSprite.node.opacity=255,this.moneyAnimation(this.actionSprite.node),this.gameManager.setPoliceBoundary(!0),this.gameManager.recorder.moneyBackToVan(r.default.getInstance().getTick(),a.default.getSimpleWorldPosition(this.node),n,this.gameManager.gameScore)}},e.prototype.onCollisionExit=function(t,e){if("safe"==t.node.group&&0==this.busted&&(this.moneyTween&&this.moneyTween.stop(),-1!=this.startGrabTime)){this.money=this.getMoney(),this.gameManager.tempMoneyChange(),this.startGrabTime=-1,this.startGrabMoneyCount=-1;var o="Safe01"==t.node.name?1:2;this.gameManager.recorder.endGrabMoney(r.default.getInstance().getTick(),a.default.getSimpleWorldPosition(this.node),o,this.money,this.gameManager.getRecordPolices())}},e.prototype.getMoney=function(){if(-1==this.startGrabMoneyCount)return this.money;var t=this.gameManager.elapsedTime-this.startGrabTime;return this.startGrabMoneyCount+10*Math.floor(t/100)},e.prototype.update=function(t){0!=this.gameManager.gameStarted&&1!=this.gameManager.gameOver&&(this.tempPos=this.node.position,this.tempPos.x=this.tempPos.x+this.linearVelocity.x*t,this.tempPos.y=this.tempPos.y+this.linearVelocity.y*t,this.node.setPosition(this.tempPos),this.objectRb.linearVelocity=cc.Vec2.ZERO)},i([u([cc.SpriteFrame])],e.prototype,"spriteArray",void 0),i([u([p])],e.prototype,"audioArray",void 0),i([u(cc.Font)],e.prototype,"font",void 0),i([u],e.prototype,"playerSpeed",void 0),i([u(sp.Skeleton)],e.prototype,"bustedAnim",void 0),e=i([l],e)}(cc.Component);o.default=h,cc._RF.pop()},{"../hcg-core/Sound/SoundManager":"SoundManager","../hcg-core/sdk/SdkFunctions":"SdkFunctions","../hcg-core/utilities/Utils":"Utils"}],Police:[function(t,e,o){"use strict";cc._RF.push(e,"2e6533CtdNDeYcnKTra84yH","Police");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(s=(r<3?i(s):r>3?i(e,o,s):i(e,o))||s);return r>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var r=t("../hcg-core/Sound/SoundManager"),s=t("../hcg-core/utilities/Utils"),a=cc._decorator,c=a.ccclass,l=a.property,u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.spriteArray=[],e.policeSpeed=0,e.policeAlertSound=null,e.lock=!1,e.moveAngle=0,e.linearVelocity=cc.Vec2.ZERO,e.tempPos=cc.Vec3.ZERO,e}return n(e,t),e.prototype.onLoad=function(){this.gameManager=this.node.parent.parent.parent.getComponent("GameManager"),this.objectRb=this.node.getComponent("cc.RigidBody"),this.warning=this.node.getChildByName("Warning"),this.light=this.node.getChildByName("Light"),this.police=this.node.getChildByName("Sprite"),this.objectSprite=this.police.getComponent("cc.Sprite"),this.boundMin=cc.v2(this.gameManager.policeMin.x+this.node.width/2,this.gameManager.policeMin.y+this.node.height/2),this.boundMax=cc.v2(this.gameManager.policeMax.x-this.node.width/2,this.gameManager.policeMax.y-this.node.height/2)},e.prototype.prepare=function(t,e){var o;return o=null!=e?e:0==t?cc.v2(this.gameManager.randomGenerator(this.boundMax.x,this.boundMin.x),this.gameManager.randomGenerator(this.boundMax.y,this.boundMin.y)):cc.v2((this.boundMax.x+this.boundMin.x)/2,this.gameManager.randomGenerator(this.boundMax.y,this.boundMin.y)),this.node.setPosition(o),this.movePrepare(),o},e.prototype.prepareSprite=function(){var t=(360+180*this.moveAngle/Math.PI)%360;t>=157.5&&t<=202.5?(this.objectSprite.spriteFrame=this.spriteArray[0],this.node.scaleX=1):t>=22.5&&t<=67.5?(this.objectSprite.spriteFrame=this.spriteArray[1],this.node.scaleX=1):t>=292.5&&t<=337.5?(this.objectSprite.spriteFrame=this.spriteArray[1],this.node.scaleX=-1):t>=67.5&&t<=112.5?(this.objectSprite.spriteFrame=this.spriteArray[2],this.node.scaleX=1):t>=247.5&&t<=292.5?(this.objectSprite.spriteFrame=this.spriteArray[2],this.node.scaleX=-1):t>=112.5&&t<=157.5?(this.objectSprite.spriteFrame=this.spriteArray[3],this.node.scaleX=1):t>=202.5&&t<=247.5?(this.objectSprite.spriteFrame=this.spriteArray[3],this.node.scaleX=-1):(this.objectSprite.spriteFrame=this.spriteArray[4],this.node.scaleX=1),this.light.angle=-this.node.scaleX*this.moveAngle*180/Math.PI},e.prototype.movePrepare=function(){var t=this;this.node.stopAllActions(),this.moveAngle=2*Math.PI*Math.random(),this.prepareSprite(),this.lock=!1,this.warning.active=!1,this.light.active=!0,this.linearVelocity=cc.v2(this.policeSpeed*Math.sin(this.moveAngle),this.policeSpeed*Math.cos(this.moveAngle));var e=Math.random()+1;this.moveAction=this.node.runAction(cc.sequence(cc.delayTime(e),cc.callFunc(function(){return t.movePrepare()})))},e.prototype.chasePlayer=function(t,e){var o=this;if(void 0===t&&(t=!1),void 0===e&&(e=!1),!this.lock&&this.gameManager.activePlayer)if(this.gameManager.activePlayer.busted)this.movePrepare();else{t&&(this.node.stopAllActions(),this.moveAction=null),this.moveAction&&(this.node.stopAction(this.moveAction),this.moveAction=null),e&&(this.warning.active||r.default.getInstance().playSound(this.policeAlertSound,!1),t||this.stopChaseInterval(5));var n=this.node.parent.convertToNodeSpaceAR(this.gameManager.activePlayer.node.parent.convertToWorldSpaceAR(this.gameManager.activePlayer.node.position));this.smartChase(n),0==t&&(this.moveAction=this.node.runAction(cc.sequence(cc.delayTime(0),cc.callFunc(function(){return o.chasePlayer()}))))}},e.prototype.smartChase=function(t){this.moveAngle=Math.atan2(t.x-this.node.position.x,t.y-this.node.position.y),this.prepareSprite(),this.warning.active=!0,this.light.active=!1,this.linearVelocity=cc.v2(this.policeSpeed*Math.sin(this.moveAngle),this.policeSpeed*Math.cos(this.moveAngle))},e.prototype.stopChaseInterval=function(t){var e=this;this.node.runAction(cc.sequence(cc.delayTime(t),cc.callFunc(function(){e.movePrepare()})))},e.prototype.hitObstacle=function(t,e,o){var n=this;void 0===o&&(o=!1);var i=this.node.parent.convertToNodeSpaceAR(this.gameManager.activePlayer.node.parent.convertToWorldSpaceAR(this.gameManager.activePlayer.node.position));this.node.y>=t.y-e.y&&this.node.y<=t.y+e.y&&(this.node.x<t.x-e.x/2||this.node.x>=t.x+e.x/2)?this.node.y>=i.y?this.node.y>=i.x?this.linearVelocity=cc.v2(-this.policeSpeed,-this.policeSpeed):this.linearVelocity=cc.v2(this.policeSpeed,-this.policeSpeed):this.node.y>=i.x?this.linearVelocity=cc.v2(-this.policeSpeed,this.policeSpeed):this.linearVelocity=cc.v2(this.policeSpeed,this.policeSpeed):(this.node.y<t.y-e.y/2||this.node.y>=t.y+e.y/2)&&this.node.x>=t.x-e.x&&this.node.x<=t.x+e.x?this.node.x>=i.x?this.node.y>=i.y?this.linearVelocity=cc.v2(-this.policeSpeed,-this.policeSpeed):this.linearVelocity=cc.v2(-this.policeSpeed,this.policeSpeed):this.node.y>=i.y?this.linearVelocity=cc.v2(this.policeSpeed,-this.policeSpeed):this.linearVelocity=cc.v2(this.policeSpeed,this.policeSpeed):this.node.x>=i.x?this.linearVelocity=cc.v2(-this.policeSpeed,0):this.linearVelocity=cc.v2(this.policeSpeed,0),this.moveAction=this.node.runAction(cc.sequence(cc.delayTime(1),cc.callFunc(function(){return n.hitObstacle(t,e,o)})))},e.prototype.onBeginContact=function(t,e,o){"obstacle"==o.node.group&&"Up"!=o.node.name&&"Down"!=o.node.name&&"Left"!=o.node.name&&"Right"!=o.node.name&&"Police"!=o.node.name&&this.warning.active&&!this.lock&&(this.lock=!0,this.moveAction&&(this.node.stopAction(this.moveAction),this.moveAction=null),"obstacle"==o.node.group?this.hitObstacle(this.node.parent.convertToNodeSpaceAR(o.node.parent.convertToWorldSpaceAR(o.node.position)),cc.v2(o.node.width,o.node.height),!0):this.hitObstacle(this.node.parent.convertToNodeSpaceAR(o.node.parent.convertToWorldSpaceAR(o.node.position)),cc.v2(o.node.width,o.node.height)))},e.prototype.onEndContact=function(t,e,o){"obstacle"==o.node.group&&this.warning.active&&(this.moveAction&&(this.node.stopAction(this.moveAction),this.moveAction=null),this.lock=!1)},e.prototype.update=function(t){0!=this.gameManager.gameStarted&&1!=this.gameManager.gameOver&&(this.tempPos=this.node.position,this.tempPos.x=this.tempPos.x+this.linearVelocity.x*t,this.tempPos.y=this.tempPos.y+this.linearVelocity.y*t,this.node.setPosition(this.tempPos),this.objectRb.linearVelocity=cc.Vec2.ZERO)},e.prototype.getRecordPolice=function(){return{position:s.default.getSimpleWorldPosition(this.node),speed:this.policeSpeed,isChasing:!1}},i([l([cc.SpriteFrame])],e.prototype,"spriteArray",void 0),i([l],e.prototype,"policeSpeed",void 0),i([l(cc.AudioClip)],e.prototype,"policeAlertSound",void 0),e=i([c],e)}(cc.Component);o.default=u,cc._RF.pop()},{"../hcg-core/Sound/SoundManager":"SoundManager","../hcg-core/utilities/Utils":"Utils"}],PongMessage:[function(t,e,o){"use strict";cc._RF.push(e,"61b3dSPeYlPB6w4bU15ZJcJ","PongMessage"),Object.defineProperty(o,"__esModule",{value:!0});var n=function(){function t(t,e,o,n,i,r){var s=this;this.retryOnMiliseconds=-1,this.KEY_REQUEST=-1,this.KEY_ACCEPTED=-1,this.target_process_request=null,this.actor_done=null,this._acceptedPeers=new Array,this._accepted=!1,this._done=!1,this._hasBeenSent=!1,this._sdkFunction=null,this._sdkFunction=t,this.retryOnMiliseconds=e,this.KEY_REQUEST=o,this.KEY_ACCEPTED=n,this.target_process_request=i,this.actor_done=r,this._sdkFunction.registerEvent(this.KEY_REQUEST,function(t){return s.receive_command_KEY_REQUEST(t)}),this._sdkFunction.registerEvent(this.KEY_ACCEPTED,function(t){return s.receive_command_KEY_ACCEPTED(t)})}return t.prototype.sendPong=function(t){if(1!=this._hasBeenSent){this._hasBeenSent=!0;var e=Object.assign({},{pong:t});this.send(e)}},t.prototype.reset=function(){this._hasBeenSent=!1,this._accepted=!1,this._done=!1,this._acceptedPeers.splice(0,this._acceptedPeers.length)},t.prototype.send=function(t){var e=this;this._sdkFunction.sendP2PMessage(this.KEY_REQUEST,t),window.setTimeout(function(){e._acceptedPeers.length<e._sdkFunction.opponentCount()&&e.send(t)},this.retryOnMiliseconds)},t.prototype.receive_command_KEY_REQUEST=function(t){null!=t&&(0==this._accepted&&(this._accepted=!0,this.target_process_request(t.pong,t.netMetadata)),this._sdkFunction.sendP2PMessage(this.KEY_ACCEPTED,{}))},t.prototype.receive_command_KEY_ACCEPTED=function(t){null!=t&&(-1==this._acceptedPeers.indexOf(t.netMetadata.senderId)&&this._acceptedPeers.push(t.netMetadata.senderId),this._acceptedPeers.length==this._sdkFunction.opponentCount()&&0==this._done&&(this._done=!0,this.actor_done()))},t}();o.default=n,cc._RF.pop()},{}],RemoteEmoticon:[function(t,e,o){"use strict";cc._RF.push(e,"ee4d8kzNshCgrp6KdpMmf9Q","RemoteEmoticon");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(s=(r<3?i(s):r>3?i(e,o,s):i(e,o))||s);return r>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var r=t("./EmoticonController"),s=cc._decorator,a=s.ccclass,c=s.property,l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.iconIndex=0,e}return n(e,t),e.prototype.start=function(){var t=this;r.default.getInstance().onEmoticonLoaded(function(){var e=r.default.getInstance().getIconPrefab(t.iconIndex);if(null!=e){var o=cc.instantiate(e);o.setParent(t.node),o.setPosition(new cc.Vec2(0,0))}})},i([c],e.prototype,"iconIndex",void 0),e=i([a],e)}(cc.Component);o.default=l,cc._RF.pop()},{"./EmoticonController":"EmoticonController"}],SDKEngine:[function(t,e,o){"use strict";cc._RF.push(e,"c02c2lVKeBCfJS3C6xR7ZWH","SDKEngine");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(s=(r<3?i(s):r>3?i(e,o,s):i(e,o))||s);return r>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var r=cc._decorator,s=r.ccclass,a=(r.property,function(){return function(t,e){this.callback=null,this.timeOutMiliseconds=-1,this.registerTime=-1,this.callback=t,this.timeOutMiliseconds=e,this.registerTime=Date.now()}}()),c=function(){function t(e,o){this.Id=-1,this.callback=null,this.intervalMiliseconds=-1,this.registerTime=-1,this.lastInvokedAt=-1,this.Id=t._idGenerator++,this.callback=e,this.intervalMiliseconds=o,this.registerTime=Date.now(),this.lastInvokedAt=Date.now()}return t._idGenerator=0,t}(),l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._timeOutEvents=new Array,e._intervalEvents=new Array,e}var o;return n(e,t),o=e,e.getInstance=function(){return this._instance},e.setInstance=function(t){this._instance=t},e.prototype.onLoad=function(){o._instance=this},e.prototype.setTimeout=function(t,e){this._timeOutEvents.push(new a(t,e))},e.prototype.setInterval=function(t,e){var o=new c(t,e);return this._intervalEvents.push(o),o.Id},e.prototype.removeInterval=function(t){for(var e=this._intervalEvents.length-1;e>=0;e--)if(this._intervalEvents[e].Id==t)return void this._intervalEvents.splice(e,1)},e.prototype.update=function(t){if(this._timeOutEvents.length>0)for(var e=this._timeOutEvents.length-1;e>=0;e--)if(Date.now()-this._timeOutEvents[e].registerTime>=this._timeOutEvents[e].timeOutMiliseconds){var o=this._timeOutEvents[e];this._timeOutEvents.splice(e,1),o.callback()}if(this._intervalEvents.length>0)for(e=this._intervalEvents.length-1;e>=0;e--)Date.now()-this._intervalEvents[e].lastInvokedAt>=this._intervalEvents[e].intervalMiliseconds&&(this._intervalEvents[e].lastInvokedAt=this._intervalEvents[e].lastInvokedAt+this._intervalEvents[e].intervalMiliseconds,this._intervalEvents[e].callback())},e._instance=null,e=o=i([s],e)}(cc.Component);o.default=l,cc._RF.pop()},{}],SdkFunctions:[function(t,e,o){"use strict";cc._RF.push(e,"031c9DSFrdHTrPM0sH430qZ","SdkFunctions"),Object.defineProperty(o,"__esModule",{value:!0});var n=t("../utilities/PesudoRandom"),i=t("../utilities/Utils"),r=t("./PongMessage"),s=t("./SDKEngine"),a=function(){function t(){var e=this;this._sdk=null,this._myPlayerData=null,this._isSinglePlayer=!1,this._isAsyncPVP=!1,this._sdkHandler=null,this._aesKey=null,this._eventMap=new Map,this._bulkMessages=new Array,this._bulkReady=!1,this._bulkDelegate=null,this._isHandShakeFactor=!1,this._handShakeFactorId=null,this._handShakedPeers=new Array,this._doneHandShakePong=null,this._spawnDefaultNodesPong=null,this._cooldownPongMessage=null,this._sessionId=null,this._hostId=null,this._isHost=!1,this._isDoneHandShake=!1,this._initializeNetworkNodes=!1,this._isSelfHandShaked=!1,this._isStartedGame=!1,this._roundTripTimes=new Array,this._maxPingStorage=3,this._pingInterval=3e3,this._timerHandlerId=-1,this._hostLastTick=-1,this._startedPingInterval=!1,this._networkedNodes=new Map,this._initializeWorldPongMessage=null,s.default.getInstance();var o=this;this._sdk=gpSDK,this._isSinglePlayer=this._sdk.isSinglePlayer(),this._isAsyncPVP=this._sdk.isAsyncPVP();var a=null;if(this._sdk.goPlaySDK.getCurrentPlayer(function(t){a=t}),this._myPlayerData=a,1==this.isRealTimeMultiplayer()){for(var c=this.myPlayerId(),l=this.getAllPlayers(),u=0;u<l.length;u++)l[u]>c&&(c=l[u]);if(this._handShakeFactorId=c,this._isHandShakeFactor=this.myPlayerId()==this._handShakeFactorId,1==this._isHandShakeFactor){this._sessionId=i.default.generateUUID();var p=Math.randomInt(0,1e5),h=new n.default(p);this._hostId=l[h.rangeInt(0,l.length)],this._isHost=this.myPlayerId()==this._hostId}}else this._handShakeFactorId=this.myPlayerId(),this._isHandShakeFactor=!0,this._hostId=this.myPlayerId(),this._isHost=!0;console.log("@@=> [SDKFunctions] MatchType: "+this._sdk.goPlaySDK.matchType),console.log("@@=> [SDKFunctions] isSinglePlayer: "+this.isSinglePlayer()),console.log("@@=> [SDKFunctions] isMultiplayer: "+this.isMultiplayer()),console.log("@@=> [SDKFunctions] isRealTimeMultiplayer: "+this.isRealTimeMultiplayer()),console.log("@@=> [SDKFunctions] isHandShakeFactor: "+this._isHandShakeFactor+", id: "+this._handShakeFactorId),this._sdk.sdkOnEvent=function(e,n,i){if(e==t.KEY_INGAME_DATA){var r=n.ingameKey;if(null!=r&&1==o._eventMap.has(r)){var s=o.deserializeData(n);o._eventMap.get(r)(s)}}else console.log("@@=> [SdkOnEvent] Unhandle message: "+e+", playerId: "+i)},this._sdk.updateOpponentScore=function(t,e,n){o._sdkHandler.OnOpponentScoreUpdated(t,n)},this.registerEvent(t.KEY_HAND_SHAKE_REQUEST,function(t){return e.receive_command_HAND_SHAKE_REQUEST(t)}),this.registerEvent(t.KEY_HAND_SHAKE_ACCEPT,function(t){return e.receive_command_HAND_SHAKE_ACCEPT(t)}),this.registerEvent(t.KEY_NETWORK_NODE_REASSIGN_OWNER,function(t){return e.receive_command_NETWORK_NODE_REASSIGN_OWNER(t)}),this.registerEvent(t.KEY_NETWORK_NODE_DATA_CHANGED,function(t){return e.receive_command_NETWORK_NODE_DATA_CHANGED(t)}),this.registerEvent(t.KEY_NETWORK_NODE_SPAWN_NEW_NODE,function(t){return e.receive_command_NETWORK_NODE_SPAWN_NEW_NODE(t)}),this.registerEvent(t.KEY_NETWORK_NODE_DESTROY,function(t){return e.receive_command_NETWORK_NODE_DESTROY(t)}),this.registerEvent(t.KEY_NETWORK_BULK_MESSAGES,function(t){return e.receive_command_NETWORK_BULK_MESSAGES(t)}),this.registerEvent(t.KEY_NETWORK_NODE_REQUEST_DESTROY,function(t){return e.receive_command_KEY_NETWORK_NODE_REQUEST_DESTROY(t)}),this._cooldownPongMessage=new r.default(this,300,t.KEY_START_COOLDOWN_TO_PLAY_REQUEST,t.KEY_START_COOLDOWN_TO_PLAY_ACCEPTED,function(t,o){return e.target_process_request_KEY_START_COOLDOWN_TO_PLAY_REQUEST(t,o)},function(){}),this._initializeWorldPongMessage=new r.default(this,1e3,t.KEY_INITIALIZE_GAME_WORLD_ON_COOLDOWN,t.KEY_INITIALIZE_GAME_WORLD_ON_COOLDOWN_ACCEPTED,function(t,o){console.log("@@=> receiveInitializeWorld: "+JSON.stringify(t)),e._sdkHandler.receive_command_INITIALIZE_GAME_WORLD_ON_COOLDOWN(t)},function(){}),this._doneHandShakePong=new r.default(this,300,t.KEY_DONE_HAND_SHAKE_REQUEST,t.KEY_DONE_HAND_SHAKE_ACCEPTED,function(t,o){return e.target_process_request_KEY_DONE_HAND_SHAKE_REQUEST(t,o)},function(){return e.onHostDoneHandShake()}),this._spawnDefaultNodesPong=new r.default(this,300,t.KEY_SPAWN_DEFAULT_NETWORK_NODES_REQUEST,t.KEY_SPAWN_DEFAULT_NETWORK_NODES_ACCEPTED,function(t,o){return e.target_process_KEY_SPAWN_DEFAULT_NETWORK_NODES_REQUEST(t,o)},function(){return e.startCooldownAndSendToPeers()}),null==this._aesKey&&(this._aesKey=this.GetAESKey(),s.default.getInstance())}return t.getInstance=function(){return null==this._instance&&(console.log("@@ => [SDKFunction] Instance NULL"),this._instance=new t),this._instance},t.prototype.loadingExpiredAt=function(){return this._sdk.loadingExpiredAt()},t.prototype.RemainLoadingTime=function(){var t=this._sdk.loadingExpiredAt()-Date.now();return t=t<0?0:Math.round(t/1e3)},t.prototype.myPlayerId=function(){return null!=this._myPlayerData&&this._myPlayerData.id?this._myPlayerData.id:"MYPLAYER_EDITOR"},t.prototype.getMyPlayerID=function(){return this.myPlayerId()},t.prototype.myPlayerData=function(){return null!=this._myPlayerData&&this._myPlayerData.id?this._myPlayerData:{id:"MYPLAYER_EDITOR",name:"My player"}},t.prototype.opponentPlayerId=function(){var t=this.getOpponents();return 0==t.length?"OPPONENT_COMPUTER":t[0]},t.prototype.isSinglePlayer=function(){return this._isSinglePlayer},t.prototype.isAsyncPVP=function(){return this._isAsyncPVP},t.prototype.isMultiplayer=function(){return!this._isSinglePlayer},t.prototype.isRealTimeMultiplayer=function(){return 1==this.isMultiplayer()&&0==this.isAsyncPVP()},t.prototype.getOpponents=function(){return Object.keys(this._sdk.opponents)},t.prototype.opponentCount=function(){return this.getOpponents().length},t.prototype.getOpponentsData=function(){return Object.values(this._sdk.opponents)},t.prototype.getAllPlayers=function(){var t=this.getOpponents();return-1==t.indexOf(this.myPlayerId())&&t.push(this.myPlayerId()),t},t.prototype.isSpawner=function(){return this.isHost()},t.prototype.showOpponentProfile=function(t){this._sdk.showOpponentProfile(t)},t.prototype.receive_command_NETWORK_BULK_MESSAGES=function(t){if(null!=t&&null!=t.bulk&&0!=t.bulk.length)for(var e=t.senderId,o=t.sessionId,n=0;n<t.bulk.length;n++){var i=t.bulk[n],r=i.ingameKey;if(null!=r&&1==this._eventMap.has(r)){var s=this.deserializeBulkData(i,o,e);this._eventMap.get(r)(s)}}},t.prototype.setSDKHandler=function(t){this._sdkHandler=t,this._sdkHandler.OnSelfPlayerDataUpdated(this.myPlayerData());var e=this.getOpponentsData();null!=e&&e.length>0&&this._sdkHandler.OnOpponentUpdated(e[0])},t.prototype.readyToStartGame=function(){var t=this;1==this._isHandShakeFactor&&1==this.isRealTimeMultiplayer()&&(0==this._sdk.gameStarted?this._sdk.onOpponentsReady=function(){t.send_command_HAND_SHAKE_REQUEST_If_Factor()}:this.send_command_HAND_SHAKE_REQUEST_If_Factor()),console.log("@@=> Raise ready to start game!"),this._sdk.startGame(),0==this.isRealTimeMultiplayer()&&(this._isSelfHandShaked=!0,this._isDoneHandShake=!0,this._initializeNetworkNodes=!0,this.spawnDefaultNetworkNodesIfHost(),this.startGame())},t.prototype.sendCurrentScore=function(t){this._sdk.setScore(t)},t.prototype.abortGame=function(){this._sdk.goPlaySDK.abortGame(function(){},function(){}),this.MP_StopPingInterval(),null!=this._bulkDelegate&&(s.default.getInstance().unschedule(this._bulkDelegate),this._bulkDelegate=null)},t.prototype.triggerGameOver=function(){this._sdk.updateFinalScore(),this.MP_StopPingInterval(),null!=this._bulkDelegate&&(s.default.getInstance().unschedule(this._bulkDelegate),this._bulkDelegate=null)},t.prototype.registerEvent=function(t,e){this._eventMap.set(t,e)},t.prototype.removeEvent=function(t){this._eventMap.delete(t)},t.prototype.serializeData=function(t,e){return{senderId:this.myPlayerId(),timeTick:this.getTick(),sessionId:this._sessionId,p2p:e,ingameKey:t}},t.prototype.serializeBulkData=function(t,e){return{timeTick:this.getTick(),p2p:e,ingameKey:t}},t.prototype.deserializeData=function(t){if(null!=t){var e=t.p2p,o={timeTick:t.timeTick,senderId:t.senderId,sessionId:t.sessionId};if(null!=e)return e.timeTick=t.timeTick,e.netMetadata=o,e}return cc.warn("Received unknown p2p data"),null},t.prototype.deserializeBulkData=function(t,e,o){if(null!=t){var n=t.p2p,i={timeTick:t.timeTick,senderId:o,sessionId:e};if(null!=n)return n.timeTick=t.timeTick,n.netMetadata=i,n}return cc.warn("Received unknown p2p data"),null},t.prototype.sendP2PMessage=function(e,o){1==this._bulkReady?this._bulkMessages.push(this.serializeBulkData(e,o)):this._sdk.goPlaySDK.sendEvent(t.KEY_INGAME_DATA,this.serializeData(e,o))},t.prototype.sendAndSaveP2PMessage=function(e,o){this._sdk.goPlaySDK.sendEvent(t.KEY_INGAME_DATA,this.serializeData(e,o),!0)},t.prototype.simulateSendLaggyP2PMessage=function(e,o,n,i,r){var s=this;void 0===r&&(r=!1);var a=this._bulkReady,c=null;c=0==this._bulkReady?this.serializeData(n,i):this.serializeBulkData(n,i),cc.tween(e).delay(o).call(function(){0==a?s._sdk.goPlaySDK.sendEvent(t.KEY_INGAME_DATA,c):s._bulkMessages.push(i)}).start()},t.prototype.startBulkMessages=function(){this._bulkReady=!0;var e=this;this._bulkDelegate=function(){if(null!=e._bulkMessages&&e._bulkMessages.length>0){var o=e.serializeData(t.KEY_NETWORK_BULK_MESSAGES,{senderId:e.myPlayerId(),sessionId:e._sessionId,bulk:e._bulkMessages});e._sdk.goPlaySDK.sendEvent(t.KEY_INGAME_DATA,o),e._bulkMessages.splice(0,e._bulkMessages.length)}},s.default.getInstance().schedule(this._bulkDelegate,.1)},Object.defineProperty(t.prototype,"sessionId",{get:function(){return this._sessionId},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hostId",{get:function(){return this._hostId},enumerable:!1,configurable:!0}),t.prototype.isHost=function(){return this._isHost},t.prototype.send_command_HAND_SHAKE_REQUEST_If_Factor=function(){var e=this;if(1==this._isHandShakeFactor){var o={sessionId:this._sessionId,hostId:this._hostId};this._isSelfHandShaked=!0,this.sendP2PMessage(t.KEY_HAND_SHAKE_REQUEST,o);var n=window.setInterval(function(){1==e._isDoneHandShake?window.clearInterval(n):e.sendP2PMessage(t.KEY_HAND_SHAKE_REQUEST,o)},2e3)}},t.prototype.receive_command_HAND_SHAKE_REQUEST=function(e){var o=this;if(null!=e&&0==this._isSelfHandShaked){this._isSelfHandShaked=!0,this._sessionId=e.sessionId,this._hostId=e.hostId,this._isHost=this.myPlayerId()==this._hostId,console.log("@@=> Retrieve sessionId: "+this._sessionId+", hostId: "+this._hostId);var n={peerId:this.myPlayerId(),sessionId:this._sessionId};this.sendP2PMessage(t.KEY_HAND_SHAKE_ACCEPT,n);var i=window.setInterval(function(){1==o._isDoneHandShake?window.clearInterval(i):o.sendP2PMessage(t.KEY_HAND_SHAKE_ACCEPT,n)},2e3)}},t.prototype.receive_command_HAND_SHAKE_ACCEPT=function(t){if(null!=t&&1==this._isHandShakeFactor&&0==this._isDoneHandShake){var e=this.getOpponents();e.indexOf(t.peerId)>=0&&t.sessionId==this._sessionId&&(-1==this._handShakedPeers.indexOf(t.peerId)&&this._handShakedPeers.push(t.peerId),this._handShakedPeers.length==e.length&&(this._isDoneHandShake=!0,this._doneHandShakePong.sendPong({})))}},t.prototype.target_process_request_KEY_DONE_HAND_SHAKE_REQUEST=function(t,e){0==this._isDoneHandShake&&(this._isDoneHandShake=!0,this.onHostDoneHandShake())},t.prototype.onHostDoneHandShake=function(){if(1==this._isHost&&0==this._initializeNetworkNodes){this._initializeNetworkNodes=!0;var t=this.spawnDefaultNetworkNodesIfHost();1==this.isRealTimeMultiplayer()&&(this.MP_StartPingInterval(),this._spawnDefaultNodesPong.sendPong(t))}},t.prototype.target_process_KEY_SPAWN_DEFAULT_NETWORK_NODES_REQUEST=function(t,e){null!=t&&0==this._initializeNetworkNodes&&e.sessionId==this._sessionId&&(this._initializeNetworkNodes=!0,this._sdkHandler.MP_Client_AssignNetworkNodes(t))},t.prototype.startCooldownAndSendToPeers=function(){if(1==this._isHost&&1==this.isRealTimeMultiplayer()){this._cooldownPongMessage.sendPong({});var e=this;s.default.getInstance().setTimeout(function(){e.startGame()},t.COOLDOWN_TO_START)}else this.startGame()},t.prototype.target_process_request_KEY_START_COOLDOWN_TO_PLAY_REQUEST=function(e,o){if(o.sessionId==this._sessionId){var n=t.COOLDOWN_TO_START-(this.getTick()-o.timeTick);if(n>0){var i=this;s.default.getInstance().setTimeout(function(){i.startGame()},n)}else this.startGame()}},t.prototype.startGame=function(){0==this._isStartedGame&&(console.log("@@==> [startGame] isHost: "+this._isHost+", hostId: "+this._hostId),this._isStartedGame=!0,1==this.isRealTimeMultiplayer()&&this.startBulkMessages(),null!=this._sdkHandler?this._sdkHandler.OnOpponentsReady():console.log("@@=> No sdk handler has been bind! the game will not be started"))},t.prototype.getTick=function(){return this._isHost||-1==this._hostLastTick?Date.now():this._hostLastTick+(Date.now()-this._lastSyncLocalTime)},t.prototype.MP_StartPingInterval=function(){var e=this;0==this._startedPingInterval&&(this._startedPingInterval=!0,this._hostLastTick=-1,1==this.isRealTimeMultiplayer()&&(this.registerEvent(t.KEY_PING,function(t){return e.handlePing(t)}),this.sendPing(),this._timerHandlerId=setInterval(function(){return e.sendPing()},this._pingInterval)))},t.prototype.MP_StopPingInterval=function(){1==this.isRealTimeMultiplayer()&&clearInterval(this._timerHandlerId)},t.prototype.getAveragePing=function(){if(this._roundTripTimes.length>0){var t=0;return this._roundTripTimes.forEach(function(e){t+=e}),t/this._roundTripTimes.length}return 0},t.prototype.getAverageSendTime=function(){return this.getAveragePing()/2},t.prototype.handlePing=function(e){if(null!=e){var o=(new Date).getTime();if(e.senderId==this.myPlayerId()){var n=o-e.senderTime;this._roundTripTimes.push(n),this._roundTripTimes.length>this._maxPingStorage&&this._roundTripTimes.shift(),0==this._isHost&&(this._hostLastTick=Math.round(e.receiverTick+e.receiverLastPing/2),this._lastSyncLocalTime=Date.now())}else this.sendP2PMessage(t.KEY_PING,{senderTime:e.senderTime,senderTick:e.senderTick,senderId:e.senderId,receiverTick:this.getTick(),receiverLastPing:this.getAveragePing()})}},t.prototype.sendPing=function(){var e=(new Date).getTime();this.sendP2PMessage(t.KEY_PING,{senderTime:e,senderTick:this.getTick(),senderId:this.myPlayerId()})},t.prototype.addNetworkNode=function(t){null!=t&&0==this._networkedNodes.has(t.networkedNodeID)&&this._networkedNodes.set(t.networkedNodeID,t)},t.prototype.removeNetworkNode=function(t){null!=t&&1==this._networkedNodes.has(t.networkedNodeID)&&this._networkedNodes.delete(t.networkedNodeID)},t.prototype.getNetworkNode=function(t){return null==t?null:1==this._networkedNodes.has(t)?this._networkedNodes.get(t):null},t.prototype.spawnDefaultNetworkNodesIfHost=function(){var t=[];if(1==this._isHost)for(var e=0,o=this._sdkHandler.MP_Host_AssignNetworkedNodes();e<o.length;e++){var n=o[e];this.addNetworkNode(n),t.push(n.convertToData())}return t},t.prototype.send_command_NETWORK_NODE_REASSIGN_OWNER=function(e,o){1==this.isRealTimeMultiplayer()&&this.sendP2PMessage(t.KEY_NETWORK_NODE_REASSIGN_OWNER,{newOwnerId:e.ownerID,nodeId:e.networkedNodeID,nodeData:o})},t.prototype.receive_command_NETWORK_NODE_REASSIGN_OWNER=function(t){if(null!=t&&this._networkedNodes.has(t.nodeId)){var e=this._networkedNodes.get(t.nodeId);t.netMetadata.senderId!=e.ownerID&&t.netMetadata.senderId!=this._hostId||(e.ownerID=t.newOwnerID,e.updateFromData(t.nodeData,t.netMetadata.timeTick))}},t.prototype.send_command_NETWORK_NODE_DATA_CHANGED=function(e,o){1==this.isRealTimeMultiplayer()&&this.sendP2PMessage(t.KEY_NETWORK_NODE_DATA_CHANGED,{nodeId:e.networkedNodeID,nodeData:o})},t.prototype.receive_command_NETWORK_NODE_DATA_CHANGED=function(t){if(null!=t)if(this._networkedNodes.has(t.nodeId)){var e=this._networkedNodes.get(t.nodeId);t.netMetadata.senderId==e.ownerID&&e.updateFromData(t.nodeData,t.timeTick)}else console.log("@@=> node not found for update data change: "+t.nodeId)},t.prototype.send_command_NETWORK_NODE_SPAWN_NEW_NODE=function(){for(var e=this,o=[],n=0;n<arguments.length;n++)o[n]=arguments[n];var i=[];o.forEach(function(t){t.generateNetworkID(),e.addNetworkNode(t),i.push({nodeId:t.networkedNodeID,ownerId:t.ownerID,prefabName:t.getPrefabNameKey(),nodeData:t.convertToData()})}),1==this.isRealTimeMultiplayer()&&this.sendP2PMessage(t.KEY_NETWORK_NODE_SPAWN_NEW_NODE,{nodesData:i})},t.prototype.receive_command_NETWORK_NODE_SPAWN_NEW_NODE=function(t){var e=this;null!=t&&t.nodesData.forEach(function(o){if(0==e._networkedNodes.has(o.nodeId)){var n=e._sdkHandler.MP_OnInitializeNetworkedNode(o.prefabName);n.assignOwnerID(o.ownerId),n.setNetworkID(o.nodeId),e.addNetworkNode(n),n.updateFromData(o.nodeData,t.timeTick)}})},t.prototype.send_command_NETWORK_NODE_DESTROY=function(e){this.removeNetworkNode(e),1==this.isRealTimeMultiplayer()&&this.sendP2PMessage(t.KEY_NETWORK_NODE_DESTROY,{nodeId:e.networkedNodeID,ownerId:e.ownerID})},t.prototype.receive_command_NETWORK_NODE_DESTROY=function(t){if(null!=t)if(t.ownerId!=t.netMetadata.senderId&&t.netMetadata.senderId!=this._hostId||1!=this._networkedNodes.has(t.nodeId))console.log("@@=> failed to destroy node, auth or not found: "+t.nodeId);else{var e=this._networkedNodes.get(t.nodeId);this.removeNetworkNode(e),e.node.destroy()}},t.prototype.send_command_KEY_NETWORK_NODE_REQUEST_DESTROY=function(e){null!=e&&0!=this.isRealTimeMultiplayer()&&(0==e.hasAuthority()?this.sendP2PMessage(t.KEY_NETWORK_NODE_REQUEST_DESTROY,{nodeId:e.networkedNodeID,ownerId:e.ownerID}):console.log("@@=> invalid destroy request, the sender has full authority to destroy by them self."))},t.prototype.receive_command_KEY_NETWORK_NODE_REQUEST_DESTROY=function(t){if(null!=t){var e=this.getNetworkNode(t.nodeId);null!=e&&1==e.hasAuthority()&&this._sdkHandler.receive_command_KEY_NETWORK_NODE_REQUEST_DESTROY(e)}},t.prototype.EncryptDatas=function(t){var e=JSON.stringify(t),o=aesjs.utils.utf8.toBytes(e),n=new aesjs.ModeOfOperation.ctr(this._aesKey,new aesjs.Counter).encrypt(o);return aesjs.utils.hex.fromBytes(n)},t.prototype.DecryptDatas=function(t){if(null==t)return null;var e=aesjs.utils.hex.toBytes(t),o=new aesjs.ModeOfOperation.ctr(this._aesKey,new aesjs.Counter).decrypt(e),n=aesjs.utils.utf8.fromBytes(o);new Array;return JSON.parse(n)},t.prototype.GetAESKey=function(){var t=this._sdk.getAESKey();return null==t&&console.log("@@ => [SDKFunction] AES key NULL"),aesjs.utils.hex.toBytes(t)},t.prototype.SetGameStateData=function(t){var e=this.EncryptDatas(t);this._sdk.setGameState(e)},t.prototype.GetGameStateData=function(){var t=this._sdk.getGameState();return this.DecryptDatas(t)},t.prototype.send_command_INITIALIZE_GAME_WORLD_ON_COOLDOWN=function(t){1==this.isRealTimeMultiplayer()&&this._initializeWorldPongMessage.sendPong(t)},t.COOLDOWN_TO_START=500,t.KEY_INGAME_DATA=50,t.KEY_PING=1e5,t.KEY_EMOTICON=100001,t.KEY_HAND_SHAKE_REQUEST=100002,t.KEY_HAND_SHAKE_ACCEPT=100003,t.KEY_SPAWN_DEFAULT_NETWORK_NODES_REQUEST=100004,t.KEY_NETWORK_NODE_REASSIGN_OWNER=100005,t.KEY_NETWORK_NODE_DATA_CHANGED=100006,t.KEY_NETWORK_NODE_SPAWN_NEW_NODE=100007,t.KEY_NETWORK_NODE_DESTROY=100008,t.KEY_NETWORK_BULK_MESSAGES=100009,t.KEY_SPAWN_STATUS_ITEM=100010,t.KEY_START_COOLDOWN_TO_PLAY_REQUEST=100011,t.KEY_INITIALIZE_GAME_WORLD_ON_COOLDOWN=100012,t.KEY_INITIALIZE_GAME_WORLD_ON_COOLDOWN_ACCEPTED=100013,t.KEY_START_COOLDOWN_TO_PLAY_ACCEPTED=100014,t.KEY_DONE_HAND_SHAKE_REQUEST=100015,t.KEY_DONE_HAND_SHAKE_ACCEPTED=100016,t.KEY_SPAWN_DEFAULT_NETWORK_NODES_ACCEPTED=100017,t.KEY_NETWORK_NODE_REQUEST_DESTROY=100018,t._instance=null,t}();o.default=a,cc._RF.pop()},{"../utilities/PesudoRandom":"PesudoRandom","../utilities/Utils":"Utils","./PongMessage":"PongMessage","./SDKEngine":"SDKEngine"}],SetExtensions:[function(t,e,o){"use strict";cc._RF.push(e,"d82e7I5ToVF4Zg+tn9MBDub","SetExtensions"),Set.prototype.getRandom=function(){for(var t=Math.floor(Math.random()*this.size),e=0,o=0;o<this.length;o++){var n=this[o];if(e++===t)return n}},Set.prototype.convertToArray=function(){var t=[];return this.forEach(function(e){t.push(e)}),t},Set.prototype.getRandom_Old=function(){return Array.from(this).getRandom()},cc._RF.pop()},{}],SoundManager:[function(t,e,o){"use strict";cc._RF.push(e,"e3eb1o2CLBIJbWkpdRzl9OX","SoundManager");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(s=(r<3?i(s):r>3?i(e,o,s):i(e,o))||s);return r>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var r=t("../sdk/SdkFunctions"),s=cc._decorator,a=s.ccclass,c=s.property,l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.soundButton=null,e.muteIcon=null,e.gameIdentifier="PLATFORM_GAME_IDENTIFIER",e.defaultBGMusic=null,e.playMusicOnLoad=!0,e.defaultBGMusicLoop=!0,e.bgMusicVolumn=1,e.sfx_Button=null,e.sfx_ScoreIncrease=null,e.sfx_ScoreDecrease=null,e.sfx_CountDownNumber=null,e.sfx_CountDownStart=null,e._sources=new Array,e._isOn=!0,e._saveKey=null,e}var o;return n(e,t),o=e,e.getInstance=function(){return this._instance},e.prototype.onLoad=function(){var t=new cc.Component.EventHandler;t.target=this.node,t.component="SoundManager",t.handler="onClickOnOffSound",this.soundButton.clickEvents.push(t),o._instance=this,this._saveKey="SOUND_SETTING_"+this.gameIdentifier+"_"+r.default.getInstance().myPlayerId();var e=cc.sys.localStorage.getItem(this._saveKey);this._isOn=!0,void 0!=e&&null!=e&&"false"==e&&(this._isOn=!1)},e.prototype.start=function(){1==this.playMusicOnLoad&&null!=this.defaultBGMusic&&this.playMusic(this.defaultBGMusic,this.defaultBGMusicLoop),this.onOffSoundAndMusic(this._isOn)},e.prototype.onDestroy=function(){this.soundButton.clickEvents.slice(0,this.soundButton.clickEvents.length)},e.prototype.onClickOnOffSound=function(){this.PlayButtonSFX(),this._isOn=!this._isOn,this.onOffSoundAndMusic(this._isOn)},e.prototype.registerSource=function(t){null!=t&&this._sources.indexOf(t)<0&&(this._sources.push(t),t.mute=!this._isOn)},e.prototype.removeSource=function(t){if(null!=t){var e=this._sources.indexOf(t);e>=0&&this._sources.splice(e,1)}},e.prototype.playSound=function(t,e){var o=-1;return null!=t&&(o=cc.audioEngine.playEffect(t,e)),o},e.prototype.playMusic=function(t,e){null!=t&&cc.audioEngine.playMusic(t,e)},e.prototype.stopSound=function(t){null!=t&&-1!=t&&cc.audioEngine.stopEffect(t)},e.prototype.onOffSoundAndMusic=function(t){this._isOn=t,cc.sys.localStorage.setItem(this._saveKey,t),this.muteIcon.active=!t,1==t?(cc.audioEngine.setMusicVolume(this.bgMusicVolumn),cc.audioEngine.setEffectsVolume(1),this._sources.forEach(function(t){null!=t&&(t.mute=!1)})):(cc.audioEngine.setMusicVolume(0),cc.audioEngine.setEffectsVolume(0),this._sources.forEach(function(t){null!=t&&(t.mute=!0)}))},e.prototype.PlayButtonSFX=function(){this.playSound(this.sfx_Button,!1)},e.prototype.PlayScoreIncreaseSFX=function(){this.playSound(this.sfx_ScoreIncrease,!1)},e.prototype.PlayScoreDecreaseSFX=function(){this.playSound(this.sfx_ScoreDecrease,!1)},e.prototype.PlayCountDownNumberSFX=function(){this.playSound(this.sfx_CountDownNumber,!1)},e.prototype.PlayCountDownStartSFX=function(){this.playSound(this.sfx_CountDownStart,!1)},e._instance=null,i([c(cc.Button)],e.prototype,"soundButton",void 0),i([c(cc.Node)],e.prototype,"muteIcon",void 0),i([c],e.prototype,"gameIdentifier",void 0),i([c(cc.AudioClip)],e.prototype,"defaultBGMusic",void 0),i([c],e.prototype,"playMusicOnLoad",void 0),i([c],e.prototype,"defaultBGMusicLoop",void 0),i([c({range:[0,1],slide:!0})],e.prototype,"bgMusicVolumn",void 0),i([c(cc.AudioClip)],e.prototype,"sfx_Button",void 0),i([c(cc.AudioClip)],e.prototype,"sfx_ScoreIncrease",void 0),i([c(cc.AudioClip)],e.prototype,"sfx_ScoreDecrease",void 0),i([c(cc.AudioClip)],e.prototype,"sfx_CountDownNumber",void 0),i([c(cc.AudioClip)],e.prototype,"sfx_CountDownStart",void 0),e=o=i([a],e)}(cc.Component);o.default=l,cc._RF.pop()},{"../sdk/SdkFunctions":"SdkFunctions"}],StatusIcon:[function(t,e,o){"use strict";cc._RF.push(e,"3dd20zyggJBEYWF/nIiVaSg","StatusIcon");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(s=(r<3?i(s):r>3?i(e,o,s):i(e,o))||s);return r>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var r=cc._decorator,s=r.ccclass,a=r.property,c=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.fillImage=null,e.iconImage=null,e.itemType=0,e}return n(e,t),e.prototype.setTime=function(t,e){this.fillImage.fillRange=e/t},i([a(cc.Sprite)],e.prototype,"fillImage",void 0),i([a(cc.Sprite)],e.prototype,"iconImage",void 0),i([a],e.prototype,"itemType",void 0),e=i([s],e)}(cc.Component);o.default=c,cc._RF.pop()},{}],TimeSpan:[function(t,e,o){"use strict";cc._RF.push(e,"40d52wvObRET4kXVi78xlTH","TimeSpan"),Object.defineProperty(o,"__esModule",{value:!0}),o.TimeSpan=void 0;var n=function(){function t(t){void 0===t&&(t=0),this._seconds=0,this._minutes=0,this._hours=0,this._days=0,this.milliseconds=t}return t.Subtract=function(e,o){return new t(e-o)},t.Day=function(){return new t(864e5)},t.Hour=function(){return new t(36e5)},t.Week=function(){return new t(6048e5)},t.Month=function(){var e=new Date,o=new Date;return o.setMonth(o.getMonth()-1),new t(e-o)},t.prototype.addTo=function(t){return console.log("add "+this.totalMilliSeconds,this),t.setMilliseconds(t.getMilliseconds()+this.totalMilliSeconds),t},t.prototype.subtructFrom=function(t){return t.setMilliseconds(t.getMilliseconds()-this.totalMilliSeconds),t},Object.defineProperty(t.prototype,"days",{get:function(){return this._days},set:function(t){isNaN(t)&&(t=0),this._days=t,this.calcMilliSeconds()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hours",{get:function(){return this._hours},set:function(t){isNaN(t)&&(t=0),this._hours=t,this.calcMilliSeconds()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"minutes",{get:function(){return this._minutes},set:function(t){isNaN(t)&&(t=0),this._minutes=t,this.calcMilliSeconds()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"seconds",{get:function(){return this._seconds},set:function(t){this._seconds=t,this.calcMilliSeconds()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"milliseconds",{get:function(){return this._milliseconds},set:function(t){isNaN(t)&&(t=0),this._milliseconds=t,this.calcMilliSeconds()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"totalMilliSeconds",{get:function(){return this._totalMilliSeconds},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"totalSeconds",{get:function(){return Math.round(this._totalMilliSeconds/1e3)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"totalMinutes",{get:function(){return Math.round(this._totalMilliSeconds/6e4)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"totalHours",{get:function(){return Math.round(this._totalMilliSeconds/36e5)},enumerable:!1,configurable:!0}),t.prototype.roundValue=function(t,e){return{modulu:t%e,addition:Math.floor(t/e)}},t.prototype.calcMilliSeconds=function(){var t=this.roundValue(this._milliseconds,1e3);this._milliseconds=t.modulu,this._seconds+=t.addition;var e=this.roundValue(this._seconds,60);this._seconds=e.modulu,this._minutes+=e.addition;var o=this.roundValue(this._minutes,60);this._minutes=o.modulu,this._hours+=o.addition;var n=this.roundValue(this._hours,24);this._hours=n.modulu,this._days+=n.addition,this._totalMilliSeconds=864e5*this.days+36e5*this.hours+6e4*this.minutes+1e3*this.seconds+this.milliseconds},t}();o.TimeSpan=n,cc._RF.pop()},{}],TouchController:[function(t,e,o){"use strict";cc._RF.push(e,"7b052OOfQtKdIOrg+eR8XM8","TouchController");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(s=(r<3?i(s):r>3?i(e,o,s):i(e,o))||s);return r>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var r=t("./GameManager"),s=cc._decorator,a=s.ccclass,c=s.property,l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.gManager=null,e.isOnMouse=!1,e}return n(e,t),e.prototype.start=function(){this.node.on(cc.Node.EventType.TOUCH_START,this.onTouchStart,this,!0),this.node.on(cc.Node.EventType.TOUCH_MOVE,this.onTouchMove,this,!0),this.node.on(cc.Node.EventType.TOUCH_END,this.onTouchEnd,this,!0)},e.prototype.update=function(t){if(this.isOnMouse){var e=this.gManager.activePlayer.node.parent.convertToWorldSpaceAR(this.gManager.activePlayer.node.position);this.gManager.indicator.position=this.node.convertToNodeSpaceAR(e)}},e.prototype.onTouchStart=function(t){if(!this.gManager.gameOver&&!this.gManager.activePlayer.busted){var e=this.node.convertToNodeSpaceAR(t.getLocation());this.gManager.touchInit=e,this.gManager.indicator.active=!0,this.gManager.move.active=!0,this.gManager.indicator.position=e,this.gManager.move.position=e}},e.prototype.onTouchMove=function(t){if(this.gManager.gameOver||this.gManager.activePlayer.busted)this.gManager.activePlayer.linearVelocity=cc.v2(0,0);else{var e=this.node.convertToNodeSpaceAR(t.getLocation()),o=e.sub(this.gManager.indicator.position);this.gManager.move.position=e;var n=Math.atan2(e.x-this.gManager.indicator.position.x,e.y-this.gManager.indicator.position.y),i=Math.abs(o.mag());if(this.gManager.activePlayer.movePrepare(n),i>=this.gManager.indicator.width){o.mag()>0?i=100:o.mag()<0&&(i=-100);var r=i*Math.cos(n),s=i*Math.sin(n);this.gManager.indicator.position=cc.v2(this.gManager.indicator.position.x+s,this.gManager.indicator.position.y+r)}else i>=35||(this.gManager.activePlayer.linearVelocity=cc.v2(0,0))}},e.prototype.onTouchEnd=function(){this.gManager.activePlayer.linearVelocity=cc.v2(0,0),this.gManager.indicator.active=!1,this.gManager.move.active=!1},i([c(r.default)],e.prototype,"gManager",void 0),e=i([a],e)}(cc.Component);o.default=l,cc._RF.pop()},{"./GameManager":"GameManager"}],Utils:[function(t,e,o){"use strict";cc._RF.push(e,"71893PFl7lMcY5u62wcT8n0","Utils");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(s=(r<3?i(s):r>3?i(e,o,s):i(e,o))||s);return r>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var r=cc._decorator,s=r.ccclass,a=(r.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.resetIdGenerator=function(){this._idGenerator=0},e.getUniqueId=function(){return this._idGenerator++},e.secondToMinute=function(t){return Math.floor(t/60)+":"+("0"+Math.floor(t>=60?t-60:t)).slice(-2)},e.calculatePosFromAngleRadius=function(t,e){var o=cc.misc.degreesToRadians(e),n=t*Math.sin(o),i=t*Math.cos(o);return cc.v2(n,i)},e.getRandom=function(t,e){return void 0===e&&(e=0),Math.floor(Math.random()*(t-e)+e)},e.getRandomInt=function(t,e){return Math.floor(Math.random()*Math.floor(e-t))+t},e.getRandomFloat=function(t,e){return void 0===e&&(e=0),Math.random()*(t-e)+e},e.getRandomCollectionObject=function(t){for(var e=Math.floor(Math.random()*t.size),o=0,n=0,i=t.keys();n<i.length;n++){var r=i[n];if(o++===e)return r}},e.getRandomArrayObject=function(t){for(var e=Math.floor(Math.random()*t.length),o=0,n=0,i=t;n<i.length;n++){var r=i[n];if(o++===e)return r}},e.stringToVector=function(t){return new cc.Vec2(Number(t.split(",")[0]),Number(t.split(",")[1]))},e.vectorToString=function(t){return t.x+","+t.y},e.shuffleArray=function(t){for(var e,o=t.length-1;o>0;o--){var n=Math.floor(Math.random()*(o+1));e=[t[n],t[o]],t[o]=e[0],t[n]=e[1]}},e.getWorldPosition=function(t,e,o){if(void 0===e&&(e=this.LEFT),void 0===o&&(o=this.BOTTOM),t){var n=cc.mat4(),i=new cc.Vec3;t.getWorldMatrix(n).getTranslation(i);var r=i.x-t.width*t.anchorX,s=i.y-t.height*t.anchorY;return e==this.RIGHT?r+=t.width:e==this.CENTER&&(r+=t.width/2),o==this.TOP?s+=t.height:e==this.CENTER&&(s+=t.height/2),cc.v2(r,s)}},e.getSimpleWorldPosition=function(t,e,o){void 0===e&&(e=this.LEFT),void 0===o&&(o=this.BOTTOM);var n=this.getWorldPosition(t,e,o);return{x:n.x,y:n.y,z:0}},e.getPosition=function(t,e,o){void 0===e&&(e=this.LEFT),void 0===o&&(o=this.BOTTOM);var n=t.x-t.width*t.anchorX,i=t.y-t.height*t.anchorY;return e==this.RIGHT?n+=t.width:e==this.CENTER&&(n+=t.width/2),o==this.TOP?i+=t.height:e==this.CENTER&&(i+=t.height/2),cc.v2(n,i)},e.removeFromArray=function(t,e){var o=t.indexOf(e);o>-1&&t.splice(o,1)},e.clearArray=function(t){t.length=0},e.flipCoin=function(){return this.random(0,1e4)>5e3},e.random=function(t,e){return Math.floor(Math.random()*(e-t+1)+t)},e.randomSign=function(){return this.random(0,10)>5?1:-1},e.getDiagonalDistance=function(t,e){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(Math.abs(t.y-e.y),2))},e.setMaxSize=function(t,e,o){var n=1;t.width>e&&(n=e/t.width),t.height>o&&(n=Math.min(n,o/t.height)),t.setContentSize(t.width*n,t.height*n)},e.formatTime=function(t){var e=Math.floor(t/60),o=Math.floor(t-60*e);return e.toLocaleString(void 0,{minimumIntegerDigits:2})+":"+o.toLocaleString(void 0,{minimumIntegerDigits:2})},e.loadImageFromURL=function(t,e,o){void 0===o&&(o=null),cc.assetManager.loadRemote(e,{ext:".png"},function(e,n){if(!e){var i=new cc.SpriteFrame(n);if(t.spriteFrame=i,o){var r=i.getOriginalSize(),s=1;(r.height>o.height||r.width>o.width)&&(s=Math.max(o.height/r.height,o.width/r.width)),t.node.setContentSize(r.width*s,r.height*s)}}})},e.adjustNodeToSize=function(t,e){},e.RandomPointInRadius=function(t,e){var o=Math.random()*Math.PI*2,n=Math.cos(o)*t,i=Math.sin(o)*t;return new cc.Vec2(e.x+n,e.y+i)},e.Distance=function(t,e){var o=Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2);return Math.sqrt(o)},e.changeParent=function(t,e){if(t.parent!=e){var o=function(t){var e=t,o=e.angle;do{o+=(e=e.parent).angle}while(null!=e.parent);return o%=360},n=o(t)-o(e),i=t.convertToWorldSpaceAR(cc.v2(0,0)),r=e.convertToNodeSpaceAR(i);t.parent=e,t.position=r,t.angle=n}},e.generateUUID=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var e=16*Math.random()|0;return("x"==t?e:3&e|8).toString(16)})},e.inverseLocalPosition=function(t,e){var o=t.parent.x,n=t.parent.y;t.setPosition(new cc.Vec2(o-e.x+o*t.anchorX,n-e.y+n*t.anchorY))},e.getInversePosition=function(t){var e=t.parent.x,o=t.parent.y;t.setPosition(new cc.Vec2(e-t.position.x+e*t.anchorX,o-t.position.y+o*t.anchorY))},e.calculateInversePosition=function(t,e){var o=t.parent.x,n=t.parent.y;return new cc.Vec2(o-e.x+o*t.anchorX,n-e.y+n*t.anchorY)},e.round=function(t,e){return Math.round(e/t)*t},e.getFloorKey=function(t,e){var o=Object.keys(t);o.sort(function(t,e){return parseInt(t)-parseInt(e)});for(var n=0;n<o.length;n++)if(e<=parseInt(o[n]))return t[o[n]];return null},e.LEFT=0,e.RIGHT=1,e.CENTER=2,e.TOP=3,e.BOTTOM=4,e._idGenerator=0,e=i([s],e)}(cc.Component));o.default=a,cc._RF.pop()},{}],"use_v2.1-2.2.1_cc.Toggle_event":[function(t,e,o){"use strict";cc._RF.push(e,"91c60CHkl5LZaKsFmHDeZkd","use_v2.1-2.2.1_cc.Toggle_event"),cc.Toggle&&(cc.Toggle._triggerEventInScript_isChecked=!0),cc._RF.pop()},{}]},{},["GameManager","Lighting","NetTransfer","Player","Police","TouchController","BuffEffect","BuffManagerBase","BuffTarget","InstantEffect","StatusIcon","EmoticonController","PlayerEmoticons","RemoteEmoticon","HelpController","SoundManager","CanvasMultiResoSupport","FPSHUD","FillScreen","HCG_CountdownToStart","HCG_GameController","HCG_GameManager","HCG_ScoreComboSound","HCG_ScoreController","HCG_UIController","AbstractSDK","GameElapasedTime","ISDKHandler","NetworkedNode","PongMessage","SDKEngine","SdkFunctions","ArrayExtensions","LBPositionConverter","MapExtensions","MathExtensions","PesudoRandom","SetExtensions","TimeSpan","Utils","use_v2.1-2.2.1_cc.Toggle_event"]);